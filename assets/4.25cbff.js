(this.webpackJsonp=this.webpackJsonp||[]).push([[4],{"8oxB":function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,s=[],f=!1,l=-1;function p(){f&&u&&(f=!1,u.length?s=u.concat(s):l=-1,s.length&&d())}function d(){if(!f){var e=c(p);f=!0;for(var t=s.length;t;){for(u=s,s=[];++l<t;)u&&u[l].run();l=-1,t=s.length}u=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new h(e,t)),1!==s.length||f||c(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},N0Pr:function(e){e.exports={_from:"@zhoujiahao/pm@1.0.32",_id:"@zhoujiahao/pm@1.0.32",_inBundle:!1,_integrity:"sha512-Sc9G34tjeyVs6OReQhL+9wIYZyPP+YPsIe75fm+LqoALJTgegRh51ozpQ+5tTnjr1rrgPfMSRDW4/VV+vbNDag==",_location:"/@zhoujiahao/pm",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"@zhoujiahao/pm@1.0.32",name:"@zhoujiahao/pm",escapedName:"@zhoujiahao%2fpm",scope:"@zhoujiahao",rawSpec:"1.0.32",saveSpec:null,fetchSpec:"1.0.32"},_requiredBy:["/@zhoujiahao/blog"],_resolved:"https://registry.npmjs.org/@zhoujiahao/pm/-/pm-1.0.32.tgz",_shasum:"9060c6b570a6844bb0ae277cecb2d3a0e981f8e1",_spec:"@zhoujiahao/pm@1.0.32",_where:"/home/runner/work/zjh.im/zjh.im/node_modules/@zhoujiahao/blog",author:{name:"ZjHOU",email:"z@zjh.im"},bugs:{url:"https://github.com/zjhou/toyBox/issues"},bundleDependencies:!1,dependencies:{"@zhoujiahao/editor":"^1.1.11",imer:"^0.0.1","strapi-sdk-javascript":"^0.3.3"},deprecated:!1,description:"zjh.im - post manager",directories:{lib:"lib",test:"__tests__"},files:["lib"],gitHead:"965f9f595d00270b663b0d0cdaf1a0d438a8f412",homepage:"https://github.com/zjhou/toyBox#readme",keywords:["post","manager","pane.","editor.","code","mirror"],license:"ISC",main:"lib/index.js",name:"@zhoujiahao/pm",peerDependencies:{"@zhoujiahao/utils":"^1.0.14","@zhoujiahao/vendor":"^1.0.0"},publishConfig:{access:"public"},repository:{type:"git",url:"git+https://github.com/zjhou/toyBox.git"},scripts:{test:'echo "Error: run tests from root" && exit 1'},version:"1.0.32"}},"V/h/":function(e,t,n){"use strict";(function(e){var n,r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="undefined"!=typeof Symbol?Symbol("immer-nothing"):(o=!0,(r="immer-nothing")in(n={})?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n),u="undefined"!=typeof Symbol?Symbol("immer-state"):"__$immer_state";function s(e){return!!e&&!!e[u]}function f(e){if(!e)return!1;if("object"!==(void 0===e?"undefined":i(e)))return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var l=Object.assign||function(e,t){for(var n in t)h(t,n)&&(e[n]=t[n]);return e};function p(e){if(Array.isArray(e))return e.slice();var t=void 0===e.__proto__?Object.create(null):{};return l(t,e)}function d(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(n,e[n],e);else for(var r in e)t(r,e[r],e)}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function y(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function m(e,t,n,r){Array.isArray(e.base)?function(e,t,n,r){for(var o=e.base,i=e.copy,a=e.assigned,c=Math.min(o.length,i.length),u=0;u<c;u++)if(a[u]&&o[u]!==i[u]){var s=t.concat(u);n.push({op:"replace",path:s,value:i[u]}),r.push({op:"replace",path:s,value:o[u]})}if(c<i.length){for(var f=c;f<i.length;f++)n.push({op:"add",path:t.concat(f),value:i[f]});r.push({op:"replace",path:t.concat("length"),value:o.length})}else if(c<o.length){n.push({op:"replace",path:t.concat("length"),value:i.length});for(var l=c;l<o.length;l++)r.push({op:"add",path:t.concat(l),value:o[l]})}}(e,t,n,r):function(e,t,n,r){var o=e.base,i=e.copy;d(e.assigned,(function(e,a){var c=o[e],u=i[e],s=a?e in o?"replace":"add":"remove";if(c!==o||"replace"!==s){var f=t.concat(e);n.push("remove"===s?{op:s,path:f}:{op:s,path:f,value:u}),r.push("add"===s?{op:"remove",path:f}:"remove"===s?{op:"add",path:f,value:c}:{op:"replace",path:f,value:c})}}))}(e,t,n,r)}var v={},b=[],g=function(){return b[b.length-1]};function w(e,t){var n=void 0;if(s(e)){var r=e[u];r.finalizing=!0,n=p(r.draft),r.finalizing=!1}else n=p(e);d(e,(function(e){Object.defineProperty(n,""+e,function(e){return v[e]||(v[e]={configurable:!0,enumerable:!0,get:function(){return function(e,t){E(e);var n=j(e)[t];if(!e.finalizing&&n===e.base[t]&&f(n))return S(e),e.copy[t]=w(n,e);return n}(this[u],e)},set:function(t){!function(e,t,n){if(E(e),e.assigned[t]=!0,!e.modified){if(y(j(e)[t],n))return;P(e),S(e)}e.copy[t]=n}(this[u],e,t)}})}(""+e))}));var o={scope:t?t.scope:g(),modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:t,base:e,draft:n,copy:null,revoke:O,revoked:!1};return function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0})}(n,u,o),o.scope.push(o),n}function O(){this.revoked=!0}function j(e){return e.copy||e.base}function P(e){e.modified||(e.modified=!0,e.parent&&P(e.parent))}function S(e){e.copy||(e.copy=p(e.base))}function E(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(e.copy||e.base))}function z(e){for(var t=e.base,n=e.draft,r=Object.keys(n),o=r.length-1;o>=0;o--)if(void 0===t[r[o]]&&!h(t,r[o]))return!0;return r.length!==Object.keys(t).length}function T(e){var t=e.draft;if(t.length!==e.base.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var x=Object.freeze({scopes:b,currentScope:g,willFinalize:function(e,t,n){var r=g();r.forEach((function(e){return e.finalizing=!0})),void 0!==e&&e!==t||(n&&function e(t){if(!t||"object"!==(void 0===t?"undefined":i(t)))return;var n=t[u];if(!n)return;var r=n.base,o=n.draft,a=n.assigned;if(Array.isArray(t)){if(T(n)){if(P(n),a.length=!0,o.length<r.length)for(var c=o.length;c<r.length;c++)a[c]=!1;else for(var s=r.length;s<o.length;s++)a[s]=!0;for(var f=0;f<o.length;f++)void 0===a[f]&&e(o[f])}}else Object.keys(o).forEach((function(t){void 0!==r[t]||h(r,t)?a[t]||e(o[t]):(a[t]=!0,P(n))})),Object.keys(r).forEach((function(e){void 0!==o[e]||h(o,e)||(a[e]=!1,P(n))}))}(t),function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];!1===n.modified&&(Array.isArray(n.base)?T(n)&&P(n):z(n)&&P(n))}}(r))},createDraft:w}),_=[],k=function(){return _[_.length-1]};function A(e,t){var n={scope:t?t.scope:k(),modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null},r=Array.isArray(e)?Proxy.revocable([n],L):Proxy.revocable(n,I),o=r.revoke,i=r.proxy;return n.draft=i,n.revoke=o,n.scope.push(n),i}var I={get:function(e,t){if(t===u)return e;var n=e.drafts;if(!e.modified&&h(n,t))return n[t];var r=D(e)[t];if(e.finalized||!f(r))return r;if(e.modified){if(r!==e.base[t])return r;n=e.copy}return n[t]=A(r,e)},has:function(e,t){return t in D(e)},ownKeys:function(e){return Reflect.ownKeys(D(e))},set:function(e,t,n){if(!e.modified){if(n?y(e.base[t],n)||n===e.drafts[t]:y(e.base[t],n)&&t in e.base)return!0;C(e)}return e.assigned[t]=!0,e.copy[t]=n,!0},deleteProperty:function(e,t){(void 0!==e.base[t]||t in e.base)&&(e.assigned[t]=!1,C(e));e.copy&&delete e.copy[t];return!0},getOwnPropertyDescriptor:function(e,t){var n=e.modified?e.copy:h(e.drafts,t)?e.drafts:e.base,r=Reflect.getOwnPropertyDescriptor(n,t);!r||Array.isArray(n)&&"length"===t||(r.configurable=!0);return r},defineProperty:function(){throw new Error("Immer does not support defining properties on draft objects.")},setPrototypeOf:function(){throw new Error("Immer does not support `setPrototypeOf()`.")}},L={};function D(e){return e.copy||e.base}function C(e){e.modified||(e.modified=!0,e.copy=l(p(e.base),e.drafts),e.drafts=null,e.parent&&C(e.parent))}d(I,(function(e,t){L[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),L.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer does not support deleting properties from arrays: "+t);return I.deleteProperty.call(this,e[0],t)},L.set=function(e,t,n){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer does not support setting non-numeric properties on arrays: "+t);return I.set.call(this,e[0],t,n)};var R=Object.freeze({scopes:_,currentScope:k,willFinalize:function(){},createDraft:A});var N={useProxies:"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect,autoFreeze:void 0===e&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},F=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,N,t),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this)}return a(e,[{key:"produce",value:function(e,t,n){var r=this;if("function"==typeof e&&"function"!=typeof t){var o=t;return t=e,function(){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return r.produce(a,(function(e){var r;return(r=t).call.apply(r,[e,e].concat(n))}))}}if("function"!=typeof t)throw new Error("if first argument is not a function, the second argument to produce should be a function");if(void 0!==n&&"function"!=typeof n)throw new Error("the third argument of a producer should not be set or a function");var i=void 0;if(f(e))if(s(e)){if(void 0===(i=t.call(e,e)))return e}else{this.scopes.push([]);var a=this.createDraft(e);try{i=t.call(a,a),this.willFinalize(i,a,!!n);var l=n&&[],p=n&&[];if(void 0===i||i===a)i=this.finalize(a,[],l,p);else{if(a[u].modified)throw new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");f(i)&&(i=this.finalize(i)),n&&(l.push({op:"replace",path:[],value:i}),p.push({op:"replace",path:[],value:e}))}}finally{this.currentScope().forEach((function(e){return e.revoke()})),this.scopes.pop()}n&&n(l,p)}else if(void 0===(i=t(e)))return e;return i===c?void 0:i}},{key:"setAutoFreeze",value:function(e){this.autoFreeze=e}},{key:"setUseProxies",value:function(e){this.useProxies=e,l(this,e?R:x)}},{key:"finalize",value:function(e,t,n,r){var o=e[u];if(!o)return Object.isFrozen(e)?e:this.finalizeTree(e);if(o.scope!==this.currentScope())return e;if(!o.modified)return o.base;if(!o.finalized){if(o.finalized=!0,this.finalizeTree(o.draft,t,n,r),this.onDelete){var i=o.assigned;for(var a in i)i[a]||this.onDelete(o,a)}this.onCopy&&this.onCopy(o),this.autoFreeze&&1===this.scopes.length&&Object.freeze(o.copy),n&&m(o,t,n,r)}return o.copy}},{key:"finalizeTree",value:function(e,t,n,r){var o=this,i=e[u];i&&(e=this.useProxies?i.copy:i.copy=p(i.draft));var a=this.onAssign;return d(e,(function c(u,l,p){var h=!!i&&p===e;if(s(l)){if(p[u]=l=n&&h&&!i.assigned[u]?o.finalize(l,t.concat(u),n,r):o.finalize(l),h&&l===i.base[u])return}else{if(h&&y(l,i.base[u]))return;f(l)&&!Object.isFrozen(l)&&d(l,c)}h&&a&&a(i,u,l)})),e}}]),e}()),U=F.produce;U((function(e,t){for(var n=0;n<t.length;n++){var r=t[n],o=r.path;if(0===o.length&&"replace"===r.op)e=r.value;else{for(var a=e,c=0;c<o.length-1;c++)if(!(a=a[o[c]])||"object"!==(void 0===a?"undefined":i(a)))throw new Error("Cannot apply patch, path doesn't resolve: "+o.join("/"));var u=o[o.length-1];switch(r.op){case"replace":case"add":a[u]=r.value;break;case"remove":if(Array.isArray(a)){if(u!==a.length-1)throw new Error("Only the last index of an array can be removed, index: "+u+", length: "+a.length);a.length-=1}else delete a[u];break;default:throw new Error("Unsupported patch operation: "+r.op)}}}return e}));t.a=U}).call(this,n("8oxB"))},XXAI:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"set",(function(){return R})),n.d(r,"get",(function(){return N})),n.d(r,"remove",(function(){return B})),n.d(r,"list",(function(){return J})),n.d(r,"destroy",(function(){return M})),n.d(r,"withLocalList",(function(){return V}));var o=n("8RZD"),i=n("q1tI"),a=n.n(i),c=n("i8i4"),u=n.n(c),s=n("V/h/");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){h(o,n);var r=m(o);function o(){var e;l(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return w(b(e=r.call.apply(r,[this].concat(n))),"state",{component:null}),e}return d(o,[{key:"componentDidMount",value:function(){var t=this;e().then((function(e){t.setState({component:e.default})}))}},{key:"render",value:function(){var e=this.state.component;return e?a.a.createElement(e,this.props):t}}]),o}(i.Component)},j=function(e){var t=e.posts,n=e.activePostIdx,r=e.onTitleClick;return a.a.createElement("ul",null,t.map((function(e,t){var o=e.title,i=(e.id,e.postType,e.attachment_url,n===t);return a.a.createElement("li",{onClick:function(){r(t)},className:"".concat(i?"active":"")},a.a.createElement("span",{className:"title"},o))})))},P=function(e){var t=e.api,n=e.postListUpdater,r=e.Persistor,o=e.editingPost,i=e.refresh;return function(e,a){var c=e.error,u=e.success;e.warn;t.update(a.getOption("contentId"),a.doc.getValue(),o.title).then((function(e){r.remove(e.id),i(),e.postType="published",n((function(t){t.find((function(t){return t.id===e.id})).content=e.content})),u("博文已更新")})).catch((function(){c("博文更新失败")}))}},S=function(e,t){var n=e.Persistor,r=e.postListUpdater,o=e.api,i=e.active;return function(e,a){var c=e.error,u=e.success,s=(e.warn,a.getOption("contentId"));n.remove(s),r((function(e){return e.filter((function(e){return e.id!==s}))})),"draft"!==t?o.delete(s).then((function(){i(0),u("博文永久删除")})).catch((function(e){c("博文删除失败")})):u("博文已经删除")}},E=function(e){var t=e.Persistor,n=e.api,r=e.postListUpdater;return function(e,o){var i=e.error,a=e.success,c=(e.warn,o.getOption("newPostTitle")),u=o.getOption("contentId"),s=t.get(u).title,f=o.doc.getValue();c||s?f?n.create(c||s,f).then((function(e){t.remove(u),r((function(t){t[0]=e,t[0].postType="published"})),a("博文创建成功")})).catch((function(e){i("博文创建失败")})):i("内容不能为空!"):i("标题不能为空!")}},z=n("1EKS"),T=n.n(z),x=function(e){var t=e.Persistor,n=e.postListUpdater,r=e.active;return function(e,o,i){var a=e.error,c=(e.success,e.warn,i.argString&&i.argString.trim());if(c){o.setOption("newPostTitle",c);var u=T()(Date.now()).slice(16),s={title:c,id:u,postType:"draft",content:""};t.set(u,s),n((function(e){e.unshift(s)}),(function(){r(0)}))}else a("标题不能为空: new &lt;title&gt;")}},_=function(e,t){e.api,e.postListUpdater,e.active;var n=e.exit,r=(e.Persistor,function(e,n){return{draft:["publish"],published:["update"]}[t].includes(n)?e:function(e){(0,e.error)("非法命令")}});return[{name:"update",fn:r(P(e),"update")},{name:"deleteThisPostForever",fn:S(e,t)},{name:"publish",fn:r(E(e),"publish")},{name:"exit",fn:function(){n()}},{name:"new",fn:x(e)}]};function k(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=new RegExp("^pm-persistor-"),R=function(e,t){localStorage.setItem("pm-persistor-"+e,JSON.stringify(t)),localStorage.setItem("pm-time-stamp",Date.now())},N=function(e){if(e)return JSON.parse(localStorage.getItem("pm-persistor-"+e))},F=function(e){if(e)return JSON.parse(localStorage.getItem(e))},U=function(){return Object.keys(localStorage).filter((function(e){return C.test(e)}))},B=function(e){localStorage.removeItem("pm-persistor-"+e)},J=function(){return U().map(F)},V=function(e){var t=J(),n={};if(e.forEach((function(e){var t=e.id;n[t]=!0})),!e.length)return t.map((function(e){return L({postType:"draft"},e)}));var r=t.filter((function(e){var t=e.id;return!n[t]}));return[].concat(k(r.map((function(e){return L({postType:"draft"},e)}))),k(e.map((function(e){return L({postType:"published"},e)}))))},M=function(){U().forEach((function(e){localStorage.removeItem(e)}))};n("isNF");function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(c,e);var t,n,r,i=G(c);function c(){var e;q(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $(X(e=i.call.apply(i,[this].concat(n))),"state",{file:null,uploading:!1}),$(X(e),"uploadFile",(function(t){var n="".concat(e.props.fileId,"-").concat(t.name);e.setState({uploading:!0}),Object(o.j)("https://api.zjh.im/upload",t,"file",{id:n}).then((function(){e.setState({uploading:!1}),(e.props.onSuccess||function(){})("https://images-repo.sgp1.digitaloceanspaces.com/".concat(n))})).catch((function(){e.setState({uploading:!1})}))})),$(X(e),"handleOnChooseFile",(function(){e.fileInput&&e.fileInput.click()})),$(X(e),"handleFileSelect",(function(t){var n=t.target.files[0];n&&e.uploadFile(n)})),e}return t=c,(n=[{key:"render",value:function(){var e=this;return[a.a.createElement("input",{ref:function(t){return e.fileInput=t},type:"file",accept:this.props.accept,className:"file-input",onChange:this.handleFileSelect,onClick:function(e){e.target.value=null}}),this.props.children({select:this.handleOnChooseFile,uploading:this.state.uploading})]}}])&&K(t.prototype,n),r&&K(t,r),c}(a.a.PureComponent),ee=(n("o5JI"),function(e){var t=e.size,n=void 0===t?3:t;return a.a.createElement("div",{className:"bg-blink-dot",style:{width:n,height:n}})}),te=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M3 6.5V3.584c0-.51.022-1.062.363-1.44.157-.174.355-.288.59-.26C4.889 1.996 5 3.316 5 4.26v2.806c0 .788-.143 1.602-.673 2.184-.694.763-1.682 1.205-2.68.022C1.137 8.669 1 7.85 1 7.064V.5"}))};te.defaultProps={width:"6",height:"11",viewBox:"0 0 6 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var ne=function(e){var t=e.onSuccess,n=e.fileId,r=e.hasAttachAlready;return a.a.createElement(W,{fileId:n,onSuccess:t},(function(e){var t=e.select,n=e.uploading;return a.a.createElement("span",{className:"actions ".concat(r?"hasAttach":""),onClick:t},n?a.a.createElement(ee,null):a.a.createElement(te,null))}))};function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se(e);if(t){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ce(this,n)}}function ce(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=n("N0Pr").version,pe=O((function(){return n.e(3).then(n.bind(null,"0BQj"))}),a.a.createElement("div",{style:{width:"calc(50% - 15px)",height:"100%",border:"dotted 1px #000",background:"#f0f0f0"}})),de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(c,e);var t,n,o,i=ae(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),fe(ue(t=i.call(this,e)),"active",(function(e){t.setState({activePostIdx:e})})),fe(ue(t),"updatePostList",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};Array.isArray(e)?t.setState({postList:e}):t.setState((function(t){return{postList:Object(s.a)(t.postList,e)}}),n)})),fe(ue(t),"buildEdtCls",(function(){var e=t.state.postList[t.state.activePostIdx]||t.state.postList[0],n=!!N(e.id),r="normal-file";return"draft"===e.postType&&n&&(r="new-file"),"published"===e.postType&&n&&(r="changed-file"),"editor-wrapper "+r})),fe(ue(t),"titleFormatter",(function(e){return"".concat(e.title)})),fe(ue(t),"refresh",(function(){t.setState({updateStamp:Date.now()})})),fe(ue(t),"getEditingPostTitle",(function(){return(t.state.postList[t.state.activePostIdx]||t.state.postList[0]).title})),fe(ue(t),"handleEditorContentChange",(function(e,n){var r=t.state.postList[t.state.activePostIdx]||t.state.postList[0];R(e,{title:t.getEditingPostTitle(),postType:r.type,id:e,content:n})})),fe(ue(t),"handleUploadFile",(function(e){return function(n){t.props.api.update(e,"","",n).then((function(){t.updatePostList((function(t){t.find((function(t){var n=t.id;return e===n})).attachment_url=n})),t.refresh()}))}})),fe(ue(t),"renderTitleList",(function(){return a.a.createElement("div",{className:"side-list-col"},a.a.createElement(j,{titles:t.state.postList.map(t.titleFormatter),update:t.props.api.update,postListUpdater:t.updatePostList,refresh:t.refresh,posts:t.state.postList,onTitleClick:t.active,activePostIdx:t.state.activePostIdx}))})),fe(ue(t),"renderAttachmentBtn",(function(){var e=t.state.postList[t.state.activePostIdx]||t.state.postList[0],n=e.id,r=e.postType,o=e.attachment_url;return"published"===r?a.a.createElement(ne,{fileId:n,hasAttachAlready:!!o,onSuccess:t.handleUploadFile(n)}):null})),fe(ue(t),"renderEditor",(function(){var e=t.state.postList[t.state.activePostIdx]||t.state.postList[0],n=N(e.id),o=n&&void 0!==n.content?n.content:e.content||"";return a.a.createElement("div",{className:t.buildEdtCls(),"data-v":le},a.a.createElement(pe,{value:o,contentId:e.id,backgroundColor:"#f2f2f2",onSave:t.handleEditorContentChange,exArr:_({api:t.props.api,postListUpdater:t.updatePostList,editingPost:e,refresh:t.refresh,active:t.active,exit:t.props.exit,Persistor:r},e.postType)}),t.renderAttachmentBtn(),e.attachment_url&&a.a.createElement("img",{src:e.attachment_url}))})),t.state={activePostIdx:0,updateStamp:Date.now(),postList:t.props.posts},t}return t=c,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return a.a.createElement("div",{className:"pane"},this.renderTitleList(),this.renderEditor())}}])&&oe(t.prototype,n),o&&oe(t,o),c}(a.a.PureComponent),he=(n("Zse/"),function(e){u.a.unmountComponentAtNode(e||Object(o.a)("#gui"))}),ye=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.dom||Object(o.a)("#gui");i.classList.add("fullscreen"),u.a.render(a.a.createElement(de,{posts:e,api:t,exit:n}),i)};function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge="https://api.zjh.im/z",we={create:"".concat(ge,"/post/create"),update:"".concat(ge,"/post/update"),delete:"".concat(ge,"/post/delete"),list:"".concat(ge,"/posts")},Oe=function(e){var t=e?{create:function(t,n){return Object(o.h)(we.create,"POST",ve({title:t,content:n},e))},update:function(t,n,r,i){return Object(o.h)(we.update,"POST",ve({id:t,title:r,content:n,attachment_url:i},e))},delete:function(t){return Object(o.h)(we.delete,"POST",ve({id:t},e))}}:{create:function(){return Promise.reject()},update:function(){return Promise.reject()},delete:function(){return Promise.reject()}};return ve({list:function(){return Object(o.i)(we.list)}},t)};function je(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var Pe,Se,Ee=Object(o.c)("pm","pm [access token]","posts manager for my blog."),ze=function(e){localStorage.setItem("p-c-key",JSON.stringify(e))};t.default={doc:Ee,shortopts:"e",handler:(Pe=regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.e){e.next=3;break}return he(),e.abrupt("return","Goodbye");case 3:return n=t.user&&t.password?{user:t.user,password:t.password}:JSON.parse(localStorage.getItem("p-c-key"))||null,ze(n),r=Oe(n),e.next=9,r.list();case 9:return i=e.sent,a=t.dom||Object(o.a)("#gui"),e.abrupt("return",new Promise((function(e,t){try{ye(V(i),r,(function(){e(),a.classList.remove("fullscreen"),setTimeout((function(){Terminal&&Terminal.exec("pm -e")}))}),{dom:a})}catch(e){return"Fail to fetch posts"}})));case 12:case"end":return e.stop()}}),e)})),Se=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=Pe.apply(e,t);function i(e){je(o,n,r,i,a,"next",e)}function a(e){je(o,n,r,i,a,"throw",e)}i(void 0)}))},function(e){return Se.apply(this,arguments)})}},"Zse/":function(e,t,n){},isNF:function(e,t,n){},o5JI:function(e,t,n){}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pbW1lci9kaXN0L2ltbWVyLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL2FzeW5jLWltcG9ydC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL3Bvc3QtbGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL2N1c3RvbS1lZGl0b3ItY29tbWFuZHMvY29tbWFuZHMvdXBkYXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AemhvdWppYWhhby9wbS9saWIvbWFuYWdlLXBhbmUvY3VzdG9tLWVkaXRvci1jb21tYW5kcy9jb21tYW5kcy9kZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B6aG91amlhaGFvL3BtL2xpYi9tYW5hZ2UtcGFuZS9jdXN0b20tZWRpdG9yLWNvbW1hbmRzL2NvbW1hbmRzL2NyZWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL2N1c3RvbS1lZGl0b3ItY29tbWFuZHMvY29tbWFuZHMvbmV3LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AemhvdWppYWhhby9wbS9saWIvbWFuYWdlLXBhbmUvY3VzdG9tLWVkaXRvci1jb21tYW5kcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL3BlcnNpc3Rvci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL3VwbG9hZGVyL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AemhvdWppYWhhby9wbS9saWIvdXRpbHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B6aG91amlhaGFvL3BtL2xpYi9tYW5hZ2UtcGFuZS9hdHRhY2htZW50LWJ0bi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL3BhbmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B6aG91amlhaGFvL3BtL2xpYi9tYW5hZ2UtcGFuZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL2Jsb2ctYXBpL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AemhvdWppYWhhby9wbS9saWIvaW5kZXguanMiXSwibmFtZXMiOlsiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsInByb2Nlc3MiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdFNldFRpbW91dCIsIkVycm9yIiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJzZXRUaW1lb3V0IiwiZSIsImNhbGwiLCJ0aGlzIiwiY2xlYXJUaW1lb3V0IiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJkcmFpbmluZyIsInF1ZXVlSW5kZXgiLCJjbGVhblVwTmV4dFRpY2siLCJsZW5ndGgiLCJjb25jYXQiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsImxlbiIsInJ1biIsIm1hcmtlciIsInJ1bkNsZWFyVGltZW91dCIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJuZXh0VGljayIsImFyZ3MiLCJBcnJheSIsImFyZ3VtZW50cyIsImkiLCJwdXNoIiwicHJvdG90eXBlIiwiYXBwbHkiLCJ0aXRsZSIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwibmFtZSIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwib2JqIiwia2V5IiwidmFsdWUiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsImNyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiQ29uc3RydWN0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJOT1RISU5HIiwiRFJBRlRfU1RBVEUiLCJpc0RyYWZ0IiwiaXNEcmFmdGFibGUiLCJpc0FycmF5IiwicHJvdG8iLCJnZXRQcm90b3R5cGVPZiIsImFzc2lnbiIsImhhcyIsInNoYWxsb3dDb3B5Iiwic2xpY2UiLCJ1bmRlZmluZWQiLCJfX3Byb3RvX18iLCJjcmVhdGUiLCJlYWNoIiwiY2IiLCJ0aGluZyIsInByb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImlzIiwieCIsInkiLCJnZW5lcmF0ZVBhdGNoZXMiLCJzdGF0ZSIsImJhc2VQYXRoIiwicGF0Y2hlcyIsImludmVyc2VQYXRjaGVzIiwiYmFzZSIsImNvcHkiLCJhc3NpZ25lZCIsIm1pbkxlbmd0aCIsIk1hdGgiLCJtaW4iLCJwYXRoIiwib3AiLCJfaSIsIl9pMiIsImdlbmVyYXRlQXJyYXlQYXRjaGVzIiwiYXNzaWduZWRWYWx1ZSIsIm9yaWdWYWx1ZSIsImdlbmVyYXRlT2JqZWN0UGF0Y2hlcyIsImRlc2NyaXB0b3JzIiwic2NvcGVzIiwiY3VycmVudFNjb3BlIiwiY3JlYXRlRHJhZnQiLCJwYXJlbnQiLCJkcmFmdCIsIl9zdGF0ZSIsImZpbmFsaXppbmciLCJnZXQiLCJhc3NlcnRVbnJldm9rZWQiLCJzb3VyY2UiLCJwcmVwYXJlQ29weSIsIl9nZXQiLCJzZXQiLCJtb2RpZmllZCIsIm1hcmtDaGFuZ2VkIiwiX3NldCIsImNyZWF0ZVByb3BlcnR5UHJveHkiLCJzY29wZSIsImZpbmFsaXplZCIsInJldm9rZSIsInJldm9rZWQiLCJjcmVhdGVIaWRkZW5Qcm9wZXJ0eSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoYXNPYmplY3RDaGFuZ2VzIiwia2V5cyIsImhhc0FycmF5Q2hhbmdlcyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImxlZ2FjeVByb3h5IiwiZnJlZXplIiwid2lsbEZpbmFsaXplIiwicmVzdWx0IiwiYmFzZURyYWZ0IiwibmVlZFBhdGNoZXMiLCJmb3JFYWNoIiwibWFya0NoYW5nZXNSZWN1cnNpdmVseSIsIm9iamVjdCIsIm1hcmtDaGFuZ2VzU3dlZXAiLCJzY29wZXMkMSIsImN1cnJlbnRTY29wZSQxIiwiY3JlYXRlRHJhZnQkMSIsImRyYWZ0cyIsIl9yZWYiLCJQcm94eSIsInJldm9jYWJsZSIsImFycmF5VHJhcHMiLCJvYmplY3RUcmFwcyIsInByb3h5Iiwic291cmNlJDEiLCJvd25LZXlzIiwiUmVmbGVjdCIsIm1hcmtDaGFuZ2VkJDEiLCJkZWxldGVQcm9wZXJ0eSIsIm93bmVyIiwic2V0UHJvdG90eXBlT2YiLCJmbiIsImlzTmFOIiwicGFyc2VJbnQiLCJtb2Rlcm5Qcm94eSIsImNvbmZpZ0RlZmF1bHRzIiwidXNlUHJveGllcyIsImF1dG9GcmVlemUiLCJvbkFzc2lnbiIsIm9uRGVsZXRlIiwib25Db3B5IiwiaW1tZXIiLCJJbW1lciIsImNvbmZpZyIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiY2xhc3NDYWxsQ2hlY2siLCJzZXRVc2VQcm94aWVzIiwicHJvZHVjZSIsImJpbmQiLCJyZWNpcGUiLCJwYXRjaExpc3RlbmVyIiwiX3RoaXMiLCJkZWZhdWx0QmFzZSIsIl9sZW4iLCJfa2V5IiwiX3JlY2lwZSIsImZpbmFsaXplIiwicG9wIiwiaXNGcm96ZW4iLCJmaW5hbGl6ZVRyZWUiLCJyb290IiwiX3RoaXMyIiwiZmluYWxpemVQcm9wZXJ0eSIsImluRHJhZnQiLCJwYXRjaCIsIl9pMyIsImpvaW4iLCJhc3luY0NvbXBvbmVudCIsImltcG9ydENvbXBvbmVudCIsImxvYWRlciIsImNvbXBvbmVudCIsInRoZW4iLCJjbXAiLCJzZXRTdGF0ZSIsIkMiLCJDb21wb25lbnQiLCJwb3N0cyIsImFjdGl2ZVBvc3RJZHgiLCJvblRpdGxlQ2xpY2siLCJtYXAiLCJpZHgiLCJpc0FjdGl2ZSIsImlkIiwicG9zdFR5cGUiLCJhdHRhY2htZW50X3VybCIsIm9uQ2xpY2siLCJjbGFzc05hbWUiLCJhcGkiLCJwb3N0TGlzdFVwZGF0ZXIiLCJQZXJzaXN0b3IiLCJlZGl0aW5nUG9zdCIsInJlZnJlc2giLCJjbSIsImVycm9yIiwic3VjY2VzcyIsIndhcm4iLCJ1cGRhdGUiLCJnZXRPcHRpb24iLCJkb2MiLCJnZXRWYWx1ZSIsIm5ld1Bvc3QiLCJyZW1vdmUiLCJvbGRQb3N0TGlzdCIsImZpbmQiLCJjb250ZW50IiwidHlwZSIsImFjdGl2ZSIsInBpZCIsImZpbHRlciIsInAiLCJ0bXBJZCIsInRtcFRpdGxlIiwicGFyYW1zIiwiYXJnU3RyaW5nIiwidHJpbSIsInNldE9wdGlvbiIsImhhc2giLCJEYXRlIiwibm93IiwidW5zaGlmdCIsImJ1aWxkRWRpdG9yQ29tbWFuZHMiLCJ0b29scyIsImV4aXQiLCJleEhhbmRsZXJWYWxpZGF0b3IiLCJleE5hbWUiLCJwdWJsaXNoZWQiLCJpbmNsdWRlcyIsImJ1aWxkVXBkYXRlQ21kIiwiYnVpbGREZWxldGVDbWQiLCJidWlsZENyZWF0ZUNtZCIsImJ1aWxkTmV3Q21kIiwiS0VZX1JFR19FWFAiLCJSZWdFeHAiLCJ2YWwiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwicGFyc2UiLCJnZXRJdGVtIiwiX2dldFBlcnNpc3RvcktleXMiLCJrIiwidGVzdCIsInJlbW92ZUl0ZW0iLCJsaXN0Iiwid2l0aExvY2FsTGlzdCIsImFyciIsImxvY2FsTGlzdCIsImlkTWFwIiwibmV3UG9zdHMiLCJkZXN0cm95IiwiVXBsb2FkZXIiLCJmaWxlIiwidXBsb2FkaW5nIiwiZmlsZUlkIiwidXBsb2FkRmlsZSIsIm9uU3VjY2VzcyIsImZpbGVJbnB1dCIsImNsaWNrIiwiZmlsZXMiLCJyZWYiLCJhY2NlcHQiLCJvbkNoYW5nZSIsImhhbmRsZUZpbGVTZWxlY3QiLCJjaGlsZHJlbiIsInNlbGVjdCIsImhhbmRsZU9uQ2hvb3NlRmlsZSIsIlJlYWN0IiwiUHVyZUNvbXBvbmVudCIsIkJsaW5rRG90Iiwic2l6ZSIsInN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJBdHRhY2htZW50SWNvbiIsIkF0dGFjaG1lbnRCdG4iLCJoYXNBdHRhY2hBbHJlYWR5IiwicmVxdWlyZSIsIkVkaXRvciIsIkFzeW5jSW1wb3J0IiwiYm9yZGVyIiwiYmFja2dyb3VuZCIsIlBhbmUiLCJ1cGRhdGVyRm4iLCJjYkZuIiwicG9zdExpc3QiLCJwcmV2U3RhdGUiLCJsb2NhbENoYW5nZXMiLCJ1cGRhdGVTdGFtcCIsImdldEVkaXRpbmdQb3N0VGl0bGUiLCJ1cmwiLCJ1cGRhdGVQb3N0TGlzdCIsInRhcmdldElkIiwidGl0bGVzIiwidGl0bGVGb3JtYXR0ZXIiLCJoYW5kbGVVcGxvYWRGaWxlIiwiaW5pdENvbnRlbnQiLCJidWlsZEVkdENscyIsImRhdGEtdiIsImNvbnRlbnRJZCIsImJhY2tncm91bmRDb2xvciIsIm9uU2F2ZSIsImhhbmRsZUVkaXRvckNvbnRlbnRDaGFuZ2UiLCJleEFyciIsImJ1aWxkRWRpdG9yRXhBcnIiLCJyZW5kZXJBdHRhY2htZW50QnRuIiwic3JjIiwicmVuZGVyVGl0bGVMaXN0IiwicmVuZGVyRWRpdG9yIiwidW5pbnN0YWxsIiwiZG9tIiwiUmVhY3RET00iLCJ1bm1vdW50Q29tcG9uZW50QXROb2RlIiwiJCIsIm9wdGlvbnMiLCIkZ3VpIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVuZGVyIiwiQkFTRV9VUkwiLCJBUEkiLCJkZWxldGUiLCJjcmVkZW50aWFsIiwiYWN0aW9uc05lZWRDcmVkZW50aWFsIiwicmVxIiwiYXR0YWNobWVudFVSTCIsIlByb21pc2UiLCJyZWplY3QiLCJyZXFBbmRDYWNoZSIsImRvY1RwbCIsInNhdmVDcmVkZW50aWFsIiwic2hvcnRvcHRzIiwiaGFuZGxlciIsInBhcmFtc09iaiIsInVzZXIiLCJwYXNzd29yZCIsInBvc3RTREsiLCJyZXNvbHZlIiwicnVuTWFuYWdlUGFuZWwiLCJUZXJtaW5hbCIsImV4ZWMiXSwibWFwcGluZ3MiOiIwRUFDQSxJQU9JQSxFQUNBQyxFQVJBQyxFQUFVQyxFQUFPQyxRQUFVLEdBVS9CLFNBQVNDLElBQ0wsTUFBTSxJQUFJQyxNQUFNLG1DQUVwQixTQUFTQyxJQUNMLE1BQU0sSUFBSUQsTUFBTSxxQ0FzQnBCLFNBQVNFLEVBQVdDLEdBQ2hCLEdBQUlULElBQXFCVSxXQUVyQixPQUFPQSxXQUFXRCxFQUFLLEdBRzNCLElBQUtULElBQXFCSyxJQUFxQkwsSUFBcUJVLFdBRWhFLE9BREFWLEVBQW1CVSxXQUNaQSxXQUFXRCxFQUFLLEdBRTNCLElBRUksT0FBT1QsRUFBaUJTLEVBQUssR0FDL0IsTUFBTUUsR0FDSixJQUVJLE9BQU9YLEVBQWlCWSxLQUFLLEtBQU1ILEVBQUssR0FDMUMsTUFBTUUsR0FFSixPQUFPWCxFQUFpQlksS0FBS0MsS0FBTUosRUFBSyxNQXZDbkQsV0FDRyxJQUVRVCxFQURzQixtQkFBZlUsV0FDWUEsV0FFQUwsRUFFekIsTUFBT00sR0FDTFgsRUFBbUJLLEVBRXZCLElBRVFKLEVBRHdCLG1CQUFqQmEsYUFDY0EsYUFFQVAsRUFFM0IsTUFBT0ksR0FDTFYsRUFBcUJNLEdBakI3QixHQXdFQSxJQUVJUSxFQUZBQyxFQUFRLEdBQ1JDLEdBQVcsRUFFWEMsR0FBYyxFQUVsQixTQUFTQyxJQUNBRixHQUFhRixJQUdsQkUsR0FBVyxFQUNQRixFQUFhSyxPQUNiSixFQUFRRCxFQUFhTSxPQUFPTCxHQUU1QkUsR0FBYyxFQUVkRixFQUFNSSxRQUNO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LE1BQU8sMkJBN0JKLDJDQUFGLEcsaUxBQUEsZ0QiLCJmaWxlIjoiNC4yNWNiZmYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwidmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmo7XG59IDogZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbn07XG5cblxuXG5cblxuXG5cblxuXG5cblxudmFyIGNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cbnZhciBjcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTtcblxuXG5cblxuXG52YXIgZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn07XG5cbnZhciBOT1RISU5HID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbChcImltbWVyLW5vdGhpbmdcIikgOiBkZWZpbmVQcm9wZXJ0eSh7fSwgXCJpbW1lci1ub3RoaW5nXCIsIHRydWUpO1xuXG52YXIgRFJBRlRfU1RBVEUgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gU3ltYm9sKFwiaW1tZXItc3RhdGVcIikgOiBcIl9fJGltbWVyX3N0YXRlXCI7XG5cbmZ1bmN0aW9uIGlzRHJhZnQodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZSAmJiAhIXZhbHVlW0RSQUZUX1NUQVRFXTtcbn1cblxuZnVuY3Rpb24gaXNEcmFmdGFibGUodmFsdWUpIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih2YWx1ZSkpICE9PSBcIm9iamVjdFwiKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdHJ1ZTtcbiAgICB2YXIgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICAgIHJldHVybiBwcm90byA9PT0gbnVsbCB8fCBwcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZTtcbn1cblxuZnVuY3Rpb24gb3JpZ2luYWwodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgJiYgdmFsdWVbRFJBRlRfU1RBVEVdKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZVtEUkFGVF9TVEFURV0uYmFzZTtcbiAgICB9XG4gICAgLy8gb3RoZXJ3aXNlIHJldHVybiB1bmRlZmluZWRcbn1cblxudmFyIGFzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgdmFsdWUpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgaWYgKGhhcyh2YWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59O1xuXG5mdW5jdGlvbiBzaGFsbG93Q29weSh2YWx1ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLnNsaWNlKCk7XG4gICAgdmFyIHRhcmdldCA9IHZhbHVlLl9fcHJvdG9fXyA9PT0gdW5kZWZpbmVkID8gT2JqZWN0LmNyZWF0ZShudWxsKSA6IHt9O1xuICAgIHJldHVybiBhc3NpZ24odGFyZ2V0LCB2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGVhY2godmFsdWUsIGNiKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNiKGksIHZhbHVlW2ldLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIGNiKGtleSwgdmFsdWVba2V5XSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYXModGhpbmcsIHByb3ApIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaW5nLCBwcm9wKTtcbn1cblxuZnVuY3Rpb24gaXMoeCwgeSkge1xuICAgIC8vIEZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9mYmpzL2Jsb2IvYzY5OTA0YTUxMWI5MDAyNjY5MzUxNjgyMjMwNjNkZDg3NzJkZmM0MC9wYWNrYWdlcy9mYmpzL3NyYy9jb3JlL3NoYWxsb3dFcXVhbC5qc1xuICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAgIHJldHVybiB4ICE9PSAwIHx8IDEgLyB4ID09PSAxIC8geTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geCAhPT0geCAmJiB5ICE9PSB5O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVQYXRjaGVzKHN0YXRlLCBiYXNlUGF0aCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpIHtcbiAgICBBcnJheS5pc0FycmF5KHN0YXRlLmJhc2UpID8gZ2VuZXJhdGVBcnJheVBhdGNoZXMoc3RhdGUsIGJhc2VQYXRoLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcykgOiBnZW5lcmF0ZU9iamVjdFBhdGNoZXMoc3RhdGUsIGJhc2VQYXRoLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcyk7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQXJyYXlQYXRjaGVzKHN0YXRlLCBiYXNlUGF0aCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpIHtcbiAgICB2YXIgYmFzZSA9IHN0YXRlLmJhc2UsXG4gICAgICAgIGNvcHkgPSBzdGF0ZS5jb3B5LFxuICAgICAgICBhc3NpZ25lZCA9IHN0YXRlLmFzc2lnbmVkO1xuXG4gICAgdmFyIG1pbkxlbmd0aCA9IE1hdGgubWluKGJhc2UubGVuZ3RoLCBjb3B5Lmxlbmd0aCk7XG5cbiAgICAvLyBMb29rIGZvciByZXBsYWNlZCBpbmRpY2VzLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWluTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFzc2lnbmVkW2ldICYmIGJhc2VbaV0gIT09IGNvcHlbaV0pIHtcbiAgICAgICAgICAgIHZhciBwYXRoID0gYmFzZVBhdGguY29uY2F0KGkpO1xuICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHsgb3A6IFwicmVwbGFjZVwiLCBwYXRoOiBwYXRoLCB2YWx1ZTogY29weVtpXSB9KTtcbiAgICAgICAgICAgIGludmVyc2VQYXRjaGVzLnB1c2goeyBvcDogXCJyZXBsYWNlXCIsIHBhdGg6IHBhdGgsIHZhbHVlOiBiYXNlW2ldIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGlkIHRoZSBhcnJheSBleHBhbmQ/XG4gICAgaWYgKG1pbkxlbmd0aCA8IGNvcHkubGVuZ3RoKSB7XG4gICAgICAgIGZvciAodmFyIF9pID0gbWluTGVuZ3RoOyBfaSA8IGNvcHkubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IGJhc2VQYXRoLmNvbmNhdChfaSksXG4gICAgICAgICAgICAgICAgdmFsdWU6IGNvcHlbX2ldXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpbnZlcnNlUGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgIHBhdGg6IGJhc2VQYXRoLmNvbmNhdChcImxlbmd0aFwiKSxcbiAgICAgICAgICAgIHZhbHVlOiBiYXNlLmxlbmd0aFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAuLi5vciBkaWQgaXQgc2hyaW5rP1xuICAgIGVsc2UgaWYgKG1pbkxlbmd0aCA8IGJhc2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBiYXNlUGF0aC5jb25jYXQoXCJsZW5ndGhcIiksXG4gICAgICAgICAgICAgICAgdmFsdWU6IGNvcHkubGVuZ3RoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pMiA9IG1pbkxlbmd0aDsgX2kyIDwgYmFzZS5sZW5ndGg7IF9pMisrKSB7XG4gICAgICAgICAgICAgICAgaW52ZXJzZVBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBiYXNlUGF0aC5jb25jYXQoX2kyKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJhc2VbX2kyXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlT2JqZWN0UGF0Y2hlcyhzdGF0ZSwgYmFzZVBhdGgsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKSB7XG4gICAgdmFyIGJhc2UgPSBzdGF0ZS5iYXNlLFxuICAgICAgICBjb3B5ID0gc3RhdGUuY29weTtcblxuICAgIGVhY2goc3RhdGUuYXNzaWduZWQsIGZ1bmN0aW9uIChrZXksIGFzc2lnbmVkVmFsdWUpIHtcbiAgICAgICAgdmFyIG9yaWdWYWx1ZSA9IGJhc2Vba2V5XTtcbiAgICAgICAgdmFyIHZhbHVlID0gY29weVtrZXldO1xuICAgICAgICB2YXIgb3AgPSAhYXNzaWduZWRWYWx1ZSA/IFwicmVtb3ZlXCIgOiBrZXkgaW4gYmFzZSA/IFwicmVwbGFjZVwiIDogXCJhZGRcIjtcbiAgICAgICAgaWYgKG9yaWdWYWx1ZSA9PT0gYmFzZSAmJiBvcCA9PT0gXCJyZXBsYWNlXCIpIHJldHVybjtcbiAgICAgICAgdmFyIHBhdGggPSBiYXNlUGF0aC5jb25jYXQoa2V5KTtcbiAgICAgICAgcGF0Y2hlcy5wdXNoKG9wID09PSBcInJlbW92ZVwiID8geyBvcDogb3AsIHBhdGg6IHBhdGggfSA6IHsgb3A6IG9wLCBwYXRoOiBwYXRoLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgIGludmVyc2VQYXRjaGVzLnB1c2gob3AgPT09IFwiYWRkXCIgPyB7IG9wOiBcInJlbW92ZVwiLCBwYXRoOiBwYXRoIH0gOiBvcCA9PT0gXCJyZW1vdmVcIiA/IHsgb3A6IFwiYWRkXCIsIHBhdGg6IHBhdGgsIHZhbHVlOiBvcmlnVmFsdWUgfSA6IHsgb3A6IFwicmVwbGFjZVwiLCBwYXRoOiBwYXRoLCB2YWx1ZTogb3JpZ1ZhbHVlIH0pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBhcHBseVBhdGNoZXMoZHJhZnQsIHBhdGNoZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHBhdGNoID0gcGF0Y2hlc1tpXTtcbiAgICAgICAgdmFyIHBhdGggPSBwYXRjaC5wYXRoO1xuXG4gICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCAmJiBwYXRjaC5vcCA9PT0gXCJyZXBsYWNlXCIpIHtcbiAgICAgICAgICAgIGRyYWZ0ID0gcGF0Y2gudmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYmFzZSA9IGRyYWZ0O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgcGF0aC5sZW5ndGggLSAxOyBfaTMrKykge1xuICAgICAgICAgICAgICAgIGJhc2UgPSBiYXNlW3BhdGhbX2kzXV07XG4gICAgICAgICAgICAgICAgaWYgKCFiYXNlIHx8ICh0eXBlb2YgYmFzZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGJhc2UpKSAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGFwcGx5IHBhdGNoLCBwYXRoIGRvZXNuJ3QgcmVzb2x2ZTogXCIgKyBwYXRoLmpvaW4oXCIvXCIpKTsgLy8gcHJldHRpZXItaWdub3JlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIga2V5ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgc3dpdGNoIChwYXRjaC5vcCkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyZXBsYWNlXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFkZFwiOlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBhZGQgc3VwcG9ydCBpcyBub3QgZXh0ZW5zaXZlLCBpdCBkb2VzIG5vdCBzdXBwb3J0IGluc2VydGlvbiBvciBgLWAgYXRtIVxuICAgICAgICAgICAgICAgICAgICBiYXNlW2tleV0gPSBwYXRjaC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInJlbW92ZVwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShiYXNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gYmFzZS5sZW5ndGggLSAxKSB0aHJvdyBuZXcgRXJyb3IoXCJPbmx5IHRoZSBsYXN0IGluZGV4IG9mIGFuIGFycmF5IGNhbiBiZSByZW1vdmVkLCBpbmRleDogXCIgKyBrZXkgKyBcIiwgbGVuZ3RoOiBcIiArIGJhc2UubGVuZ3RoKTsgLy8gcHJldHRpZXItaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlLmxlbmd0aCAtPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGJhc2Vba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBwYXRjaCBvcGVyYXRpb246IFwiICsgcGF0Y2gub3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkcmFmdDtcbn1cblxuLy8gQHRzLWNoZWNrXG5cbnZhciBkZXNjcmlwdG9ycyA9IHt9O1xuXG4vLyBGb3IgbmVzdGVkIHByb2R1Y2UgY2FsbHM6XG52YXIgc2NvcGVzID0gW107XG52YXIgY3VycmVudFNjb3BlID0gZnVuY3Rpb24gY3VycmVudFNjb3BlKCkge1xuICAgIHJldHVybiBzY29wZXNbc2NvcGVzLmxlbmd0aCAtIDFdO1xufTtcblxuZnVuY3Rpb24gd2lsbEZpbmFsaXplKHJlc3VsdCwgYmFzZURyYWZ0LCBuZWVkUGF0Y2hlcykge1xuICAgIHZhciBzY29wZSA9IGN1cnJlbnRTY29wZSgpO1xuICAgIHNjb3BlLmZvckVhY2goZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5maW5hbGl6aW5nID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQgfHwgcmVzdWx0ID09PSBiYXNlRHJhZnQpIHtcbiAgICAgICAgaWYgKG5lZWRQYXRjaGVzKSBtYXJrQ2hhbmdlc1JlY3Vyc2l2ZWx5KGJhc2VEcmFmdCk7XG4gICAgICAgIC8vIFRoaXMgaXMgZmFzdGVyIHdoZW4gd2UgZG9uJ3QgY2FyZSBhYm91dCB3aGljaCBhdHRyaWJ1dGVzIGNoYW5nZWQuXG4gICAgICAgIG1hcmtDaGFuZ2VzU3dlZXAoc2NvcGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRHJhZnQoYmFzZSwgcGFyZW50KSB7XG4gICAgdmFyIGRyYWZ0ID0gdm9pZCAwO1xuICAgIGlmIChpc0RyYWZ0KGJhc2UpKSB7XG4gICAgICAgIHZhciBfc3RhdGUgPSBiYXNlW0RSQUZUX1NUQVRFXTtcbiAgICAgICAgLy8gQXZvaWQgY3JlYXRpbmcgbmV3IGRyYWZ0cyB3aGVuIGNvcHlpbmcuXG4gICAgICAgIF9zdGF0ZS5maW5hbGl6aW5nID0gdHJ1ZTtcbiAgICAgICAgZHJhZnQgPSBzaGFsbG93Q29weShfc3RhdGUuZHJhZnQpO1xuICAgICAgICBfc3RhdGUuZmluYWxpemluZyA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRyYWZ0ID0gc2hhbGxvd0NvcHkoYmFzZSk7XG4gICAgfVxuICAgIGVhY2goYmFzZSwgZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRyYWZ0LCBcIlwiICsgcHJvcCwgY3JlYXRlUHJvcGVydHlQcm94eShcIlwiICsgcHJvcCkpO1xuICAgIH0pO1xuXG4gICAgLy8gU2VlIFwicHJveHkuanNcIiBmb3IgcHJvcGVydHkgZG9jdW1lbnRhdGlvbi5cbiAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIHNjb3BlOiBwYXJlbnQgPyBwYXJlbnQuc2NvcGUgOiBjdXJyZW50U2NvcGUoKSxcbiAgICAgICAgbW9kaWZpZWQ6IGZhbHNlLFxuICAgICAgICBmaW5hbGl6aW5nOiBmYWxzZSwgLy8gZXM1IG9ubHlcbiAgICAgICAgZmluYWxpemVkOiBmYWxzZSxcbiAgICAgICAgYXNzaWduZWQ6IHt9LFxuICAgICAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICAgICAgYmFzZTogYmFzZSxcbiAgICAgICAgZHJhZnQ6IGRyYWZ0LFxuICAgICAgICBjb3B5OiBudWxsLFxuICAgICAgICByZXZva2U6IHJldm9rZSxcbiAgICAgICAgcmV2b2tlZDogZmFsc2UgLy8gZXM1IG9ubHlcbiAgICB9O1xuXG4gICAgY3JlYXRlSGlkZGVuUHJvcGVydHkoZHJhZnQsIERSQUZUX1NUQVRFLCBzdGF0ZSk7XG4gICAgc3RhdGUuc2NvcGUucHVzaChzdGF0ZSk7XG4gICAgcmV0dXJuIGRyYWZ0O1xufVxuXG5mdW5jdGlvbiByZXZva2UoKSB7XG4gICAgdGhpcy5yZXZva2VkID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gc291cmNlKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLmNvcHkgfHwgc3RhdGUuYmFzZTtcbn1cblxuZnVuY3Rpb24gX2dldChzdGF0ZSwgcHJvcCkge1xuICAgIGFzc2VydFVucmV2b2tlZChzdGF0ZSk7XG4gICAgdmFyIHZhbHVlID0gc291cmNlKHN0YXRlKVtwcm9wXTtcbiAgICAvLyBEcmFmdHMgYXJlIG9ubHkgY3JlYXRlZCBmb3IgcHJveHlhYmxlIHZhbHVlcyB0aGF0IGV4aXN0IGluIHRoZSBiYXNlIHN0YXRlLlxuICAgIGlmICghc3RhdGUuZmluYWxpemluZyAmJiB2YWx1ZSA9PT0gc3RhdGUuYmFzZVtwcm9wXSAmJiBpc0RyYWZ0YWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgcHJlcGFyZUNvcHkoc3RhdGUpO1xuICAgICAgICByZXR1cm4gc3RhdGUuY29weVtwcm9wXSA9IGNyZWF0ZURyYWZ0KHZhbHVlLCBzdGF0ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gX3NldChzdGF0ZSwgcHJvcCwgdmFsdWUpIHtcbiAgICBhc3NlcnRVbnJldm9rZWQoc3RhdGUpO1xuICAgIHN0YXRlLmFzc2lnbmVkW3Byb3BdID0gdHJ1ZTtcbiAgICBpZiAoIXN0YXRlLm1vZGlmaWVkKSB7XG4gICAgICAgIGlmIChpcyhzb3VyY2Uoc3RhdGUpW3Byb3BdLCB2YWx1ZSkpIHJldHVybjtcbiAgICAgICAgbWFya0NoYW5nZWQoc3RhdGUpO1xuICAgICAgICBwcmVwYXJlQ29weShzdGF0ZSk7XG4gICAgfVxuICAgIHN0YXRlLmNvcHlbcHJvcF0gPSB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gbWFya0NoYW5nZWQoc3RhdGUpIHtcbiAgICBpZiAoIXN0YXRlLm1vZGlmaWVkKSB7XG4gICAgICAgIHN0YXRlLm1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHN0YXRlLnBhcmVudCkgbWFya0NoYW5nZWQoc3RhdGUucGFyZW50KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVDb3B5KHN0YXRlKSB7XG4gICAgaWYgKCFzdGF0ZS5jb3B5KSBzdGF0ZS5jb3B5ID0gc2hhbGxvd0NvcHkoc3RhdGUuYmFzZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb3BlcnR5UHJveHkocHJvcCkge1xuICAgIHJldHVybiBkZXNjcmlwdG9yc1twcm9wXSB8fCAoZGVzY3JpcHRvcnNbcHJvcF0gPSB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2dldCh0aGlzW0RSQUZUX1NUQVRFXSwgcHJvcCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHZhbHVlKSB7XG4gICAgICAgICAgICBfc2V0KHRoaXNbRFJBRlRfU1RBVEVdLCBwcm9wLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYXNzZXJ0VW5yZXZva2VkKHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlLnJldm9rZWQgPT09IHRydWUpIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgYSBwcm94eSB0aGF0IGhhcyBiZWVuIHJldm9rZWQuIERpZCB5b3UgcGFzcyBhbiBvYmplY3QgZnJvbSBpbnNpZGUgYW4gaW1tZXIgZnVuY3Rpb24gdG8gYW4gYXN5bmMgcHJvY2Vzcz8gXCIgKyBKU09OLnN0cmluZ2lmeShzdGF0ZS5jb3B5IHx8IHN0YXRlLmJhc2UpKTtcbn1cblxuLy8gVGhpcyBsb29rcyBleHBlbnNpdmUsIGJ1dCBvbmx5IHByb3hpZXMgYXJlIHZpc2l0ZWQsIGFuZCBvbmx5IG9iamVjdHMgd2l0aG91dCBrbm93biBjaGFuZ2VzIGFyZSBzY2FubmVkLlxuZnVuY3Rpb24gbWFya0NoYW5nZXNTd2VlcChzY29wZSkge1xuICAgIC8vIFRoZSBuYXR1cmFsIG9yZGVyIG9mIGRyYWZ0cyBpbiB0aGUgYHNjb3BlYCBhcnJheSBpcyBiYXNlZCBvbiB3aGVuIHRoZXlcbiAgICAvLyB3ZXJlIGFjY2Vzc2VkLiBCeSBwcm9jZXNzaW5nIGRyYWZ0cyBpbiByZXZlcnNlIG5hdHVyYWwgb3JkZXIsIHdlIGhhdmUgYVxuICAgIC8vIGJldHRlciBjaGFuY2Ugb2YgcHJvY2Vzc2luZyBsZWFmIG5vZGVzIGZpcnN0LiBXaGVuIGEgbGVhZiBub2RlIGlzIGtub3duIHRvXG4gICAgLy8gaGF2ZSBjaGFuZ2VkLCB3ZSBjYW4gYXZvaWQgYW55IHRyYXZlcnNhbCBvZiBpdHMgYW5jZXN0b3Igbm9kZXMuXG4gICAgZm9yICh2YXIgaSA9IHNjb3BlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHNjb3BlW2ldO1xuICAgICAgICBpZiAoc3RhdGUubW9kaWZpZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzdGF0ZS5iYXNlKSkge1xuICAgICAgICAgICAgICAgIGlmIChoYXNBcnJheUNoYW5nZXMoc3RhdGUpKSBtYXJrQ2hhbmdlZChzdGF0ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhc09iamVjdENoYW5nZXMoc3RhdGUpKSBtYXJrQ2hhbmdlZChzdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIG1hcmtDaGFuZ2VzUmVjdXJzaXZlbHkob2JqZWN0KSB7XG4gICAgaWYgKCFvYmplY3QgfHwgKHR5cGVvZiBvYmplY3QgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihvYmplY3QpKSAhPT0gXCJvYmplY3RcIikgcmV0dXJuO1xuICAgIHZhciBzdGF0ZSA9IG9iamVjdFtEUkFGVF9TVEFURV07XG4gICAgaWYgKCFzdGF0ZSkgcmV0dXJuO1xuICAgIHZhciBiYXNlID0gc3RhdGUuYmFzZSxcbiAgICAgICAgZHJhZnQgPSBzdGF0ZS5kcmFmdCxcbiAgICAgICAgYXNzaWduZWQgPSBzdGF0ZS5hc3NpZ25lZDtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShvYmplY3QpKSB7XG4gICAgICAgIC8vIExvb2sgZm9yIGFkZGVkIGtleXMuXG4gICAgICAgIE9iamVjdC5rZXlzKGRyYWZ0KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIC8vIFRoZSBgdW5kZWZpbmVkYCBjaGVjayBpcyBhIGZhc3QgcGF0aCBmb3IgcHJlLWV4aXN0aW5nIGtleXMuXG4gICAgICAgICAgICBpZiAoYmFzZVtrZXldID09PSB1bmRlZmluZWQgJiYgIWhhcyhiYXNlLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgYXNzaWduZWRba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgbWFya0NoYW5nZWQoc3RhdGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghYXNzaWduZWRba2V5XSkge1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgdW50b3VjaGVkIHByb3BlcnRpZXMgdHJpZ2dlciByZWN1cnNpb24uXG4gICAgICAgICAgICAgICAgbWFya0NoYW5nZXNSZWN1cnNpdmVseShkcmFmdFtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIExvb2sgZm9yIHJlbW92ZWQga2V5cy5cbiAgICAgICAgT2JqZWN0LmtleXMoYmFzZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAvLyBUaGUgYHVuZGVmaW5lZGAgY2hlY2sgaXMgYSBmYXN0IHBhdGggZm9yIHByZS1leGlzdGluZyBrZXlzLlxuICAgICAgICAgICAgaWYgKGRyYWZ0W2tleV0gPT09IHVuZGVmaW5lZCAmJiAhaGFzKGRyYWZ0LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgYXNzaWduZWRba2V5XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG1hcmtDaGFuZ2VkKHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChoYXNBcnJheUNoYW5nZXMoc3RhdGUpKSB7XG4gICAgICAgIG1hcmtDaGFuZ2VkKHN0YXRlKTtcbiAgICAgICAgYXNzaWduZWQubGVuZ3RoID0gdHJ1ZTtcbiAgICAgICAgaWYgKGRyYWZ0Lmxlbmd0aCA8IGJhc2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gZHJhZnQubGVuZ3RoOyBpIDwgYmFzZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGFzc2lnbmVkW2ldID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IGJhc2UubGVuZ3RoOyBfaSA8IGRyYWZ0Lmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFzc2lnbmVkW19pXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgZHJhZnQubGVuZ3RoOyBfaTIrKykge1xuICAgICAgICAgICAgLy8gT25seSB1bnRvdWNoZWQgaW5kaWNlcyB0cmlnZ2VyIHJlY3Vyc2lvbi5cbiAgICAgICAgICAgIGlmIChhc3NpZ25lZFtfaTJdID09PSB1bmRlZmluZWQpIG1hcmtDaGFuZ2VzUmVjdXJzaXZlbHkoZHJhZnRbX2kyXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhhc09iamVjdENoYW5nZXMoc3RhdGUpIHtcbiAgICB2YXIgYmFzZSA9IHN0YXRlLmJhc2UsXG4gICAgICAgIGRyYWZ0ID0gc3RhdGUuZHJhZnQ7XG5cbiAgICAvLyBTZWFyY2ggZm9yIGFkZGVkIGtleXMuIFN0YXJ0IGF0IHRoZSBiYWNrLCBiZWNhdXNlIG5vbi1udW1lcmljIGtleXNcbiAgICAvLyBhcmUgb3JkZXJlZCBieSB0aW1lIG9mIGRlZmluaXRpb24gb24gdGhlIG9iamVjdC5cblxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZHJhZnQpO1xuICAgIGZvciAodmFyIGkgPSBrZXlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIC8vIFRoZSBgdW5kZWZpbmVkYCBjaGVjayBpcyBhIGZhc3QgcGF0aCBmb3IgcHJlLWV4aXN0aW5nIGtleXMuXG4gICAgICAgIGlmIChiYXNlW2tleXNbaV1dID09PSB1bmRlZmluZWQgJiYgIWhhcyhiYXNlLCBrZXlzW2ldKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTaW5jZSBubyBrZXlzIGhhdmUgYmVlbiBhZGRlZCwgd2UgY2FuIGNvbXBhcmUgbGVuZ3RocyB0byBrbm93IGlmIGFuXG4gICAgLy8gb2JqZWN0IGhhcyBiZWVuIGRlbGV0ZWQuXG4gICAgcmV0dXJuIGtleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiYXNlKS5sZW5ndGg7XG59XG5cbmZ1bmN0aW9uIGhhc0FycmF5Q2hhbmdlcyhzdGF0ZSkge1xuICAgIHZhciBkcmFmdCA9IHN0YXRlLmRyYWZ0O1xuXG4gICAgaWYgKGRyYWZ0Lmxlbmd0aCAhPT0gc3RhdGUuYmFzZS5sZW5ndGgpIHJldHVybiB0cnVlO1xuICAgIC8vIFNlZSAjMTE2XG4gICAgLy8gSWYgd2UgZmlyc3Qgc2hvcnRlbiB0aGUgbGVuZ3RoLCBvdXIgYXJyYXkgaW50ZXJjZXB0b3JzIHdpbGwgYmUgcmVtb3ZlZC5cbiAgICAvLyBJZiBhZnRlciB0aGF0IG5ldyBpdGVtcyBhcmUgYWRkZWQsIHJlc3VsdCBpbiB0aGUgc2FtZSBvcmlnaW5hbCBsZW5ndGgsXG4gICAgLy8gdGhvc2UgbGFzdCBpdGVtcyB3aWxsIGhhdmUgbm8gaW50ZXJjZXB0aW5nIHByb3BlcnR5LlxuICAgIC8vIFNvIGlmIHRoZXJlIGlzIG5vIG93biBkZXNjcmlwdG9yIG9uIHRoZSBsYXN0IHBvc2l0aW9uLCB3ZSBrbm93IHRoYXQgaXRlbXMgd2VyZSByZW1vdmVkIGFuZCBhZGRlZFxuICAgIC8vIE4uQi46IHNwbGljZSwgdW5zaGlmdCwgZXRjIG9ubHkgc2hpZnQgdmFsdWVzIGFyb3VuZCwgYnV0IG5vdCBwcm9wIGRlc2NyaXB0b3JzLCBzbyB3ZSBvbmx5IGhhdmUgdG8gY2hlY2tcbiAgICAvLyB0aGUgbGFzdCBvbmVcbiAgICB2YXIgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZHJhZnQsIGRyYWZ0Lmxlbmd0aCAtIDEpO1xuICAgIC8vIGRlc2NyaXB0b3IgY2FuIGJlIG51bGwsIGJ1dCBvbmx5IGZvciBuZXdseSBjcmVhdGVkIHNwYXJzZSBhcnJheXMsIGVnLiBuZXcgQXJyYXkoMTApXG4gICAgaWYgKGRlc2NyaXB0b3IgJiYgIWRlc2NyaXB0b3IuZ2V0KSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBGb3IgYWxsIG90aGVyIGNhc2VzLCB3ZSBkb24ndCBoYXZlIHRvIGNvbXBhcmUsIGFzIHRoZXkgd291bGQgaGF2ZSBiZWVuIHBpY2tlZCB1cCBieSB0aGUgaW5kZXggc2V0dGVyc1xuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSGlkZGVuUHJvcGVydHkodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbn1cblxuXG5cbnZhciBsZWdhY3lQcm94eSA9IE9iamVjdC5mcmVlemUoe1xuXHRzY29wZXM6IHNjb3Blcyxcblx0Y3VycmVudFNjb3BlOiBjdXJyZW50U2NvcGUsXG5cdHdpbGxGaW5hbGl6ZTogd2lsbEZpbmFsaXplLFxuXHRjcmVhdGVEcmFmdDogY3JlYXRlRHJhZnRcbn0pO1xuXG4vLyBAdHMtY2hlY2tcblxuLy8gRm9yIG5lc3RlZCBwcm9kdWNlIGNhbGxzOlxudmFyIHNjb3BlcyQxID0gW107XG52YXIgY3VycmVudFNjb3BlJDEgPSBmdW5jdGlvbiBjdXJyZW50U2NvcGUoKSB7XG4gICAgcmV0dXJuIHNjb3BlcyQxW3Njb3BlcyQxLmxlbmd0aCAtIDFdO1xufTtcblxuLy8gRG8gbm90aGluZyBiZWZvcmUgYmVpbmcgZmluYWxpemVkLlxuZnVuY3Rpb24gd2lsbEZpbmFsaXplJDEoKSB7fVxuXG5mdW5jdGlvbiBjcmVhdGVEcmFmdCQxKGJhc2UsIHBhcmVudCkge1xuICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgLy8gVHJhY2sgd2hpY2ggcHJvZHVjZSBjYWxsIHRoaXMgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICAgICAgICBzY29wZTogcGFyZW50ID8gcGFyZW50LnNjb3BlIDogY3VycmVudFNjb3BlJDEoKSxcbiAgICAgICAgLy8gVHJ1ZSBmb3IgYm90aCBzaGFsbG93IGFuZCBkZWVwIGNoYW5nZXMuXG4gICAgICAgIG1vZGlmaWVkOiBmYWxzZSxcbiAgICAgICAgLy8gVXNlZCBkdXJpbmcgZmluYWxpemF0aW9uLlxuICAgICAgICBmaW5hbGl6ZWQ6IGZhbHNlLFxuICAgICAgICAvLyBUcmFjayB3aGljaCBwcm9wZXJ0aWVzIGhhdmUgYmVlbiBhc3NpZ25lZCAodHJ1ZSkgb3IgZGVsZXRlZCAoZmFsc2UpLlxuICAgICAgICBhc3NpZ25lZDoge30sXG4gICAgICAgIC8vIFRoZSBwYXJlbnQgZHJhZnQgc3RhdGUuXG4gICAgICAgIHBhcmVudDogcGFyZW50LFxuICAgICAgICAvLyBUaGUgYmFzZSBzdGF0ZS5cbiAgICAgICAgYmFzZTogYmFzZSxcbiAgICAgICAgLy8gVGhlIGJhc2UgcHJveHkuXG4gICAgICAgIGRyYWZ0OiBudWxsLFxuICAgICAgICAvLyBBbnkgcHJvcGVydHkgcHJveGllcy5cbiAgICAgICAgZHJhZnRzOiB7fSxcbiAgICAgICAgLy8gVGhlIGJhc2UgY29weSB3aXRoIGFueSB1cGRhdGVkIHZhbHVlcy5cbiAgICAgICAgY29weTogbnVsbCxcbiAgICAgICAgLy8gQ2FsbGVkIGJ5IHRoZSBgcHJvZHVjZWAgZnVuY3Rpb24uXG4gICAgICAgIHJldm9rZTogbnVsbFxuICAgIH07XG5cbiAgICB2YXIgX3JlZiA9IEFycmF5LmlzQXJyYXkoYmFzZSkgPyBQcm94eS5yZXZvY2FibGUoW3N0YXRlXSwgYXJyYXlUcmFwcykgOiBQcm94eS5yZXZvY2FibGUoc3RhdGUsIG9iamVjdFRyYXBzKSxcbiAgICAgICAgcmV2b2tlID0gX3JlZi5yZXZva2UsXG4gICAgICAgIHByb3h5ID0gX3JlZi5wcm94eTtcblxuICAgIHN0YXRlLmRyYWZ0ID0gcHJveHk7XG4gICAgc3RhdGUucmV2b2tlID0gcmV2b2tlO1xuXG4gICAgc3RhdGUuc2NvcGUucHVzaChzdGF0ZSk7XG4gICAgcmV0dXJuIHByb3h5O1xufVxuXG52YXIgb2JqZWN0VHJhcHMgPSB7XG4gICAgZ2V0OiBnZXQkMSxcbiAgICBoYXM6IGZ1bmN0aW9uIGhhcyQkMSh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgcmV0dXJuIHByb3AgaW4gc291cmNlJDEodGFyZ2V0KTtcbiAgICB9LFxuICAgIG93bktleXM6IGZ1bmN0aW9uIG93bktleXModGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBSZWZsZWN0Lm93bktleXMoc291cmNlJDEodGFyZ2V0KSk7XG4gICAgfSxcblxuICAgIHNldDogc2V0JDEsXG4gICAgZGVsZXRlUHJvcGVydHk6IGRlbGV0ZVByb3BlcnR5LFxuICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFxuICAgIGRlZmluZVByb3BlcnR5OiBkZWZpbmVQcm9wZXJ0eSQxLFxuICAgIHNldFByb3RvdHlwZU9mOiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW1tZXIgZG9lcyBub3Qgc3VwcG9ydCBgc2V0UHJvdG90eXBlT2YoKWAuXCIpO1xuICAgIH1cbn07XG5cbnZhciBhcnJheVRyYXBzID0ge307XG5lYWNoKG9iamVjdFRyYXBzLCBmdW5jdGlvbiAoa2V5LCBmbikge1xuICAgIGFycmF5VHJhcHNba2V5XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXJndW1lbnRzWzBdID0gYXJndW1lbnRzWzBdWzBdO1xuICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xufSk7XG5hcnJheVRyYXBzLmRlbGV0ZVByb3BlcnR5ID0gZnVuY3Rpb24gKHN0YXRlLCBwcm9wKSB7XG4gICAgaWYgKGlzTmFOKHBhcnNlSW50KHByb3ApKSkgdGhyb3cgbmV3IEVycm9yKFwiSW1tZXIgZG9lcyBub3Qgc3VwcG9ydCBkZWxldGluZyBwcm9wZXJ0aWVzIGZyb20gYXJyYXlzOiBcIiArIHByb3ApO1xuICAgIHJldHVybiBvYmplY3RUcmFwcy5kZWxldGVQcm9wZXJ0eS5jYWxsKHRoaXMsIHN0YXRlWzBdLCBwcm9wKTtcbn07XG5hcnJheVRyYXBzLnNldCA9IGZ1bmN0aW9uIChzdGF0ZSwgcHJvcCwgdmFsdWUpIHtcbiAgICBpZiAocHJvcCAhPT0gXCJsZW5ndGhcIiAmJiBpc05hTihwYXJzZUludChwcm9wKSkpIHRocm93IG5ldyBFcnJvcihcIkltbWVyIGRvZXMgbm90IHN1cHBvcnQgc2V0dGluZyBub24tbnVtZXJpYyBwcm9wZXJ0aWVzIG9uIGFycmF5czogXCIgKyBwcm9wKTtcbiAgICByZXR1cm4gb2JqZWN0VHJhcHMuc2V0LmNhbGwodGhpcywgc3RhdGVbMF0sIHByb3AsIHZhbHVlKTtcbn07XG5cbmZ1bmN0aW9uIHNvdXJjZSQxKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLmNvcHkgfHwgc3RhdGUuYmFzZTtcbn1cblxuZnVuY3Rpb24gZ2V0JDEoc3RhdGUsIHByb3ApIHtcbiAgICBpZiAocHJvcCA9PT0gRFJBRlRfU1RBVEUpIHJldHVybiBzdGF0ZTtcbiAgICB2YXIgZHJhZnRzID0gc3RhdGUuZHJhZnRzO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIGRyYWZ0IGluIHVubW9kaWZpZWQgc3RhdGUuXG5cbiAgICBpZiAoIXN0YXRlLm1vZGlmaWVkICYmIGhhcyhkcmFmdHMsIHByb3ApKSB7XG4gICAgICAgIHJldHVybiBkcmFmdHNbcHJvcF07XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gc291cmNlJDEoc3RhdGUpW3Byb3BdO1xuICAgIGlmIChzdGF0ZS5maW5hbGl6ZWQgfHwgIWlzRHJhZnRhYmxlKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIGRyYWZ0IGluIG1vZGlmaWVkIHN0YXRlLlxuICAgIGlmIChzdGF0ZS5tb2RpZmllZCkge1xuICAgICAgICAvLyBBc3NpZ25lZCB2YWx1ZXMgYXJlIG5ldmVyIGRyYWZ0ZWQuIFRoaXMgY2F0Y2hlcyBhbnkgZHJhZnRzIHdlIGNyZWF0ZWQsIHRvby5cbiAgICAgICAgaWYgKHZhbHVlICE9PSBzdGF0ZS5iYXNlW3Byb3BdKSByZXR1cm4gdmFsdWU7XG4gICAgICAgIC8vIFN0b3JlIGRyYWZ0cyBvbiB0aGUgY29weSAod2hlbiBvbmUgZXhpc3RzKS5cbiAgICAgICAgZHJhZnRzID0gc3RhdGUuY29weTtcbiAgICB9XG5cbiAgICByZXR1cm4gZHJhZnRzW3Byb3BdID0gY3JlYXRlRHJhZnQkMSh2YWx1ZSwgc3RhdGUpO1xufVxuXG5mdW5jdGlvbiBzZXQkMShzdGF0ZSwgcHJvcCwgdmFsdWUpIHtcbiAgICBpZiAoIXN0YXRlLm1vZGlmaWVkKSB7XG4gICAgICAgIC8vIE9wdGltaXplIGJhc2VkIG9uIHZhbHVlJ3MgdHJ1dGhpbmVzcy4gVHJ1dGh5IHZhbHVlcyBhcmUgZ3VhcmFudGVlZCB0b1xuICAgICAgICAvLyBuZXZlciBiZSB1bmRlZmluZWQsIHNvIHdlIGNhbiBhdm9pZCB0aGUgYGluYCBvcGVyYXRvci4gTGFzdGx5LCB0cnV0aHlcbiAgICAgICAgLy8gdmFsdWVzIG1heSBiZSBkcmFmdHMsIGJ1dCBmYWxzeSB2YWx1ZXMgYXJlIG5ldmVyIGRyYWZ0cy5cbiAgICAgICAgdmFyIGlzVW5jaGFuZ2VkID0gdmFsdWUgPyBpcyhzdGF0ZS5iYXNlW3Byb3BdLCB2YWx1ZSkgfHwgdmFsdWUgPT09IHN0YXRlLmRyYWZ0c1twcm9wXSA6IGlzKHN0YXRlLmJhc2VbcHJvcF0sIHZhbHVlKSAmJiBwcm9wIGluIHN0YXRlLmJhc2U7XG4gICAgICAgIGlmIChpc1VuY2hhbmdlZCkgcmV0dXJuIHRydWU7XG4gICAgICAgIG1hcmtDaGFuZ2VkJDEoc3RhdGUpO1xuICAgIH1cbiAgICBzdGF0ZS5hc3NpZ25lZFtwcm9wXSA9IHRydWU7XG4gICAgc3RhdGUuY29weVtwcm9wXSA9IHZhbHVlO1xuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBkZWxldGVQcm9wZXJ0eShzdGF0ZSwgcHJvcCkge1xuICAgIC8vIFRoZSBgdW5kZWZpbmVkYCBjaGVjayBpcyBhIGZhc3QgcGF0aCBmb3IgcHJlLWV4aXN0aW5nIGtleXMuXG4gICAgaWYgKHN0YXRlLmJhc2VbcHJvcF0gIT09IHVuZGVmaW5lZCB8fCBwcm9wIGluIHN0YXRlLmJhc2UpIHtcbiAgICAgICAgc3RhdGUuYXNzaWduZWRbcHJvcF0gPSBmYWxzZTtcbiAgICAgICAgbWFya0NoYW5nZWQkMShzdGF0ZSk7XG4gICAgfVxuICAgIGlmIChzdGF0ZS5jb3B5KSBkZWxldGUgc3RhdGUuY29weVtwcm9wXTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHN0YXRlLCBwcm9wKSB7XG4gICAgdmFyIG93bmVyID0gc3RhdGUubW9kaWZpZWQgPyBzdGF0ZS5jb3B5IDogaGFzKHN0YXRlLmRyYWZ0cywgcHJvcCkgPyBzdGF0ZS5kcmFmdHMgOiBzdGF0ZS5iYXNlO1xuICAgIHZhciBkZXNjcmlwdG9yID0gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob3duZXIsIHByb3ApO1xuICAgIGlmIChkZXNjcmlwdG9yICYmICEoQXJyYXkuaXNBcnJheShvd25lcikgJiYgcHJvcCA9PT0gXCJsZW5ndGhcIikpIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICByZXR1cm4gZGVzY3JpcHRvcjtcbn1cblxuZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkkMSgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbW1lciBkb2VzIG5vdCBzdXBwb3J0IGRlZmluaW5nIHByb3BlcnRpZXMgb24gZHJhZnQgb2JqZWN0cy5cIik7XG59XG5cbmZ1bmN0aW9uIG1hcmtDaGFuZ2VkJDEoc3RhdGUpIHtcbiAgICBpZiAoIXN0YXRlLm1vZGlmaWVkKSB7XG4gICAgICAgIHN0YXRlLm1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgc3RhdGUuY29weSA9IGFzc2lnbihzaGFsbG93Q29weShzdGF0ZS5iYXNlKSwgc3RhdGUuZHJhZnRzKTtcbiAgICAgICAgc3RhdGUuZHJhZnRzID0gbnVsbDtcbiAgICAgICAgaWYgKHN0YXRlLnBhcmVudCkgbWFya0NoYW5nZWQkMShzdGF0ZS5wYXJlbnQpO1xuICAgIH1cbn1cblxudmFyIG1vZGVyblByb3h5ID0gT2JqZWN0LmZyZWV6ZSh7XG5cdHNjb3Blczogc2NvcGVzJDEsXG5cdGN1cnJlbnRTY29wZTogY3VycmVudFNjb3BlJDEsXG5cdHdpbGxGaW5hbGl6ZTogd2lsbEZpbmFsaXplJDEsXG5cdGNyZWF0ZURyYWZ0OiBjcmVhdGVEcmFmdCQxXG59KTtcblxuZnVuY3Rpb24gdmVyaWZ5TWluaWZpZWQoKSB7fVxuXG52YXIgY29uZmlnRGVmYXVsdHMgPSB7XG4gICAgdXNlUHJveGllczogdHlwZW9mIFByb3h5ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBSZWZsZWN0ICE9PSBcInVuZGVmaW5lZFwiLFxuICAgIGF1dG9GcmVlemU6IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiIDogdmVyaWZ5TWluaWZpZWQubmFtZSA9PT0gXCJ2ZXJpZnlNaW5pZmllZFwiLFxuICAgIG9uQXNzaWduOiBudWxsLFxuICAgIG9uRGVsZXRlOiBudWxsLFxuICAgIG9uQ29weTogbnVsbFxufTtcblxudmFyIEltbWVyID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEltbWVyKGNvbmZpZykge1xuICAgICAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBJbW1lcik7XG5cbiAgICAgICAgYXNzaWduKHRoaXMsIGNvbmZpZ0RlZmF1bHRzLCBjb25maWcpO1xuICAgICAgICB0aGlzLnNldFVzZVByb3hpZXModGhpcy51c2VQcm94aWVzKTtcbiAgICAgICAgdGhpcy5wcm9kdWNlID0gdGhpcy5wcm9kdWNlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgY3JlYXRlQ2xhc3MoSW1tZXIsIFt7XG4gICAgICAgIGtleTogXCJwcm9kdWNlXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9kdWNlKGJhc2UsIHJlY2lwZSwgcGF0Y2hMaXN0ZW5lcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgLy8gY3VycmllZCBpbnZvY2F0aW9uXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJhc2UgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgcmVjaXBlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdEJhc2UgPSByZWNpcGU7XG4gICAgICAgICAgICAgICAgcmVjaXBlID0gYmFzZTtcblxuICAgICAgICAgICAgICAgIC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZGVmYXVsdEJhc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcm9kdWNlKGJhc2UsIGZ1bmN0aW9uIChkcmFmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWNpcGU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoX3JlY2lwZSA9IHJlY2lwZSkuY2FsbC5hcHBseShfcmVjaXBlLCBbZHJhZnQsIGRyYWZ0XS5jb25jYXQoYXJncykpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlY2lwZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3IoXCJpZiBmaXJzdCBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbiwgdGhlIHNlY29uZCBhcmd1bWVudCB0byBwcm9kdWNlIHNob3VsZCBiZSBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgICAgIGlmIChwYXRjaExpc3RlbmVyICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHBhdGNoTGlzdGVuZXIgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yKFwidGhlIHRoaXJkIGFyZ3VtZW50IG9mIGEgcHJvZHVjZXIgc2hvdWxkIG5vdCBiZSBzZXQgb3IgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcbiAgICAgICAgICAgIC8vIE9ubHkgY3JlYXRlIHByb3hpZXMgZm9yIHBsYWluIG9iamVjdHMvYXJyYXlzLlxuICAgICAgICAgICAgaWYgKCFpc0RyYWZ0YWJsZShiYXNlKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlY2lwZShiYXNlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHJldHVybiBiYXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2VlICMxMDAsIGRvbid0IG5lc3QgcHJvZHVjZXJzXG4gICAgICAgICAgICBlbHNlIGlmIChpc0RyYWZ0KGJhc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlY2lwZS5jYWxsKGJhc2UsIGJhc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHJldHVybiBiYXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUaGUgZ2l2ZW4gdmFsdWUgbXVzdCBiZSBwcm94aWVkLlxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY29wZXMucHVzaChbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZURyYWZ0ID0gdGhpcy5jcmVhdGVEcmFmdChiYXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVjaXBlLmNhbGwoYmFzZURyYWZ0LCBiYXNlRHJhZnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lsbEZpbmFsaXplKHJlc3VsdCwgYmFzZURyYWZ0LCAhIXBhdGNoTGlzdGVuZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV2ZXIgZ2VuZXJhdGUgcGF0Y2hlcyB3aGVuIG5vIGxpc3RlbmVyIGV4aXN0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGF0Y2hlcyA9IHBhdGNoTGlzdGVuZXIgJiYgW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmVyc2VQYXRjaGVzID0gcGF0Y2hMaXN0ZW5lciAmJiBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmFsaXplIHRoZSBtb2RpZmllZCBkcmFmdC4uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCB8fCByZXN1bHQgPT09IGJhc2VEcmFmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmZpbmFsaXplKGJhc2VEcmFmdCwgW10sIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLi4ub3IgdXNlIGEgcmVwbGFjZW1lbnQgdmFsdWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VycyBtdXN0IG5ldmVyIG1vZGlmeSB0aGUgZHJhZnQgX2FuZF8gcmV0dXJuIHNvbWV0aGluZyBlbHNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VEcmFmdFtEUkFGVF9TVEFURV0ubW9kaWZpZWQpIHRocm93IG5ldyBFcnJvcihcIkFuIGltbWVyIHByb2R1Y2VyIHJldHVybmVkIGEgbmV3IHZhbHVlICphbmQqIG1vZGlmaWVkIGl0cyBkcmFmdC4gRWl0aGVyIHJldHVybiBhIG5ldyB2YWx1ZSAqb3IqIG1vZGlmeSB0aGUgZHJhZnQuXCIpOyAvLyBwcmV0dGllci1pZ25vcmVcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluYWxpemUgdGhlIHJlcGxhY2VtZW50IGluIGNhc2UgaXQgY29udGFpbnMgKG9yIGlzKSBhIHN1YnNldCBvZiB0aGUgZHJhZnQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNEcmFmdGFibGUocmVzdWx0KSkgcmVzdWx0ID0gdGhpcy5maW5hbGl6ZShyZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0Y2hMaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlUGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwicmVwbGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTY29wZSgpLmZvckVhY2goZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZS5yZXZva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjb3Blcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoTGlzdGVuZXIgJiYgcGF0Y2hMaXN0ZW5lcihwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgcmVzdWx0LlxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gTk9USElORyA/IHVuZGVmaW5lZCA6IHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInNldEF1dG9GcmVlemVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEF1dG9GcmVlemUodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuYXV0b0ZyZWV6ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwic2V0VXNlUHJveGllc1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VXNlUHJveGllcyh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy51c2VQcm94aWVzID0gdmFsdWU7XG4gICAgICAgICAgICBhc3NpZ24odGhpcywgdmFsdWUgPyBtb2Rlcm5Qcm94eSA6IGxlZ2FjeVByb3h5KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqIEZpbmFsaXplIGEgZHJhZnQsIHJldHVybmluZyBlaXRoZXIgdGhlIHVubW9kaWZpZWQgYmFzZSBzdGF0ZSBvciBhIG1vZGlmaWVkXG4gICAgICAgICAqIGNvcHkgb2YgdGhlIGJhc2Ugc3RhdGUuXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZmluYWxpemVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmFsaXplKGRyYWZ0LCBwYXRoLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcykge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gZHJhZnRbRFJBRlRfU1RBVEVdO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaXNGcm96ZW4oZHJhZnQpKSByZXR1cm4gZHJhZnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluYWxpemVUcmVlKGRyYWZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5ldmVyIGZpbmFsaXplIGRyYWZ0cyBvd25lZCBieSBhbiBvdXRlciBzY29wZS5cbiAgICAgICAgICAgIGlmIChzdGF0ZS5zY29wZSAhPT0gdGhpcy5jdXJyZW50U2NvcGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkcmFmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc3RhdGUubW9kaWZpZWQpIHJldHVybiBzdGF0ZS5iYXNlO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZS5maW5hbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5maW5hbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZmluYWxpemVUcmVlKHN0YXRlLmRyYWZ0LCBwYXRoLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25EZWxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbmVkID0gc3RhdGUuYXNzaWduZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBhc3NpZ25lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWduZWRbcHJvcF0gfHwgdGhpcy5vbkRlbGV0ZShzdGF0ZSwgcHJvcCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25Db3B5KSB0aGlzLm9uQ29weShzdGF0ZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBOZXN0ZWQgcHJvZHVjZXJzIG11c3QgbmV2ZXIgYXV0by1mcmVlemUgdGhlaXIgcmVzdWx0LFxuICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgaXQgbWF5IGNvbnRhaW4gZHJhZnRzIGZyb20gcGFyZW50IHByb2R1Y2Vycy5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvRnJlZXplICYmIHRoaXMuc2NvcGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKHN0YXRlLmNvcHkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChwYXRjaGVzKSBnZW5lcmF0ZVBhdGNoZXMoc3RhdGUsIHBhdGgsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5jb3B5O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICogRmluYWxpemUgYWxsIGRyYWZ0cyBpbiB0aGUgZ2l2ZW4gc3RhdGUgdHJlZS5cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJmaW5hbGl6ZVRyZWVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmFsaXplVHJlZShyb290LCBwYXRoLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcykge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHJvb3RbRFJBRlRfU1RBVEVdO1xuICAgICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgcm9vdCA9IHRoaXMudXNlUHJveGllcyA/IHN0YXRlLmNvcHkgOiBzdGF0ZS5jb3B5ID0gc2hhbGxvd0NvcHkoc3RhdGUuZHJhZnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb25Bc3NpZ24gPSB0aGlzLm9uQXNzaWduO1xuXG4gICAgICAgICAgICB2YXIgZmluYWxpemVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGZpbmFsaXplUHJvcGVydHkocHJvcCwgdmFsdWUsIHBhcmVudCkge1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgYHJvb3RgIGNhbiBiZSBhIGRyYWZ0IGluIGhlcmUuXG4gICAgICAgICAgICAgICAgdmFyIGluRHJhZnQgPSAhIXN0YXRlICYmIHBhcmVudCA9PT0gcm9vdDtcblxuICAgICAgICAgICAgICAgIGlmIChpc0RyYWZ0KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50W3Byb3BdID0gdmFsdWUgPVxuICAgICAgICAgICAgICAgICAgICAvLyBQYXRjaGVzIGFyZSBuZXZlciBnZW5lcmF0ZWQgZm9yIGFzc2lnbmVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoZXMgJiYgaW5EcmFmdCAmJiAhc3RhdGUuYXNzaWduZWRbcHJvcF0gPyBfdGhpczIuZmluYWxpemUodmFsdWUsIHBhdGguY29uY2F0KHByb3ApLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcykgOiBfdGhpczIuZmluYWxpemUodmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFVuY2hhbmdlZCBkcmFmdHMgYXJlIGlnbm9yZWQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkRyYWZ0ICYmIHZhbHVlID09PSBzdGF0ZS5iYXNlW3Byb3BdKSByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFVuY2hhbmdlZCBkcmFmdCBwcm9wZXJ0aWVzIGFyZSBpZ25vcmVkLlxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluRHJhZnQgJiYgaXModmFsdWUsIHN0YXRlLmJhc2VbcHJvcF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gU2VhcmNoIG5ldyBvYmplY3RzIGZvciB1bmZpbmFsaXplZCBkcmFmdHMuIEZyb3plbiBvYmplY3RzIHNob3VsZCBuZXZlciBjb250YWluIGRyYWZ0cy5cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNEcmFmdGFibGUodmFsdWUpICYmICFPYmplY3QuaXNGcm96ZW4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFjaCh2YWx1ZSwgZmluYWxpemVQcm9wZXJ0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5EcmFmdCAmJiBvbkFzc2lnbikge1xuICAgICAgICAgICAgICAgICAgICBvbkFzc2lnbihzdGF0ZSwgcHJvcCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGVhY2gocm9vdCwgZmluYWxpemVQcm9wZXJ0eSk7XG4gICAgICAgICAgICByZXR1cm4gcm9vdDtcbiAgICAgICAgfVxuICAgIH1dKTtcbiAgICByZXR1cm4gSW1tZXI7XG59KCk7XG5cbnZhciBpbW1lciA9IG5ldyBJbW1lcigpO1xuXG4vKipcbiAqIFRoZSBgcHJvZHVjZWAgZnVuY3Rpb24gdGFrZXMgYSB2YWx1ZSBhbmQgYSBcInJlY2lwZSBmdW5jdGlvblwiICh3aG9zZVxuICogcmV0dXJuIHZhbHVlIG9mdGVuIGRlcGVuZHMgb24gdGhlIGJhc2Ugc3RhdGUpLiBUaGUgcmVjaXBlIGZ1bmN0aW9uIGlzXG4gKiBmcmVlIHRvIG11dGF0ZSBpdHMgZmlyc3QgYXJndW1lbnQgaG93ZXZlciBpdCB3YW50cy4gQWxsIG11dGF0aW9ucyBhcmVcbiAqIG9ubHkgZXZlciBhcHBsaWVkIHRvIGEgX19jb3B5X18gb2YgdGhlIGJhc2Ugc3RhdGUuXG4gKlxuICogUGFzcyBvbmx5IGEgZnVuY3Rpb24gdG8gY3JlYXRlIGEgXCJjdXJyaWVkIHByb2R1Y2VyXCIgd2hpY2ggcmVsaWV2ZXMgeW91XG4gKiBmcm9tIHBhc3NpbmcgdGhlIHJlY2lwZSBmdW5jdGlvbiBldmVyeSB0aW1lLlxuICpcbiAqIE9ubHkgcGxhaW4gb2JqZWN0cyBhbmQgYXJyYXlzIGFyZSBtYWRlIG11dGFibGUuIEFsbCBvdGhlciBvYmplY3RzIGFyZVxuICogY29uc2lkZXJlZCB1bmNvcHlhYmxlLlxuICpcbiAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gaXMgX19ib3VuZF9fIHRvIGl0cyBgSW1tZXJgIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7YW55fSBiYXNlIC0gdGhlIGluaXRpYWwgc3RhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb2R1Y2VyIC0gZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHByb3h5IG9mIHRoZSBiYXNlIHN0YXRlIGFzIGZpcnN0IGFyZ3VtZW50IGFuZCB3aGljaCBjYW4gYmUgZnJlZWx5IG1vZGlmaWVkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwYXRjaExpc3RlbmVyIC0gb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aXRoIGFsbCB0aGUgcGF0Y2hlcyBwcm9kdWNlZCBoZXJlXG4gKiBAcmV0dXJucyB7YW55fSBhIG5ldyBzdGF0ZSwgb3IgdGhlIGluaXRpYWwgc3RhdGUgaWYgbm90aGluZyB3YXMgbW9kaWZpZWRcbiAqL1xudmFyIHByb2R1Y2UgPSBpbW1lci5wcm9kdWNlO1xuLyoqXG4gKiBQYXNzIHRydWUgdG8gYXV0b21hdGljYWxseSBmcmVlemUgYWxsIGNvcGllcyBjcmVhdGVkIGJ5IEltbWVyLlxuICpcbiAqIEJ5IGRlZmF1bHQsIGF1dG8tZnJlZXppbmcgaXMgZGlzYWJsZWQgaW4gcHJvZHVjdGlvbi5cbiAqL1xudmFyIHNldEF1dG9GcmVlemUgPSBmdW5jdGlvbiBzZXRBdXRvRnJlZXplKHZhbHVlKSB7XG4gIHJldHVybiBpbW1lci5zZXRBdXRvRnJlZXplKHZhbHVlKTtcbn07XG5cbi8qKlxuICogUGFzcyB0cnVlIHRvIHVzZSB0aGUgRVMyMDE1IGBQcm94eWAgY2xhc3Mgd2hlbiBjcmVhdGluZyBkcmFmdHMsIHdoaWNoIGlzXG4gKiBhbHdheXMgZmFzdGVyIHRoYW4gdXNpbmcgRVM1IHByb3hpZXMuXG4gKlxuICogQnkgZGVmYXVsdCwgZmVhdHVyZSBkZXRlY3Rpb24gaXMgdXNlZCwgc28gY2FsbGluZyB0aGlzIGlzIHJhcmVseSBuZWNlc3NhcnkuXG4gKi9cbnZhciBzZXRVc2VQcm94aWVzID0gZnVuY3Rpb24gc2V0VXNlUHJveGllcyh2YWx1ZSkge1xuICByZXR1cm4gaW1tZXIuc2V0VXNlUHJveGllcyh2YWx1ZSk7XG59O1xuXG4vKipcbiAqIEFwcGx5IGFuIGFycmF5IG9mIEltbWVyIHBhdGNoZXMgdG8gdGhlIGZpcnN0IGFyZ3VtZW50LlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgYSBwcm9kdWNlciwgd2hpY2ggbWVhbnMgY29weS1vbi13cml0ZSBpcyBpbiBlZmZlY3QuXG4gKi9cbnZhciBhcHBseVBhdGNoZXMkMSA9IHByb2R1Y2UoYXBwbHlQYXRjaGVzKTtcblxuZXhwb3J0IHsgcHJvZHVjZSwgc2V0QXV0b0ZyZWV6ZSwgc2V0VXNlUHJveGllcywgYXBwbHlQYXRjaGVzJDEgYXMgYXBwbHlQYXRjaGVzLCBJbW1lciwgb3JpZ2luYWwsIGlzRHJhZnQsIE5PVEhJTkcgYXMgbm90aGluZyB9O1xuZXhwb3J0IGRlZmF1bHQgcHJvZHVjZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWltbWVyLm1vZHVsZS5qcy5tYXBcbiIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSAncmVhY3QnO1xuXG5jb25zdCBhc3luY0NvbXBvbmVudCA9IChpbXBvcnRDb21wb25lbnQsIGxvYWRlciA9IG51bGwpID0+IHtcbiAgcmV0dXJuIGNsYXNzIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0ZSA9IHtcbiAgICAgIGNvbXBvbmVudDogbnVsbFxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgaW1wb3J0Q29tcG9uZW50KClcbiAgICAgICAgLnRoZW4oY21wID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb21wb25lbnQ6IGNtcC5kZWZhdWx0fSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgIGNvbnN0IEMgPSB0aGlzLnN0YXRlLmNvbXBvbmVudDtcbiAgICAgIHJldHVybiBDID8gPEMgey4uLnRoaXMucHJvcHN9Lz4gOiBsb2FkZXI7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luY0NvbXBvbmVudDtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcblxuZXhwb3J0IGRlZmF1bHQgKHByb3BzKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBwb3N0cyxcbiAgICBhY3RpdmVQb3N0SWR4LFxuICAgIG9uVGl0bGVDbGljayxcbiAgfSA9IHByb3BzO1xuXG4gIHJldHVybiAoXG4gICAgPHVsPlxuICAgICAgICB7XG4gICAgICAgICAgcG9zdHMubWFwKCh7IHRpdGxlLCBpZCwgcG9zdFR5cGU6IHR5cGUsIGF0dGFjaG1lbnRfdXJsfSwgaWR4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGFjdGl2ZVBvc3RJZHggPT09IGlkeDtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtvblRpdGxlQ2xpY2soaWR4KX19XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogJyd9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICB7dGl0bGV9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICA8L3VsPlxuICApXG59XG4iLCJleHBvcnQgZGVmYXVsdCAoeyBhcGksIHBvc3RMaXN0VXBkYXRlciwgUGVyc2lzdG9yLCBlZGl0aW5nUG9zdCwgcmVmcmVzaH0pID0+ICh7ZXJyb3IsIHN1Y2Nlc3MsIHdhcm59LCBjbSkgPT4ge1xuICBhcGkudXBkYXRlKGNtLmdldE9wdGlvbignY29udGVudElkJyksIGNtLmRvYy5nZXRWYWx1ZSgpLCBlZGl0aW5nUG9zdC50aXRsZSlcbiAgICAudGhlbigobmV3UG9zdCkgPT4ge1xuICAgICAgUGVyc2lzdG9yLnJlbW92ZShuZXdQb3N0LmlkKTtcbiAgICAgIHJlZnJlc2goKTtcbiAgICAgIG5ld1Bvc3QucG9zdFR5cGUgPSAncHVibGlzaGVkJztcbiAgICAgIHBvc3RMaXN0VXBkYXRlcigob2xkUG9zdExpc3QpID0+IHtcbiAgICAgICAgY29uc3QgcG9zdCA9IG9sZFBvc3RMaXN0XG4gICAgICAgICAgLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09IG5ld1Bvc3QuaWQpO1xuXG4gICAgICAgIHBvc3QuY29udGVudCA9IG5ld1Bvc3QuY29udGVudFxuICAgICAgfSk7XG4gICAgICBzdWNjZXNzKCfljZrmloflt7Lmm7TmlrAnKVxuICAgIH0pXG4gICAgLmNhdGNoKCgpID0+IHtcbiAgICAgIGVycm9yKCfljZrmlofmm7TmlrDlpLHotKUnKVxuICAgIH0pO1xufVxuXG4iLCJleHBvcnQgZGVmYXVsdCAoeyBQZXJzaXN0b3IsIHBvc3RMaXN0VXBkYXRlciwgYXBpLCBhY3RpdmV9LCB0eXBlKSA9PlxuICAoe2Vycm9yLCBzdWNjZXNzLCB3YXJufSwgY20pID0+IHtcbiAgICBjb25zdCBwaWQgPSBjbS5nZXRPcHRpb24oJ2NvbnRlbnRJZCcpO1xuICAgIFBlcnNpc3Rvci5yZW1vdmUocGlkKTtcbiAgICBwb3N0TGlzdFVwZGF0ZXIoKG9sZFBvc3RMaXN0KSA9PiB7XG4gICAgICByZXR1cm4gb2xkUG9zdExpc3QuZmlsdGVyKHAgPT4gcC5pZCAhPT0gcGlkKTtcbiAgICB9KTtcblxuICAgIGlmKHR5cGUgPT09ICdkcmFmdCcpIHtcbiAgICAgIHN1Y2Nlc3MoJ+WNmuaWh+W3sue7j+WIoOmZpCcpXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYXBpLmRlbGV0ZShwaWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGFjdGl2ZSgwKTtcbiAgICAgICAgc3VjY2Vzcygn5Y2a5paH5rC45LmF5Yig6ZmkJylcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgZXJyb3IoJ+WNmuaWh+WIoOmZpOWksei0pScpO1xuICAgICAgfSk7XG4gIH1cblxuIiwiZXhwb3J0IGRlZmF1bHQgKHsgUGVyc2lzdG9yLCBhcGksIHBvc3RMaXN0VXBkYXRlciB9KSA9PiBcbiAgKHtlcnJvciwgc3VjY2Vzcywgd2Fybn0sIGNtKSA9PiB7XG4gICAgY29uc3QgdGl0bGUgPSBjbS5nZXRPcHRpb24oJ25ld1Bvc3RUaXRsZScpO1xuICAgIGNvbnN0IHRtcElkID0gY20uZ2V0T3B0aW9uKCdjb250ZW50SWQnKTtcbiAgICBjb25zdCB0bXBUaXRsZSA9IFBlcnNpc3Rvci5nZXQodG1wSWQpLnRpdGxlO1xuXG4gICAgY29uc3QgY29udGVudCA9IGNtLmRvYy5nZXRWYWx1ZSgpO1xuICAgIGlmICghKHRpdGxlIHx8IHRtcFRpdGxlKSkge1xuICAgICAgZXJyb3IoJ+agh+mimOS4jeiDveS4uuepuiEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICBlcnJvcign5YaF5a655LiN6IO95Li656m6IScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGFwaS5jcmVhdGUodGl0bGUgfHwgdG1wVGl0bGUsIGNvbnRlbnQpXG4gICAgICAudGhlbigobmV3UG9zdCkgPT4ge1xuICAgICAgICBQZXJzaXN0b3IucmVtb3ZlKHRtcElkKTtcbiAgICAgICAgcG9zdExpc3RVcGRhdGVyKChvbGRQb3N0TGlzdCkgPT4ge1xuICAgICAgICAgIG9sZFBvc3RMaXN0WzBdID0gbmV3UG9zdDtcbiAgICAgICAgICBvbGRQb3N0TGlzdFswXS5wb3N0VHlwZSA9ICdwdWJsaXNoZWQnXG4gICAgICAgIH0pXG4gICAgICAgIHN1Y2Nlc3MoJ+WNmuaWh+WIm+W7uuaIkOWKnycpXG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGVycm9yKCfljZrmlofliJvlu7rlpLHotKUnKVxuICAgICAgfSk7XG4gIH1cblxuIiwiaW1wb3J0IGhhc2ggZnJvbSAnb2JqZWN0LWhhc2gnO1xuZXhwb3J0IGRlZmF1bHQgKHsgUGVyc2lzdG9yLCBwb3N0TGlzdFVwZGF0ZXIsIGFjdGl2ZSB9KSA9PiBcbiAgKHtlcnJvciwgc3VjY2Vzcywgd2Fybn0sIGNtLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCB0aXRsZSA9IHBhcmFtcy5hcmdTdHJpbmcgJiYgcGFyYW1zLmFyZ1N0cmluZy50cmltKCk7XG4gICAgaWYoIXRpdGxlKSB7XG4gICAgICBlcnJvcign5qCH6aKY5LiN6IO95Li656m6OiBuZXcgJmx0O3RpdGxlJmd0OycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjbS5zZXRPcHRpb24oJ25ld1Bvc3RUaXRsZScsIHRpdGxlKTtcbiAgICBjb25zdCB0bXBJZCA9IGhhc2goRGF0ZS5ub3coKSkuc2xpY2UoMTYpO1xuICAgIGNvbnN0IG5ld1Bvc3QgPSB7XG4gICAgICB0aXRsZSxcbiAgICAgIGlkOiB0bXBJZCxcbiAgICAgIHBvc3RUeXBlOiAnZHJhZnQnLFxuICAgICAgY29udGVudDogJydcbiAgICB9XG4gICAgUGVyc2lzdG9yLnNldCh0bXBJZCwgbmV3UG9zdCk7XG4gICAgcG9zdExpc3RVcGRhdGVyKChvbGRQb3N0TGlzdCkgPT4ge1xuICAgICAgb2xkUG9zdExpc3QudW5zaGlmdChuZXdQb3N0KTtcbiAgICB9LCAoKSA9PiB7XG4gICAgICBhY3RpdmUoMCk7XG4gICAgfSlcbiAgfVxuXG4iLCJpbXBvcnQge1xuICBidWlsZFVwZGF0ZUNtZCxcbiAgYnVpbGREZWxldGVDbWQsXG4gIGJ1aWxkQ3JlYXRlQ21kLFxuICBidWlsZE5ld0NtZCxcbn0gZnJvbSAnLi9jb21tYW5kcyc7XG5cbi8qKlxuICogQHBvc3RUeXBlIHtTdHJpbmd9IFsnZHJhZnQnLCAncHVibGlzaGVkJ11cbiAqL1xuXG5jb25zdCBwaWNrQ21kID0gKGNtZE5hbWVBcnIsIGNvbW1hbmRzKSA9PiB7XG4gIHJldHVybiBjb21tYW5kcy5maWx0ZXIoKHsgbmFtZSB9KSA9PiBjbWROYW1lQXJyLmluY2x1ZGVzKG5hbWUpKVxufVxuXG5jb25zdCBidWlsZEVkaXRvckNvbW1hbmRzID0gKHRvb2xzLCBwb3N0VHlwZSkgPT4ge1xuICBjb25zdCB7XG4gICAgYXBpLCBwb3N0TGlzdFVwZGF0ZXIsIGFjdGl2ZSwgZXhpdCwgUGVyc2lzdG9yXG4gIH0gPSB0b29scztcblxuICBjb25zdCBnZW5lcmFsQ21kU2V0ID0gW1xuICAgICduZXcnLFxuICAgICdkZWxldGVUaGlzUG9zdEZvcmV2ZXInLFxuICAgICdleGl0JyxcbiAgXTtcblxuICBjb25zdCBleEhhbmRsZXJWYWxpZGF0b3IgPSAoZm4sIGV4TmFtZSkgPT4ge1xuICAgIGNvbnN0IGRlZGljYXRlZFBvc3RDbWRNYXAgPSB7XG4gICAgICBkcmFmdDogWydwdWJsaXNoJ10sXG4gICAgICBwdWJsaXNoZWQ6IFsndXBkYXRlJ11cbiAgICB9O1xuXG4gICAgY29uc3QgZGVmYXVsdEhhbmRsZXIgPSAoeyBlcnJvciB9KSA9PiB7XG4gICAgICBlcnJvcign6Z2e5rOV5ZG95LukJyk7XG4gICAgfTtcblxuICAgIGNvbnN0IGlzVmFsaWQgPSBkZWRpY2F0ZWRQb3N0Q21kTWFwW3Bvc3RUeXBlXS5pbmNsdWRlcyhleE5hbWUpO1xuICAgIHJldHVybiBpc1ZhbGlkID8gZm4gOiBkZWZhdWx0SGFuZGxlcjtcbiAgfTtcblxuICBjb25zdCBjb21tYW5kcyA9IFt7XG4gICAgbmFtZTogJ3VwZGF0ZScsXG4gICAgZm46IGV4SGFuZGxlclZhbGlkYXRvcihidWlsZFVwZGF0ZUNtZCh0b29scyksICd1cGRhdGUnKVxuICB9LCB7XG4gICAgbmFtZTogJ2RlbGV0ZVRoaXNQb3N0Rm9yZXZlcicsXG4gICAgZm46IGJ1aWxkRGVsZXRlQ21kKHRvb2xzLCBwb3N0VHlwZSlcbiAgfSwge1xuICAgIG5hbWU6ICdwdWJsaXNoJyxcbiAgICBmbjogZXhIYW5kbGVyVmFsaWRhdG9yKGJ1aWxkQ3JlYXRlQ21kKHRvb2xzKSwgJ3B1Ymxpc2gnKVxuICB9LCB7XG4gICAgbmFtZTogJ2V4aXQnLFxuICAgIGZuOiAoKSA9PiB7IGV4aXQoKTt9XG4gIH0sIHtcbiAgICBuYW1lOiAnbmV3JyxcbiAgICBmbjogYnVpbGROZXdDbWQodG9vbHMpXG4gIH1dXG5cbiAgcmV0dXJuIGNvbW1hbmRzO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYnVpbGRFZGl0b3JDb21tYW5kcztcbiIsImNvbnN0IEtFWV9QUkVGSVggPSAncG0tcGVyc2lzdG9yLSc7XG5jb25zdCBLRVlfUFJFRklYX0ZPUl9USU1FU1RBTVAgPSAncG0tdGltZS1zdGFtcCc7XG5jb25zdCBLRVlfUkVHX0VYUCA9IG5ldyBSZWdFeHAoJ14nICsgS0VZX1BSRUZJWCk7XG5cbmNvbnN0IHVwZGF0ZVRpbWVTdGFtcCA9ICgpID0+IHtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgS0VZX1BSRUZJWF9GT1JfVElNRVNUQU1QLFxuICAgIERhdGUubm93KClcbiAgKTtcbn1cblxuY29uc3QgZ2V0VGltZVN0YW1wID0gKCkgPT4ge1xuICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcbiAgICBLRVlfUFJFRklYX0ZPUl9USU1FU1RBTVAsXG4gICkgfHwgMDtcbn1cblxuY29uc3Qgc2V0ID0gKGtleSwgdmFsKSA9PiB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgIEtFWV9QUkVGSVggKyBrZXksXG4gICAgSlNPTi5zdHJpbmdpZnkodmFsKVxuICApO1xuICB1cGRhdGVUaW1lU3RhbXAoKTtcbn1cblxuY29uc3QgZ2V0ID0gKGtleSkgPT4ge1xuICBpZiAoIWtleSkge1xuICAgIHJldHVybjtcbiAgfVxuICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcbiAgICBLRVlfUFJFRklYICsga2V5XG4gICkpO1xufVxuXG5jb25zdCBfZ2V0ID0gKGtleSkgPT4ge1xuICBpZiAoIWtleSkge1xuICAgIHJldHVybjtcbiAgfVxuICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcbiAgICBrZXlcbiAgKSk7XG59XG5cbmNvbnN0IF9nZXRQZXJzaXN0b3JLZXlzID0gKCkgPT4ge1xuICByZXR1cm4gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKVxuICAgIC5maWx0ZXIoayA9PiBLRVlfUkVHX0VYUC50ZXN0KGspKVxufVxuXG5jb25zdCByZW1vdmUgPSAoa2V5KSA9PiB7XG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFxuICAgIEtFWV9QUkVGSVggKyBrZXlcbiAgKTtcbn1cblxuY29uc3QgbGlzdCA9ICgpID0+IHtcbiAgcmV0dXJuIF9nZXRQZXJzaXN0b3JLZXlzKCkubWFwKF9nZXQpXG59O1xuXG5jb25zdCB3aXRoTG9jYWxMaXN0ID0gKGFycikgPT4ge1xuICBjb25zdCBsb2NhbExpc3QgPSBsaXN0KCk7XG4gIGNvbnN0IGlkTWFwID0ge307XG4gIGFyci5mb3JFYWNoKCh7aWR9KSA9PiB7XG4gICAgaWRNYXBbaWRdID0gdHJ1ZTtcbiAgfSk7XG5cbiAgaWYgKCFhcnIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGxvY2FsTGlzdC5tYXAocCA9PiAoe1xuICAgICAgcG9zdFR5cGU6ICdkcmFmdCcsXG4gICAgICAuLi5wXG4gICAgfSkpO1xuICB9XG5cbiAgY29uc3QgbmV3UG9zdHMgPSBsb2NhbExpc3RcbiAgICAuZmlsdGVyKCh7IGlkIH0pID0+IHtcbiAgICAgIHJldHVybiAhaWRNYXBbaWRdO1xuICAgIH0pO1xuXG4gIHJldHVybiBbXG4gICAgLi4ubmV3UG9zdHMubWFwKHAgPT4gKHtwb3N0VHlwZTogJ2RyYWZ0JywgLi4ucH0pKSxcbiAgICAuLi5hcnIubWFwKHAgPT4gKHtwb3N0VHlwZTogJ3B1Ymxpc2hlZCcsIC4uLnB9KSlcbiAgXVxufTtcblxuY29uc3QgZGVzdHJveSA9ICgpID0+IHtcbiAgX2dldFBlcnNpc3RvcktleXMoKS5mb3JFYWNoKGsgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGspXG4gIH0pO1xufVxuXG5leHBvcnQge1xuICBzZXQsXG4gIGdldCxcbiAgcmVtb3ZlLFxuICBsaXN0LFxuICBkZXN0cm95LFxuICB3aXRoTG9jYWxMaXN0LFxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgdXBsb2FkRmlsZSB9IGZyb20gJ0B6aG91amlhaGFvL3V0aWxzJztcblxuaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuXG5jbGFzcyBVcGxvYWRlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuXG4gIHN0YXRlID0ge1xuICAgIGZpbGU6IG51bGwsXG4gICAgdXBsb2FkaW5nOiBmYWxzZSxcbiAgfTtcblxuICB1cGxvYWRGaWxlID0gKGZpbGUpID0+IHtcbiAgICBjb25zdCB1cGxvYWRBcGlFbmRQb2ludCA9ICdodHRwczovL2FwaS56amguaW0vdXBsb2FkJztcbiAgICBjb25zdCBpZCA9IGAke3RoaXMucHJvcHMuZmlsZUlkfS0ke2ZpbGUubmFtZX1gO1xuICAgIHRoaXMuc2V0U3RhdGUoeyB1cGxvYWRpbmc6IHRydWUgfSk7XG4gICAgdXBsb2FkRmlsZSh1cGxvYWRBcGlFbmRQb2ludCwgZmlsZSwgJ2ZpbGUnLCB7IGlkIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB1cGxvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgICBjb25zdCBjYkZuID0gdGhpcy5wcm9wcy5vblN1Y2Nlc3MgfHwgZnVuY3Rpb24gKCkge307XG4gICAgICAgIGNvbnN0IGZpbGVVUkwgPSBgaHR0cHM6Ly9pbWFnZXMtcmVwby5zZ3AxLmRpZ2l0YWxvY2VhbnNwYWNlcy5jb20vJHtpZH1gO1xuICAgICAgICBjYkZuKGZpbGVVUkwpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB1cGxvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgfSlcbiAgfTtcblxuICBoYW5kbGVPbkNob29zZUZpbGUgPSAoKSA9PiB7XG4gICAgdGhpcy5maWxlSW5wdXQgJiYgdGhpcy5maWxlSW5wdXQuY2xpY2soKTtcbiAgfTtcblxuICBoYW5kbGVGaWxlU2VsZWN0ID0gKGUpID0+IHtcbiAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07XG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMudXBsb2FkRmlsZShmaWxlKVxuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gW1xuICAgICAgPGlucHV0XG4gICAgICAgIHJlZj17ZmlsZUlucHV0ID0+ICh0aGlzLmZpbGVJbnB1dCA9IGZpbGVJbnB1dCl9XG4gICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgYWNjZXB0PXt0aGlzLnByb3BzLmFjY2VwdH1cbiAgICAgICAgY2xhc3NOYW1lPVwiZmlsZS1pbnB1dFwiXG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUZpbGVTZWxlY3R9XG4gICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgZS50YXJnZXQudmFsdWUgPSBudWxsO1xuICAgICAgICB9fVxuICAgICAgLz4sXG4gICAgICB0aGlzLnByb3BzLmNoaWxkcmVuKHtcbiAgICAgICAgc2VsZWN0OiB0aGlzLmhhbmRsZU9uQ2hvb3NlRmlsZSxcbiAgICAgICAgdXBsb2FkaW5nOiB0aGlzLnN0YXRlLnVwbG9hZGluZ1xuICAgICAgfSlcbiAgICBdXG4gIH1cbn1cblxuZXhwb3J0IHtcbiAgVXBsb2FkZXJcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XG5cbmNvbnN0IEJsaW5rRG90ID0gKHsgc2l6ZSA9IDMgfSkgPT4gKFxuICA8ZGl2XG4gICAgY2xhc3NOYW1lPVwiYmctYmxpbmstZG90XCJcbiAgICBzdHlsZT17e1xuICAgICAgd2lkdGg6IHNpemUsXG4gICAgICBoZWlnaHQ6IHNpemVcbiAgICB9fVxuICAvPlxuKTtcblxuY29uc3QgY29weVRvQ2xpcGJvYXJkID0gKHRleHQpID0+IHtcbiAgaWYgKHdpbmRvdy5jbGlwYm9hcmREYXRhICYmIHdpbmRvdy5jbGlwYm9hcmREYXRhLnNldERhdGEpIHtcbiAgICB3aW5kb3cuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCdUZXh0JywgdGV4dCk7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkICYmIGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCgnY29weScpKSB7XG4gICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHRleHRhcmVhLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB0ZXh0YXJlYS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgdGV4dGFyZWEuc3R5bGUuYm90dG9tID0gJy0yMDBweCc7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XG4gICAgdGV4dGFyZWEuc2VsZWN0KCk7XG4gICAgdHJ5IHtcbiAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGV4dGFyZWEpO1xuICAgICAgfSlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5leHBvcnQge1xuICBCbGlua0RvdCxcbiAgY29weVRvQ2xpcGJvYXJkXG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtVcGxvYWRlcn0gZnJvbSAnLi91cGxvYWRlcic7XG5pbXBvcnQge0JsaW5rRG90fSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgQXR0YWNobWVudEljb24gZnJvbSAnLi4vaWNvbnMvYXR0YWNobWVudC5zdmcnO1xuXG5jb25zdCBBdHRhY2htZW50QnRuID0gKHtcbiAgb25TdWNjZXNzLFxuICBmaWxlSWQsXG4gIGhhc0F0dGFjaEFscmVhZHlcbn0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8VXBsb2FkZXJcbiAgICAgIGZpbGVJZD17ZmlsZUlkfVxuICAgICAgb25TdWNjZXNzPXtvblN1Y2Nlc3N9XG4gICAgPlxuICAgICAge1xuICAgICAgICAoeyBzZWxlY3QsIHVwbG9hZGluZyB9KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGFjdGlvbnMgJHtoYXNBdHRhY2hBbHJlYWR5ID8gJ2hhc0F0dGFjaCcgOiAnJ31gfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtzZWxlY3R9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt1cGxvYWRpbmdcbiAgICAgICAgICAgICAgICA/IDxCbGlua0RvdCAvPlxuICAgICAgICAgICAgICAgIDogPEF0dGFjaG1lbnRJY29uLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIDwvVXBsb2FkZXI+XG4gIClcbn07XG5cbmV4cG9ydCB7XG4gIEF0dGFjaG1lbnRCdG5cbn0iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgcHJvZHVjZSBmcm9tICdpbW1lcic7XG5cbmltcG9ydCBBc3luY0ltcG9ydCBmcm9tICcuL2FzeW5jLWltcG9ydCc7XG5pbXBvcnQgUG9zdExpc3QgZnJvbSAnLi9wb3N0LWxpc3QvJ1xuaW1wb3J0IGJ1aWxkRWRpdG9yRXhBcnIgZnJvbSAnLi9jdXN0b20tZWRpdG9yLWNvbW1hbmRzLydcbmltcG9ydCAqIGFzIFBlcnNpc3RvciBmcm9tICcuLi9wZXJzaXN0b3IvJ1xuaW1wb3J0IHtBdHRhY2htZW50QnRufSBmcm9tICcuL2F0dGFjaG1lbnQtYnRuJztcblxuY29uc3QgdmVyc2lvbiA9IHJlcXVpcmUoJy4uLy4uL3BhY2thZ2UuanNvbicpLnZlcnNpb247XG5jb25zdCBFZGl0b3IgPSBBc3luY0ltcG9ydChcbiAgKCkgPT4ge1xuICAgIHJldHVybiBpbXBvcnQoJ0B6aG91amlhaGFvL2VkaXRvci9saWIvcmVhY3QtY29kZS1taXJyb3InKTtcbiAgfSxcbiAgKFxuICAgIDxkaXZcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHdpZHRoOiAnY2FsYyg1MCUgLSAxNXB4KScsXG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICBib3JkZXI6ICdkb3R0ZWQgMXB4ICMwMDAnLFxuICAgICAgICBiYWNrZ3JvdW5kOiAnI2YwZjBmMCcsXG4gICAgICB9fVxuICAgIC8+XG4gIClcbilcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFuZSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYWN0aXZlUG9zdElkeDogMCxcbiAgICAgIHVwZGF0ZVN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgcG9zdExpc3Q6IHRoaXMucHJvcHMucG9zdHNcbiAgICB9XG4gIH1cbiAgXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIFBlcnNpc3Rvci5kZXN0cm95KCk7XG4gIH1cblxuICBhY3RpdmUgPSAoYWN0aXZlUG9zdElkeCkgPT4ge3RoaXMuc2V0U3RhdGUoeyBhY3RpdmVQb3N0SWR4IH0pfVxuXG4gIHVwZGF0ZVBvc3RMaXN0ID0gKHVwZGF0ZXJGbiwgY2JGbiA9ICgpID0+IG51bGwpID0+IHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh1cGRhdGVyRm4pKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgcG9zdExpc3Q6IHVwZGF0ZXJGblxuICAgICAgfSlcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgcG9zdExpc3Q6IHByb2R1Y2UocHJldlN0YXRlLnBvc3RMaXN0LCB1cGRhdGVyRm4pXG4gICAgfSksIGNiRm4pXG4gIH1cblxuICBidWlsZEVkdENscyA9ICgpID0+IHtcbiAgICBjb25zdCBlZGl0aW5nUG9zdCA9IHRoaXMuc3RhdGUucG9zdExpc3RbXG4gICAgICB0aGlzLnN0YXRlLmFjdGl2ZVBvc3RJZHhcbiAgICBdIHx8IHRoaXMuc3RhdGUucG9zdExpc3RbMF07XG4gICAgY29uc3QgbG9jYWxDaGFuZ2VzID0gISFQZXJzaXN0b3IuZ2V0KGVkaXRpbmdQb3N0LmlkKTtcbiAgICBsZXQgdHlwZSA9ICdub3JtYWwtZmlsZSc7XG5cbiAgICBpZiAoZWRpdGluZ1Bvc3QucG9zdFR5cGUgPT09ICdkcmFmdCcgJiYgbG9jYWxDaGFuZ2VzKSB7XG4gICAgICB0eXBlID0gJ25ldy1maWxlJztcbiAgICB9XG5cbiAgICBpZiAoZWRpdGluZ1Bvc3QucG9zdFR5cGUgPT09ICdwdWJsaXNoZWQnICYmIGxvY2FsQ2hhbmdlcykge1xuICAgICAgdHlwZSA9ICdjaGFuZ2VkLWZpbGUnXG4gICAgfVxuXG4gICAgcmV0dXJuIFwiZWRpdG9yLXdyYXBwZXIgXCIgKyB0eXBlO1xuICB9O1xuXG4gIHRpdGxlRm9ybWF0dGVyID0gcCA9PiB7XG4gICAgcmV0dXJuIGAke3AudGl0bGV9YDtcbiAgfVxuXG4gIHJlZnJlc2ggPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB1cGRhdGVTdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH07XG5cbiAgZ2V0RWRpdGluZ1Bvc3RUaXRsZSA9ICgpID0+IHtcbiAgICBjb25zdCBlZGl0aW5nUG9zdCA9IHRoaXMuc3RhdGUucG9zdExpc3RbXG4gICAgICB0aGlzLnN0YXRlLmFjdGl2ZVBvc3RJZHhcbiAgICBdIHx8IHRoaXMuc3RhdGUucG9zdExpc3RbMF07XG4gICAgcmV0dXJuIGVkaXRpbmdQb3N0LnRpdGxlO1xuICB9XG5cbiAgaGFuZGxlRWRpdG9yQ29udGVudENoYW5nZSA9IChpZCwgY29udGVudCkgPT4ge1xuICAgIGNvbnN0IGVkaXRpbmdQb3N0ID0gdGhpcy5zdGF0ZS5wb3N0TGlzdFtcbiAgICAgIHRoaXMuc3RhdGUuYWN0aXZlUG9zdElkeFxuICAgIF0gfHwgdGhpcy5zdGF0ZS5wb3N0TGlzdFswXTtcbiAgICBQZXJzaXN0b3Iuc2V0KGlkLCB7XG4gICAgICB0aXRsZTogdGhpcy5nZXRFZGl0aW5nUG9zdFRpdGxlKCksXG4gICAgICBwb3N0VHlwZTogZWRpdGluZ1Bvc3QudHlwZSxcbiAgICAgIGlkLFxuICAgICAgY29udGVudFxuICAgIH0pXG4gIH07XG5cbiAgaGFuZGxlVXBsb2FkRmlsZSA9IGlkID0+ICh1cmwpID0+IHtcbiAgICB0aGlzLnByb3BzLmFwaS51cGRhdGUoaWQsICcnLCAnJywgdXJsKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZVBvc3RMaXN0KChvbGRQb3N0TGlzdCkgPT4ge1xuICAgICAgICAgIG9sZFBvc3RMaXN0LmZpbmQoKHsgaWQ6IHRhcmdldElkIH0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBpZCA9PT0gdGFyZ2V0SWRcbiAgICAgICAgICB9KS5hdHRhY2htZW50X3VybCA9IHVybDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfSlcbiAgfTtcblxuICByZW5kZXJUaXRsZUxpc3QgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2lkZS1saXN0LWNvbFwiPlxuICAgICAgICA8UG9zdExpc3RcbiAgICAgICAgICB0aXRsZXM9e3RoaXMuc3RhdGUucG9zdExpc3QubWFwKHRoaXMudGl0bGVGb3JtYXR0ZXIpfVxuICAgICAgICAgIHVwZGF0ZT17dGhpcy5wcm9wcy5hcGkudXBkYXRlfVxuICAgICAgICAgIHBvc3RMaXN0VXBkYXRlcj17dGhpcy51cGRhdGVQb3N0TGlzdH1cbiAgICAgICAgICByZWZyZXNoPXt0aGlzLnJlZnJlc2h9XG4gICAgICAgICAgcG9zdHM9e3RoaXMuc3RhdGUucG9zdExpc3R9XG4gICAgICAgICAgb25UaXRsZUNsaWNrPXt0aGlzLmFjdGl2ZX1cbiAgICAgICAgICBhY3RpdmVQb3N0SWR4PXt0aGlzLnN0YXRlLmFjdGl2ZVBvc3RJZHh9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH07XG5cbiAgcmVuZGVyQXR0YWNobWVudEJ0biA9ICgpID0+IHtcbiAgICBjb25zdCBlZGl0aW5nUG9zdCA9IHRoaXMuc3RhdGUucG9zdExpc3RbXG4gICAgICB0aGlzLnN0YXRlLmFjdGl2ZVBvc3RJZHhcbiAgICAgIF0gfHwgdGhpcy5zdGF0ZS5wb3N0TGlzdFswXTtcbiAgICBjb25zdCB7XG4gICAgICBpZCxcbiAgICAgIHBvc3RUeXBlOiB0eXBlLFxuICAgICAgYXR0YWNobWVudF91cmw6IHVybFxuICAgIH0gPSBlZGl0aW5nUG9zdDtcblxuICAgIGNvbnN0IGlzUHVibGlzaGVkID0gdHlwZSA9PT0gJ3B1Ymxpc2hlZCc7XG5cbiAgICBpZiAoIWlzUHVibGlzaGVkKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8QXR0YWNobWVudEJ0blxuICAgICAgICBmaWxlSWQ9e2lkfVxuICAgICAgICBoYXNBdHRhY2hBbHJlYWR5PXshIXVybH1cbiAgICAgICAgb25TdWNjZXNzPXt0aGlzLmhhbmRsZVVwbG9hZEZpbGUoaWQpfVxuICAgICAgLz5cbiAgICApXG4gIH07XG5cbiAgcmVuZGVyRWRpdG9yID0gKCkgPT4ge1xuICAgIGNvbnN0IGVkaXRpbmdQb3N0ID0gdGhpcy5zdGF0ZS5wb3N0TGlzdFtcbiAgICAgIHRoaXMuc3RhdGUuYWN0aXZlUG9zdElkeFxuICAgIF0gfHwgdGhpcy5zdGF0ZS5wb3N0TGlzdFswXTtcbiAgICBjb25zdCBsb2NhbENoYW5nZXMgPSBQZXJzaXN0b3IuZ2V0KGVkaXRpbmdQb3N0LmlkKTtcbiAgICBjb25zdCBpbml0Q29udGVudCA9IChsb2NhbENoYW5nZXMgJiYgbG9jYWxDaGFuZ2VzLmNvbnRlbnQgIT09IHVuZGVmaW5lZClcbiAgICAgID8gbG9jYWxDaGFuZ2VzLmNvbnRlbnRcbiAgICAgIDogKGVkaXRpbmdQb3N0LmNvbnRlbnQgfHwgJycpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXt0aGlzLmJ1aWxkRWR0Q2xzKCl9IGRhdGEtdj17dmVyc2lvbn0+XG4gICAgICAgIDxFZGl0b3JcbiAgICAgICAgICB2YWx1ZT17aW5pdENvbnRlbnR9XG4gICAgICAgICAgY29udGVudElkPXtlZGl0aW5nUG9zdC5pZH1cbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9XCIjZjJmMmYyXCJcbiAgICAgICAgICBvblNhdmU9e3RoaXMuaGFuZGxlRWRpdG9yQ29udGVudENoYW5nZX1cbiAgICAgICAgICBleEFycj17YnVpbGRFZGl0b3JFeEFycih7XG4gICAgICAgICAgICBhcGk6IHRoaXMucHJvcHMuYXBpLFxuICAgICAgICAgICAgcG9zdExpc3RVcGRhdGVyOiB0aGlzLnVwZGF0ZVBvc3RMaXN0LFxuICAgICAgICAgICAgZWRpdGluZ1Bvc3QsXG4gICAgICAgICAgICByZWZyZXNoOiB0aGlzLnJlZnJlc2gsXG4gICAgICAgICAgICBhY3RpdmU6IHRoaXMuYWN0aXZlLFxuICAgICAgICAgICAgZXhpdDogdGhpcy5wcm9wcy5leGl0LFxuICAgICAgICAgICAgUGVyc2lzdG9yXG4gICAgICAgICAgfSwgZWRpdGluZ1Bvc3QucG9zdFR5cGUpfVxuICAgICAgICAvPlxuICAgICAgICB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJBdHRhY2htZW50QnRuKClcbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgZWRpdGluZ1Bvc3QuYXR0YWNobWVudF91cmxcbiAgICAgICAgICAmJiA8aW1nIHNyYz17ZWRpdGluZ1Bvc3QuYXR0YWNobWVudF91cmx9IC8+XG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lXCI+XG4gICAgICAgICAge3RoaXMucmVuZGVyVGl0bGVMaXN0KCl9XG4gICAgICAgICAge3RoaXMucmVuZGVyRWRpdG9yKCl9XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcblxuaW1wb3J0IHsgJCB9IGZyb20gJ0B6aG91amlhaGFvL3V0aWxzJztcblxuaW1wb3J0IFBhbmUgZnJvbSAnLi9wYW5lJztcbmltcG9ydCAnLi9zdHlsZS5zY3NzJztcblxuZXhwb3J0IGNvbnN0IHVuaW5zdGFsbCA9IChkb20pID0+IHtcbiAgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZShkb20gfHwgJCgnI2d1aScpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgKHBvc3RzLCBhcGksIGV4aXQsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCAkZ3VpID0gb3B0aW9ucy5kb20gfHwgJCgnI2d1aScpO1xuICAkZ3VpLmNsYXNzTGlzdC5hZGQoJ2Z1bGxzY3JlZW4nKTtcbiAgUmVhY3RET00ucmVuZGVyKFxuICAgIDxQYW5lIHBvc3RzPXtwb3N0c30gYXBpPXthcGl9IGV4aXQ9e2V4aXR9Lz4sXG4gICAgJGd1aVxuICApXG59XG4iLCJpbXBvcnQgeyByZXEsIHJlcUFuZENhY2hlIH0gZnJvbSAnQHpob3VqaWFoYW8vdXRpbHMnO1xuXG5jb25zdCBCQVNFX1VSTCA9ICdodHRwczovL2FwaS56amguaW0veic7XG5jb25zdCBBUEkgPSB7XG4gIGNyZWF0ZTogYCR7QkFTRV9VUkx9L3Bvc3QvY3JlYXRlYCxcbiAgdXBkYXRlOiBgJHtCQVNFX1VSTH0vcG9zdC91cGRhdGVgLFxuICBkZWxldGU6IGAke0JBU0VfVVJMfS9wb3N0L2RlbGV0ZWAsXG4gIGxpc3Q6IGAke0JBU0VfVVJMfS9wb3N0c2AsXG59O1xuXG5leHBvcnQgZGVmYXVsdCAoY3JlZGVudGlhbCkgPT4ge1xuICBjb25zdCBhY3Rpb25zTmVlZENyZWRlbnRpYWwgPSBjcmVkZW50aWFsXG4gICAgPyB7XG4gICAgICBjcmVhdGU6ICh0aXRsZSwgY29udGVudCkgPT4ge1xuICAgICAgICByZXR1cm4gcmVxKFxuICAgICAgICAgIEFQSS5jcmVhdGUsXG4gICAgICAgICAgJ1BPU1QnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIC4uLmNyZWRlbnRpYWxcbiAgICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHVwZGF0ZTogKGlkLCBjb250ZW50LCB0aXRsZSwgYXR0YWNobWVudFVSTCkgPT4ge1xuICAgICAgICByZXR1cm4gcmVxKFxuICAgICAgICAgIEFQSS51cGRhdGUsXG4gICAgICAgICAgJ1BPU1QnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgYXR0YWNobWVudF91cmw6IGF0dGFjaG1lbnRVUkwsXG4gICAgICAgICAgICAuLi5jcmVkZW50aWFsXG4gICAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBkZWxldGU6IChpZCkgPT4ge1xuICAgICAgICByZXR1cm4gcmVxKFxuICAgICAgICAgIEFQSS5kZWxldGUsXG4gICAgICAgICAgJ1BPU1QnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgLi4uY3JlZGVudGlhbFxuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICA6IHtcbiAgICAgIGNyZWF0ZTogKCkgPT4gUHJvbWlzZS5yZWplY3QoKSxcbiAgICAgIHVwZGF0ZTogKCkgPT4gUHJvbWlzZS5yZWplY3QoKSxcbiAgICAgIGRlbGV0ZTogKCkgPT4gUHJvbWlzZS5yZWplY3QoKSxcbiAgICB9O1xuXG4gIHJldHVybiB7XG4gICAgbGlzdDogKCkgPT4ge1xuICAgICAgcmV0dXJuIHJlcUFuZENhY2hlKEFQSS5saXN0KTtcbiAgICB9LFxuICAgIC4uLmFjdGlvbnNOZWVkQ3JlZGVudGlhbFxuICB9XG59XG4iLCJpbXBvcnQgeyBkb2NUcGwsICQgfSBmcm9tICdAemhvdWppYWhhby91dGlscyc7XG5cbmltcG9ydCBydW5NYW5hZ2VQYW5lbCBmcm9tICcuL21hbmFnZS1wYW5lJztcbmltcG9ydCB7dW5pbnN0YWxsfSBmcm9tICcuL21hbmFnZS1wYW5lJztcbmltcG9ydCBwb3N0U0RLIGZyb20gJy4vYmxvZy1hcGkvJztcbmltcG9ydCB7IHdpdGhMb2NhbExpc3QgfSBmcm9tICcuL3BlcnNpc3Rvci8nO1xuXG5jb25zdCBkb2MgPSBkb2NUcGwoJ3BtJywgJ3BtIFthY2Nlc3MgdG9rZW5dJywgJ3Bvc3RzIG1hbmFnZXIgZm9yIG15IGJsb2cuJyk7XG5cbmNvbnN0IHNhdmVDcmVkZW50aWFsID0gKGNyZWRlbnRpYWwpID0+IHtcbiAgY29uc3QgY3JlZGVudGlhbEtleSA9ICdwLWMta2V5JztcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY3JlZGVudGlhbEtleSwgSlNPTi5zdHJpbmdpZnkoY3JlZGVudGlhbCkpO1xufTtcblxuY29uc3QgbG9hZENyZWRlbnRpYWwgPSAoKSA9PiB7XG4gIGNvbnN0IGNyZWRlbnRpYWxLZXkgPSAncC1jLWtleSc7XG4gIHJldHVybiBKU09OLnBhcnNlKFxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNyZWRlbnRpYWxLZXkpXG4gICkgfHwgbnVsbDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZG9jLFxuICBzaG9ydG9wdHM6ICdlJyxcbiAgaGFuZGxlcjogYXN5bmMgKFxuICAgIHBhcmFtc09iaixcbiAgKSA9PiB7XG4gICAgaWYgKHBhcmFtc09iai5lKSB7XG4gICAgICB1bmluc3RhbGwoKTtcbiAgICAgIHJldHVybiAnR29vZGJ5ZSc7XG4gICAgfTtcblxuICAgIGNvbnN0IGNyZWRlbnRpYWwgPSAoIHBhcmFtc09iai51c2VyICYmIHBhcmFtc09iai5wYXNzd29yZCApXG4gICAgICA/IHtcbiAgICAgICAgdXNlcjogcGFyYW1zT2JqLnVzZXIsXG4gICAgICAgIHBhc3N3b3JkOiBwYXJhbXNPYmoucGFzc3dvcmRcbiAgICAgIH1cbiAgICAgIDogbG9hZENyZWRlbnRpYWwoKTtcblxuICAgIHNhdmVDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xuICAgIGNvbnN0IGFwaSA9IHBvc3RTREsoY3JlZGVudGlhbCk7XG4gICAgY29uc3QgcG9zdHMgPSBhd2FpdCBhcGkubGlzdCgpO1xuICAgIGNvbnN0IGRvbSA9IHBhcmFtc09iai5kb20gfHwgJCgnI2d1aScpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBydW5NYW5hZ2VQYW5lbCh3aXRoTG9jYWxMaXN0KHBvc3RzKSwgYXBpLCAoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIGRvbS5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuJyk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBUZXJtaW5hbCAmJiBUZXJtaW5hbC5leGVjKCdwbSAtZScpO1xuICAgICAgICAgIH0pXG4gICAgICAgIH0sIHsgZG9tIH0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gXCJGYWlsIHRvIGZldGNoIHBvc3RzXCI7XG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==