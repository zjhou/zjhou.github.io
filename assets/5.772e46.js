(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"T79/":function(n,e,t){(n.exports=t("I1BE")(!1)).push([n.i,"@charset \"UTF-8\";\n#gui.editor.on {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: #fff;\n  z-index: 2; }\n\n.edit-area textarea {\n  width: 100%;\n  height: 100%;\n  border: none;\n  resize: none;\n  outline: none;\n  padding: 10px; }\n\n.editor-wrapper {\n  width: 100vw;\n  height: 100vh;\n  position: absolute;\n  display: flex; }\n\n.edit-area {\n  flex: 1 1 50%;\n  border-right: solid 1px #f1f1f1;\n  /* &:after,\n    &:before {\n        position: absolute;\n        bottom: 0;\n        font-size: 50px;\n        color: #f1f1f1;\n        z-index: -1;\n    }\n\n    &:before {\n        right: 50%;\n        content: 'ctrl + s 保存';\n    }\n\n    &:after{\n        left: 50%;\n        content: 'ctrl + c 退出';\n    } */ }\n\n.preview-area {\n  flex: 1 1 50%;\n  padding: 10px;\n  overflow: auto;\n  background: #f1f1f1; }\n\n.actions {\n  position: absolute;\n  bottom: 0; }\n",""])},gXRL:function(n,e,t){var r=t("T79/");"string"==typeof r&&(r=[[n.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};t("aET+")(r,o);r.locals&&(n.exports=r.locals)},zsIg:function(n,e,t){"use strict";t.r(e);t("gXRL");var r=t("8RZD"),o=function(n,e,t){var o=window.converter.makeHtml(n),a=Object(r.a)("#gui"),i=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=Object(r.a)(n);o.innerHTML='\n    <div class="editor-wrapper">\n      <div class="edit-area">\n          <textarea class="editor">'.concat(e,'</textarea>\n      </div>\n      <div class="preview-area"><div class="markdown-body">').concat(t,"</div></div>\n    </div> \n  "),o.classList.add("editor"),o.classList.add("on");var a=Object(r.a)("textarea.editor"),i=Object(r.a)(".preview-area");return a.focus(),{$editor:a,$preview:i}}("#gui",n,o),c=i.$editor,s=i.$preview;c.addEventListener("keydown",(function(n){var t=n.key,r=n.ctrlKey,o=r&&"c"===t;if(r&&"s"===t)return e(c.value),a.classList.remove("on"),void(a.innerHTML="");o&&(e(""),a.classList.remove("on"),a.innerHTML="")})),c.addEventListener("input",(function(n){s.innerHTML=window.converter.makeHtml(n.target.value)}))};function a(n,e,t,r,o,a,i){try{var c=n[a](i),s=c.value}catch(n){return void t(n)}c.done?e(s):Promise.resolve(s).then(r,o)}function i(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function c(n){a(i,r,o,c,s,"next",n)}function s(n){a(i,r,o,c,s,"throw",n)}c(void 0)}))}}var c="https://api.github.com/repos/zjhou/notes/contents/_posts",s=localStorage.getItem("ghtoken"),u=function(){var n=i(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=r.z.get("notes")){n.next=6;break}return n.next=4,Object(r.v)(c,"GET");case 4:e=n.sent,r.z.set("notes",e);case 6:return n.abrupt("return",e);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),d=function(n,e,t){if(!s)return Promise.reject("please set PAT first!");var o="".concat(t||Object(r.B)(),"-").concat(n,".md"),a="".concat(c,"/").concat(o),i={message:"add note: ".concat(o),committer:{name:"zjhou",email:"z@zjh.im"},content:r.d.encode(e)};return Object(r.v)(a,"PUT",i,s)},f=function(){var n=i(regeneratorRuntime.mark((function n(e,t){var o,a,i,d,f,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return",Promise.reject("please set PAT first!"));case 2:return n.next=4,u();case 4:if(o=n.sent,a=o.filter((function(n){return n.name.includes(e)}))[0]){n.next=8;break}throw"无法找到笔记";case 8:return i=a.name,d=a.sha,f="".concat(c,"/").concat(i),v={message:"update note: ".concat(i),content:r.d.encode(t),sha:d,committer:{name:"zjhou",email:"z@zjh.im"}},n.abrupt("return",Object(r.v)(f,"PUT",v,s));case 12:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();e.default={shortopts:"n:u",handler:function(n,e,t,r){var a=r.restParams,i=r.fromPipe;return new Promise((function(e,t){var r=n.n,c=n.u;r?o(c?i:"",(function(n){var o=c?"更新":"添加";(c?f:d)(r,n).then((function(){e("笔记".concat(o,"成功！"))})).catch(t)}),t):o(a||i,e,t)}))}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vZWRpdG9yL2xpYi9lZGl0b3IvZ3VpL21haW4uc2NzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vZWRpdG9yL2xpYi9lZGl0b3IvZ3VpL21haW4uc2Nzcz9hODE3Iiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AemhvdWppYWhhby9lZGl0b3IvbGliL2VkaXRvci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vZWRpdG9yL2xpYi9lZGl0b3IvZ3VpL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AemhvdWppYWhhby9ub3RlYm9vay9saWIvbm90ZWJvb2suanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B6aG91amlhaGFvL2VkaXRvci9saWIvaW5kZXguanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsInB1c2giLCJpIiwiY29udGVudCIsIm9wdGlvbnMiLCJ0cmFuc2Zvcm0iLCJ1bmRlZmluZWQiLCJsb2NhbHMiLCJlZGl0b3IiLCJzb3VyY2UiLCJvbk9rIiwib25FcnIiLCJzb3VyY2VIVE1MIiwid2luZG93IiwiY29udmVydGVyIiwibWFrZUh0bWwiLCIkR1VJIiwiJCIsInNlbGVjdG9yIiwiaW5uZXJIVE1MIiwiY2xhc3NMaXN0IiwiYWRkIiwiJGVkaXRvciIsIiRwcmV2aWV3IiwiZm9jdXMiLCJpbml0R3VpIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJrZXkiLCJjdHJsS2V5IiwiaXNFeGl0IiwidmFsdWUiLCJyZW1vdmUiLCJ0YXJnZXQiLCJQT1NUU19VUkwiLCJ0b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJsaXN0Tm90ZXMiLCJub3RlcyIsInN0b3JlIiwiZ2V0IiwicmVxIiwic2V0IiwiYWRkTm90ZSIsIm5vdGVOYW1lIiwibm90ZUNvbnRlbnQiLCJkYXRlU3RyIiwiUHJvbWlzZSIsInJlamVjdCIsIm5vdGVGaWxlTmFtZSIsInRvZGF5IiwicmVxRW5kUG9pbnQiLCJjb21taXRPYmoiLCJtZXNzYWdlIiwiY29tbWl0dGVyIiwibmFtZSIsImVtYWlsIiwiYmFzZTY0IiwiZW5jb2RlIiwidXBkYXRlTm90ZSIsInRhcmdldE5vdGUiLCJmaWx0ZXIiLCJpbmNsdWRlcyIsInNoYSIsInNob3J0b3B0cyIsImhhbmRsZXIiLCJwYXJhbU9iaiIsImNtZFNldCIsIiR0ZXJtaW5hbCIsInJlc3RQYXJhbXMiLCJmcm9tUGlwZSIsInJlc29sdmUiLCJmaWxlTmFtZSIsIm4iLCJpc1VwZGF0ZSIsInUiLCJhY3Rpb24iLCJ0aGVuIl0sIm1hcHBpbmdzIjoiaUZBQVVBLEVBQU9DLFFBQVUsRUFBUSxPQUFSLEVBQXFELElBS3hFQyxLQUFLLENBQUNGLEVBQU9HLEVBQUksNDRCQUE2NEIsTSxxQkNKdDZCLElBQUlDLEVBQVUsRUFBUSxRQUVBLGlCQUFaQSxJQUFzQkEsRUFBVSxDQUFDLENBQUNKLEVBQU9HLEVBQUlDLEVBQVMsTUFPaEUsSUFBSUMsRUFBVSxDQUFDLEtBQU0sRUFFckIsZUFQSUMsRUFRSixnQkFBcUJDLEdBRVIsRUFBUSxPQUFSLENBQXlESCxFQUFTQyxHQUU1RUQsRUFBUUksU0FBUVIsRUFBT0MsUUFBVUcsRUFBUUksUyxtRUN3QjdCQyxFQXJDQSxTQUFDQyxFQUFRQyxFQUFNQyxHQUM1QixJQUFNQyxFQUFhQyxPQUFPQyxVQUFVQyxTQUFTTixHQUN2Q08sRUFBT0MsWUFBRSxRQUZ1QixFQ0R6QixTQUFVQyxHQUF3QyxJQUE5QlQsRUFBOEIsdURBQXJCLEdBQUlHLEVBQWlCLHVEQUFKLEdBQ3JESSxFQUFPQyxZQUFFQyxHQUNmRixFQUFLRyxVQUFMLGdIQUdtQ1YsRUFIbkMsaUdBSzJERyxFQUwzRCxpQ0FTQUksRUFBS0ksVUFBVUMsSUFBSSxVQUNuQkwsRUFBS0ksVUFBVUMsSUFBSSxNQUVuQixJQUFNQyxFQUFVTCxZQUFFLG1CQUNaTSxFQUFXTixZQUFFLGlCQUluQixPQUZBSyxFQUFRRSxRQUVELENBQ0xGLFVBQ0FDLFlEZEVFLENBQVEsT0FBUWhCLEVBQVFHLEdBRjFCVSxFQUpvQyxFQUlwQ0EsUUFDQUMsRUFMb0MsRUFLcENBLFNBZUZELEVBQVFJLGlCQUFpQixXQUFXLFNBQUNDLEdBQU0sSUFDbENDLEVBQWdCRCxFQUFoQkMsSUFBS0MsRUFBV0YsRUFBWEUsUUFFTkMsRUFBU0QsR0FBbUIsTUFBUkQsRUFDMUIsR0FGZUMsR0FBbUIsTUFBUkQsRUFJeEIsT0FqQkZsQixFQUFLWSxFQUFRUyxPQUNiZixFQUFLSSxVQUFVWSxPQUFPLFdBQ3RCaEIsRUFBS0csVUFBWSxJQWlCYlcsSUFiSnBCLEVBQUssSUFDTE0sRUFBS0ksVUFBVVksT0FBTyxNQUN0QmhCLEVBQUtHLFVBQVksT0FlbkJHLEVBQVFJLGlCQUFpQixTQUFTLFNBQUNDLEdBQ2pDSixFQUFTSixVQUFZTixPQUFPQyxVQUFVQyxTQUFTWSxFQUFFTSxPQUFPRixXLDRURW5DNUQsSUFBTUcsRUFBWSwyREFDWkMsRUFBUUMsYUFBYUMsUUFBUSxXQUU3QkMsRUFBUyw0Q0FBRyxzR0FDWkMsRUFBUUMsSUFBTUMsSUFBSSxTQUROLGdDQUdBQyxZQUFJUixFQUFXLE9BSGYsT0FHZEssRUFIYyxPQUlkQyxJQUFNRyxJQUFJLFFBQVNKLEdBSkwsZ0NBTVRBLEdBTlMsMkNBQUgscURBZVRLLEVBQVUsU0FBQ0MsRUFBVUMsRUFBYUMsR0FDdEMsSUFBS1osRUFDSCxPQUFPYSxRQUFRQyxPQUFPLHlCQUd4QixJQUFNQyxFQUFlLEdBQUgsT0FBTUgsR0FBV0ksY0FBakIsWUFBNEJOLEVBQTVCLE9BQ1pPLEVBQWMsR0FBSCxPQUFNbEIsRUFBTixZQUFtQmdCLEdBQzlCRyxFQUFZLENBQ2hCQyxRQUFTLGFBQUYsT0FBZUosR0FDdEJLLFVBQVcsQ0FBQ0MsS0FBTSxRQUFTQyxNQUFPLFlBQ2xDdEQsUUFBU3VELElBQU9DLE9BQU9iLElBR3pCLE9BQU9KLFlBQ0xVLEVBQ0EsTUFDQUMsRUFDQWxCLElBU0V5QixFQUFVLDRDQUFHLFdBQU9mLEVBQVVDLEdBQWpCLG1HQUNaWCxFQURZLHlDQUVSYSxRQUFRQyxPQUFPLDBCQUZQLHVCQUtHWCxJQUxILFVBS1hDLEVBTFcsT0FNWHNCLEVBQWF0QixFQUFNdUIsUUFBTyxZQUM5QixPQUQwQyxFQUFWTixLQUNwQk8sU0FBU2xCLE1BQ3BCLEdBUmMscUJBV1QsU0FYUyxjQWFWVyxFQUFhSyxFQUFiTCxLQUFNUSxFQUFPSCxFQUFQRyxJQUNQWixFQWRXLFVBY01sQixFQWROLFlBY21Cc0IsR0FDOUJILEVBQVksQ0FDaEJDLFFBQVMsZ0JBQUYsT0FBa0JFLEdBQ3pCckQsUUFBU3VELElBQU9DLE9BQU9iLEdBQ3ZCa0IsTUFDQVQsVUFBVyxDQUFDQyxLQUFNLFFBQVNDLE1BQU8sYUFuQm5CLGtCQXNCVmYsWUFDTFUsRUFDQSxNQUNBQyxFQUNBbEIsSUExQmUsNENBQUgsd0RDM0NELFdBQ2I4QixVQUFXLE1BQ1hDLFFBRmEsU0FFTEMsRUFBVUMsRUFBUUMsRUFGYixHQUVnRCxJQUF2QkMsRUFBdUIsRUFBdkJBLFdBQVlDLEVBQVcsRUFBWEEsU0FvQmhELE9BbkJzQixJQUFJdkIsU0FBUSxTQUFDd0IsRUFBU3ZCLEdBQVcsSUFDM0N3QixFQUF5Qk4sRUFBNUJPLEVBQWdCQyxFQUFZUixFQUFmUyxFQVloQkgsRUFDRmpFLEVBQU9tRSxFQUFXSixFQUFXLElBWmQsU0FBQ3BFLEdBQ2hCLElBQ00wRSxFQUFTRixFQUFXLEtBQU8sTUFEakJBLEVBQVdmLEVBQWFoQixHQUdoQzZCLEVBQVV0RSxHQUNmMkUsTUFBSyxXQUNKTixFQUFRLEtBQUQsT0FBTUssRUFBTixXQUZYLE1BSVM1QixLQUlrQ0EsR0FFM0N6QyxFQUFPOEQsR0FBY0MsRUFBVUMsRUFBU3ZCIiwiZmlsZSI6IjUuNzcyZTQ2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIkBjaGFyc2V0IFxcXCJVVEYtOFxcXCI7XFxuI2d1aS5lZGl0b3Iub24ge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgei1pbmRleDogMjsgfVxcblxcbi5lZGl0LWFyZWEgdGV4dGFyZWEge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBib3JkZXI6IG5vbmU7XFxuICByZXNpemU6IG5vbmU7XFxuICBvdXRsaW5lOiBub25lO1xcbiAgcGFkZGluZzogMTBweDsgfVxcblxcbi5lZGl0b3Itd3JhcHBlciB7XFxuICB3aWR0aDogMTAwdnc7XFxuICBoZWlnaHQ6IDEwMHZoO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgZGlzcGxheTogZmxleDsgfVxcblxcbi5lZGl0LWFyZWEge1xcbiAgZmxleDogMSAxIDUwJTtcXG4gIGJvcmRlci1yaWdodDogc29saWQgMXB4ICNmMWYxZjE7XFxuICAvKiAmOmFmdGVyLFxcbiAgICAmOmJlZm9yZSB7XFxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgICAgICBib3R0b206IDA7XFxuICAgICAgICBmb250LXNpemU6IDUwcHg7XFxuICAgICAgICBjb2xvcjogI2YxZjFmMTtcXG4gICAgICAgIHotaW5kZXg6IC0xO1xcbiAgICB9XFxuXFxuICAgICY6YmVmb3JlIHtcXG4gICAgICAgIHJpZ2h0OiA1MCU7XFxuICAgICAgICBjb250ZW50OiAnY3RybCArIHMg5L+d5a2YJztcXG4gICAgfVxcblxcbiAgICAmOmFmdGVye1xcbiAgICAgICAgbGVmdDogNTAlO1xcbiAgICAgICAgY29udGVudDogJ2N0cmwgKyBjIOmAgOWHuic7XFxuICAgIH0gKi8gfVxcblxcbi5wcmV2aWV3LWFyZWEge1xcbiAgZmxleDogMSAxIDUwJTtcXG4gIHBhZGRpbmc6IDEwcHg7XFxuICBvdmVyZmxvdzogYXV0bztcXG4gIGJhY2tncm91bmQ6ICNmMWYxZjE7IH1cXG5cXG4uYWN0aW9ucyB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBib3R0b206IDA7IH1cXG5cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vLi4vLi4vY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi8uLi8uLi9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vbWFpbi5zY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi8uLi8uLi9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uLy4uLy4uL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vLi4vLi4vc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL21haW4uc2Nzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uLy4uLy4uL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vLi4vLi4vLi4vc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL21haW4uc2Nzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsIid1c2Ugc3RyaWN0JztcbmltcG9ydCBpbml0R3VpIGZyb20gJy4vZ3VpL2luZGV4LmpzJ1xuaW1wb3J0IHskfSBmcm9tICdAemhvdWppYWhhby91dGlscyc7XG5cbmNvbnN0IGVkaXRvciA9IChzb3VyY2UsIG9uT2ssIG9uRXJyKSA9PiB7XG4gIGNvbnN0IHNvdXJjZUhUTUwgPSB3aW5kb3cuY29udmVydGVyLm1ha2VIdG1sKHNvdXJjZSk7XG4gIGNvbnN0ICRHVUkgPSAkKFwiI2d1aVwiKTtcbiAgY29uc3Qge1xuICAgICRlZGl0b3IsXG4gICAgJHByZXZpZXdcbiAgfSA9IGluaXRHdWkoJyNndWknLCBzb3VyY2UsIHNvdXJjZUhUTUwpO1xuXG4gIGNvbnN0IGhhbmRsZU9rID0gKCkgPT4ge1xuICAgIG9uT2soJGVkaXRvci52YWx1ZSk7XG4gICAgJEdVSS5jbGFzc0xpc3QucmVtb3ZlKCdvbicpO1xuICAgICRHVUkuaW5uZXJIVE1MID0gJyc7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2FuY2VsID0gKCkgPT4ge1xuICAgIG9uT2soJycpO1xuICAgICRHVUkuY2xhc3NMaXN0LnJlbW92ZSgnb24nKTtcbiAgICAkR1VJLmlubmVySFRNTCA9ICcnO1xuICB9O1xuXG4gICRlZGl0b3IuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgY29uc3Qge2tleSwgY3RybEtleX0gPSBlO1xuICAgIGNvbnN0IGlzU2F2ZSA9IGN0cmxLZXkgJiYga2V5ID09PSAncyc7XG4gICAgY29uc3QgaXNFeGl0ID0gY3RybEtleSAmJiBrZXkgPT09ICdjJztcbiAgICBpZiAoaXNTYXZlKSB7XG4gICAgICBoYW5kbGVPaygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXNFeGl0KSB7XG4gICAgICBoYW5kbGVDYW5jZWwoKTtcbiAgICB9XG4gIH0pO1xuICAkZWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAkcHJldmlldy5pbm5lckhUTUwgPSB3aW5kb3cuY29udmVydGVyLm1ha2VIdG1sKGUudGFyZ2V0LnZhbHVlKTtcbiAgfSlcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGVkaXRvcjtcbiIsImltcG9ydCAnLi9tYWluLnNjc3MnO1xuaW1wb3J0IHskfSBmcm9tICdAemhvdWppYWhhby91dGlscydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHNlbGVjdG9yLCBzb3VyY2UgPSAnJywgc291cmNlSFRNTCA9ICcnKSB7XG4gIGNvbnN0ICRHVUkgPSAkKHNlbGVjdG9yKTtcbiAgJEdVSS5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cImVkaXRvci13cmFwcGVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZWRpdC1hcmVhXCI+XG4gICAgICAgICAgPHRleHRhcmVhIGNsYXNzPVwiZWRpdG9yXCI+JHtzb3VyY2V9PC90ZXh0YXJlYT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInByZXZpZXctYXJlYVwiPjxkaXYgY2xhc3M9XCJtYXJrZG93bi1ib2R5XCI+JHtzb3VyY2VIVE1MfTwvZGl2PjwvZGl2PlxuICAgIDwvZGl2PiBcbiAgYDtcblxuICAkR1VJLmNsYXNzTGlzdC5hZGQoJ2VkaXRvcicpO1xuICAkR1VJLmNsYXNzTGlzdC5hZGQoJ29uJyk7XG5cbiAgY29uc3QgJGVkaXRvciA9ICQoXCJ0ZXh0YXJlYS5lZGl0b3JcIik7XG4gIGNvbnN0ICRwcmV2aWV3ID0gJChcIi5wcmV2aWV3LWFyZWFcIik7XG5cbiAgJGVkaXRvci5mb2N1cygpO1xuXG4gIHJldHVybiB7XG4gICAgJGVkaXRvcixcbiAgICAkcHJldmlldyxcbiAgfVxufSIsImltcG9ydCB7IHRvZGF5LCBzdG9yZSwgcmVxLCBiYXNlNjQgfSBmcm9tIFwiQHpob3VqaWFoYW8vdXRpbHNcIjtcblxuY29uc3QgUE9TVFNfVVJMID0gJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvempob3Uvbm90ZXMvY29udGVudHMvX3Bvc3RzJztcbmNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dodG9rZW4nKTtcblxuY29uc3QgbGlzdE5vdGVzID0gYXN5bmMgKCkgPT4ge1xuICBsZXQgbm90ZXMgPSBzdG9yZS5nZXQoJ25vdGVzJyk7XG4gIGlmICghbm90ZXMpIHtcbiAgICBub3RlcyA9IGF3YWl0IHJlcShQT1NUU19VUkwsICdHRVQnKTtcbiAgICBzdG9yZS5zZXQoJ25vdGVzJywgbm90ZXMpO1xuICB9XG4gIHJldHVybiBub3Rlcztcbn07XG5cbi8qKlxuICog5re75Yqg5LiA5p2h56yU6K6w5Yiw5LuT5bqT77yIempob3Uvbm90ZXPvvIlcbiAqIEBwYXJhbSBub3RlTmFtZSDnrJTorrDlkI3np7DvvIznn63mqKrnur/ov57mjqXlpJrkuKrlrZfnrKZcbiAqIEBwYXJhbSBub3RlQ29udGVudCDnrJTorrDlhoXlrrlcbiAqIEBwYXJhbSBkYXRlU3RyIOaXpeacn+Wtl+espuS4su+8jOagvOW8jyAnWVlZWS1NTS1ERCdcbiAqL1xuY29uc3QgYWRkTm90ZSA9IChub3RlTmFtZSwgbm90ZUNvbnRlbnQsIGRhdGVTdHIpID0+IHtcbiAgaWYgKCF0b2tlbikge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgncGxlYXNlIHNldCBQQVQgZmlyc3QhJyk7XG4gIH1cblxuICBjb25zdCBub3RlRmlsZU5hbWUgPSBgJHtkYXRlU3RyIHx8IHRvZGF5KCl9LSR7bm90ZU5hbWV9Lm1kYDtcbiAgY29uc3QgcmVxRW5kUG9pbnQgPSBgJHtQT1NUU19VUkx9LyR7bm90ZUZpbGVOYW1lfWA7XG4gIGNvbnN0IGNvbW1pdE9iaiA9IHtcbiAgICBtZXNzYWdlOiBgYWRkIG5vdGU6ICR7bm90ZUZpbGVOYW1lfWAsXG4gICAgY29tbWl0dGVyOiB7bmFtZTogJ3pqaG91JywgZW1haWw6ICd6QHpqaC5pbSd9LFxuICAgIGNvbnRlbnQ6IGJhc2U2NC5lbmNvZGUobm90ZUNvbnRlbnQpXG4gIH07XG5cbiAgcmV0dXJuIHJlcShcbiAgICByZXFFbmRQb2ludCxcbiAgICAnUFVUJyxcbiAgICBjb21taXRPYmosXG4gICAgdG9rZW5cbiAgKTtcbn07XG5cbi8qKlxuICog5pu05paw5oyH5a6a56yU6K6w77yIempob3Uvbm90ZXPvvIlcbiAqIEBwYXJhbSBub3RlTmFtZSDnrJTorrDlkI3np7DvvIznn63mqKrnur/ov57mjqXlpJrkuKrlrZfnrKZcbiAqIEBwYXJhbSBub3RlQ29udGVudCDnrJTorrDlhoXlrrlcbiAqL1xuY29uc3QgdXBkYXRlTm90ZSA9IGFzeW5jIChub3RlTmFtZSwgbm90ZUNvbnRlbnQpID0+IHtcbiAgaWYgKCF0b2tlbikge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgncGxlYXNlIHNldCBQQVQgZmlyc3QhJyk7XG4gIH1cblxuICBjb25zdCBub3RlcyA9IGF3YWl0IGxpc3ROb3RlcygpO1xuICBjb25zdCB0YXJnZXROb3RlID0gbm90ZXMuZmlsdGVyKCh7bmFtZX0pID0+IHtcbiAgICByZXR1cm4gbmFtZS5pbmNsdWRlcyhub3RlTmFtZSlcbiAgfSlbMF07XG5cbiAgaWYgKCF0YXJnZXROb3RlKSB7XG4gICAgdGhyb3cgJ+aXoOazleaJvuWIsOeslOiusCc7XG4gIH1cbiAgY29uc3Qge25hbWUsIHNoYX0gPSB0YXJnZXROb3RlO1xuICBjb25zdCByZXFFbmRQb2ludCA9IGAke1BPU1RTX1VSTH0vJHtuYW1lfWA7XG4gIGNvbnN0IGNvbW1pdE9iaiA9IHtcbiAgICBtZXNzYWdlOiBgdXBkYXRlIG5vdGU6ICR7bmFtZX1gLFxuICAgIGNvbnRlbnQ6IGJhc2U2NC5lbmNvZGUobm90ZUNvbnRlbnQpLFxuICAgIHNoYSxcbiAgICBjb21taXR0ZXI6IHtuYW1lOiAnempob3UnLCBlbWFpbDogJ3pAempoLmltJ30sXG4gIH07XG5cbiAgcmV0dXJuIHJlcShcbiAgICByZXFFbmRQb2ludCxcbiAgICAnUFVUJyxcbiAgICBjb21taXRPYmosXG4gICAgdG9rZW5cbiAgKTtcbn07XG5cbmNvbnN0IGRlbGV0ZU5vdGUgPSBhc3luYyAoZXhhY3RGaWxlTmFtZSkgPT4ge1xuICBpZiAoIXRva2VuKSB7XG4gICAgdGhyb3cgJ3BsZWFzZSBzZXQgUEFUIGZpcnN0ISdcbiAgfVxuICBjb25zdCBub3RlcyA9IGF3YWl0IGxpc3ROb3RlcygpO1xuICBjb25zdCB0YXJnZXROb3RlID0gbm90ZXMuZmlsdGVyKCh7bmFtZX0pID0+IHtcbiAgICByZXR1cm4gbmFtZSA9PT0gZXhhY3RGaWxlTmFtZVxuICB9KVswXTtcbiAgaWYgKCF0YXJnZXROb3RlKSB7XG4gICAgdGhyb3cgJ+aXoOazleaJvuWIsOeslOiusCc7XG4gIH1cbiAgY29uc3QgcGFyYW1PYmogPSB7XG4gICAgbWVzc2FnZTogYGRlbGV0ZSBub3RlOiAke2V4YWN0RmlsZU5hbWV9YCxcbiAgICBzaGE6IHRhcmdldE5vdGUuc2hhXG4gIH07XG4gIGNvbnN0IHRhcmdldFBhdGggPSBgJHtQT1NUU19VUkx9LyR7ZXhhY3RGaWxlTmFtZX1gO1xuICByZXR1cm4gcmVxKFxuICAgIHRhcmdldFBhdGgsXG4gICAgJ0RFTEVURScsXG4gICAgcGFyYW1PYmosXG4gICAgdG9rZW4sXG4gICkudGhlbigoKSA9PiB7XG4gICAgcmV0dXJuICfmiJDlip/liKDpmaTvvIEnXG4gIH0pO1xufTtcblxuY29uc3QgZmV0Y2hOb3RlQ29udGVudCA9IGFzeW5jIChub3RlTmFtZSkgPT4ge1xuICBpZiAoIW5vdGVOYW1lKSB7XG4gICAgdGhyb3cgJ+ivt+aMh+WumueslOiusOWQjeensCc7XG4gIH1cbiAgY29uc3Qgbm90ZXMgPSBhd2FpdCBsaXN0Tm90ZXMoKTtcbiAgY29uc3Qgbm90ZXNOYW1lQXJyID0gbm90ZXMubWFwKCh7bmFtZX0pID0+IG5hbWUudG9Mb3dlckNhc2UoKSk7XG4gIGNvbnN0IHRhcmdldE5vdGUgPSBub3Rlc05hbWVBcnIuZmlsdGVyKGNhbmRpID0+IHtcbiAgICByZXR1cm4gY2FuZGkuaW5jbHVkZXMobm90ZU5hbWUudG9Mb3dlckNhc2UoKSk7XG4gIH0pWzBdO1xuICBjb25zdCBub3RlVVJMID0gYCR7UE9TVFNfVVJMfS8ke3RhcmdldE5vdGV9YDtcbiAgY29uc3QgZW5jb2RlZE5vdGUgPSBhd2FpdCByZXEoXG4gICAgbm90ZVVSTCxcbiAgICAnR0VUJ1xuICApO1xuICByZXR1cm4gYmFzZTY0LmRlY29kZShlbmNvZGVkTm90ZS5jb250ZW50KTtcbn07XG5cbmV4cG9ydCB7XG4gIGFkZE5vdGUsIGRlbGV0ZU5vdGUsIGxpc3ROb3RlcywgdXBkYXRlTm90ZSwgZmV0Y2hOb3RlQ29udGVudFxufVxuIiwiaW1wb3J0IGVkaXRvciBmcm9tICcuL2VkaXRvci9pbmRleC5qcyc7XG5pbXBvcnQge2FkZE5vdGUsIHVwZGF0ZU5vdGV9IGZyb20gXCJAemhvdWppYWhhby9ub3RlYm9va1wiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHNob3J0b3B0czogJ246dScsXG4gIGhhbmRsZXIocGFyYW1PYmosIGNtZFNldCwgJHRlcm1pbmFsLCB7cmVzdFBhcmFtcywgZnJvbVBpcGV9KSB7XG4gICAgY29uc3QgZWRpdG9yUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHtuOiBmaWxlTmFtZSwgdTogaXNVcGRhdGV9ID0gcGFyYW1PYmo7XG4gICAgICBjb25zdCBoYW5kbGVPayA9IChjb250ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSBpc1VwZGF0ZSA/IHVwZGF0ZU5vdGUgOiBhZGROb3RlO1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBpc1VwZGF0ZSA/ICfmm7TmlrAnIDogJ+a3u+WKoCc7XG5cbiAgICAgICAgaGFuZGxlcihmaWxlTmFtZSwgY29udGVudClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKGDnrJTorrAke2FjdGlvbn3miJDlip/vvIFgKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgfTtcblxuICAgICAgaWYgKGZpbGVOYW1lKSB7XG4gICAgICAgIGVkaXRvcihpc1VwZGF0ZSA/IGZyb21QaXBlIDogJycsIGhhbmRsZU9rLCByZWplY3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWRpdG9yKHJlc3RQYXJhbXMgfHwgZnJvbVBpcGUsIHJlc29sdmUsIHJlamVjdClcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZWRpdG9yUHJvbWlzZTtcbiAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=