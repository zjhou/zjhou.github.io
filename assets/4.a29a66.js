(this.webpackJsonp=this.webpackJsonp||[]).push([[4],{"8oxB":function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,s=[],f=!1,l=-1;function p(){f&&u&&(f=!1,u.length?s=u.concat(s):l=-1,s.length&&d())}function d(){if(!f){var e=c(p);f=!0;for(var t=s.length;t;){for(u=s,s=[];++l<t;)u&&u[l].run();l=-1,t=s.length}u=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new h(e,t)),1!==s.length||f||c(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},N0Pr:function(e){e.exports={_from:"@zhoujiahao/pm@^1.0.33",_id:"@zhoujiahao/pm@1.0.35",_inBundle:!1,_integrity:"sha512-KSsri8Uh3GiJWflXfSlgTq4Kd3WkxhX3TUrX4E9X9Iy8OEIYCtsG9Ky11D5Z7ES8/uvJaVgcDMf8ttZW7wOwTA==",_location:"/@zhoujiahao/pm",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"@zhoujiahao/pm@^1.0.33",name:"@zhoujiahao/pm",escapedName:"@zhoujiahao%2fpm",scope:"@zhoujiahao",rawSpec:"^1.0.33",saveSpec:null,fetchSpec:"^1.0.33"},_requiredBy:["/@zhoujiahao/blog"],_resolved:"https://registry.npmjs.org/@zhoujiahao/pm/-/pm-1.0.35.tgz",_shasum:"30cb2f135aa32d15c062811c1073d9bcad94562b",_spec:"@zhoujiahao/pm@^1.0.33",_where:"/home/runner/work/zjh.im/zjh.im/node_modules/@zhoujiahao/blog",author:{name:"ZjHOU",email:"z@zjh.im"},bugs:{url:"https://github.com/zjhou/toyBox/issues"},bundleDependencies:!1,dependencies:{"@zhoujiahao/editor":"^1.1.11",imer:"^0.0.1","strapi-sdk-javascript":"^0.3.3"},deprecated:!1,description:"zjh.im - post manager",directories:{lib:"lib",test:"__tests__"},files:["lib"],gitHead:"965f9f595d00270b663b0d0cdaf1a0d438a8f412",homepage:"https://github.com/zjhou/toyBox#readme",keywords:["post","manager","pane.","editor.","code","mirror"],license:"ISC",main:"lib/index.js",name:"@zhoujiahao/pm",peerDependencies:{"@zhoujiahao/utils":"^1.0.14","@zhoujiahao/vendor":"^1.0.0"},publishConfig:{access:"public"},repository:{type:"git",url:"git+https://github.com/zjhou/toyBox.git"},scripts:{test:'echo "Error: run tests from root" && exit 1'},version:"1.0.35"}},"V/h/":function(e,t,n){"use strict";(function(e){var n,r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="undefined"!=typeof Symbol?Symbol("immer-nothing"):(o=!0,(r="immer-nothing")in(n={})?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n),u="undefined"!=typeof Symbol?Symbol("immer-state"):"__$immer_state";function s(e){return!!e&&!!e[u]}function f(e){if(!e)return!1;if("object"!==(void 0===e?"undefined":i(e)))return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var l=Object.assign||function(e,t){for(var n in t)h(t,n)&&(e[n]=t[n]);return e};function p(e){if(Array.isArray(e))return e.slice();var t=void 0===e.__proto__?Object.create(null):{};return l(t,e)}function d(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(n,e[n],e);else for(var r in e)t(r,e[r],e)}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function y(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function m(e,t,n,r){Array.isArray(e.base)?function(e,t,n,r){for(var o=e.base,i=e.copy,a=e.assigned,c=Math.min(o.length,i.length),u=0;u<c;u++)if(a[u]&&o[u]!==i[u]){var s=t.concat(u);n.push({op:"replace",path:s,value:i[u]}),r.push({op:"replace",path:s,value:o[u]})}if(c<i.length){for(var f=c;f<i.length;f++)n.push({op:"add",path:t.concat(f),value:i[f]});r.push({op:"replace",path:t.concat("length"),value:o.length})}else if(c<o.length){n.push({op:"replace",path:t.concat("length"),value:i.length});for(var l=c;l<o.length;l++)r.push({op:"add",path:t.concat(l),value:o[l]})}}(e,t,n,r):function(e,t,n,r){var o=e.base,i=e.copy;d(e.assigned,(function(e,a){var c=o[e],u=i[e],s=a?e in o?"replace":"add":"remove";if(c!==o||"replace"!==s){var f=t.concat(e);n.push("remove"===s?{op:s,path:f}:{op:s,path:f,value:u}),r.push("add"===s?{op:"remove",path:f}:"remove"===s?{op:"add",path:f,value:c}:{op:"replace",path:f,value:c})}}))}(e,t,n,r)}var v={},b=[],g=function(){return b[b.length-1]};function w(e,t){var n=void 0;if(s(e)){var r=e[u];r.finalizing=!0,n=p(r.draft),r.finalizing=!1}else n=p(e);d(e,(function(e){Object.defineProperty(n,""+e,function(e){return v[e]||(v[e]={configurable:!0,enumerable:!0,get:function(){return function(e,t){E(e);var n=j(e)[t];if(!e.finalizing&&n===e.base[t]&&f(n))return S(e),e.copy[t]=w(n,e);return n}(this[u],e)},set:function(t){!function(e,t,n){if(E(e),e.assigned[t]=!0,!e.modified){if(y(j(e)[t],n))return;P(e),S(e)}e.copy[t]=n}(this[u],e,t)}})}(""+e))}));var o={scope:t?t.scope:g(),modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:t,base:e,draft:n,copy:null,revoke:O,revoked:!1};return function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0})}(n,u,o),o.scope.push(o),n}function O(){this.revoked=!0}function j(e){return e.copy||e.base}function P(e){e.modified||(e.modified=!0,e.parent&&P(e.parent))}function S(e){e.copy||(e.copy=p(e.base))}function E(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(e.copy||e.base))}function z(e){for(var t=e.base,n=e.draft,r=Object.keys(n),o=r.length-1;o>=0;o--)if(void 0===t[r[o]]&&!h(t,r[o]))return!0;return r.length!==Object.keys(t).length}function T(e){var t=e.draft;if(t.length!==e.base.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var x=Object.freeze({scopes:b,currentScope:g,willFinalize:function(e,t,n){var r=g();r.forEach((function(e){return e.finalizing=!0})),void 0!==e&&e!==t||(n&&function e(t){if(!t||"object"!==(void 0===t?"undefined":i(t)))return;var n=t[u];if(!n)return;var r=n.base,o=n.draft,a=n.assigned;if(Array.isArray(t)){if(T(n)){if(P(n),a.length=!0,o.length<r.length)for(var c=o.length;c<r.length;c++)a[c]=!1;else for(var s=r.length;s<o.length;s++)a[s]=!0;for(var f=0;f<o.length;f++)void 0===a[f]&&e(o[f])}}else Object.keys(o).forEach((function(t){void 0!==r[t]||h(r,t)?a[t]||e(o[t]):(a[t]=!0,P(n))})),Object.keys(r).forEach((function(e){void 0!==o[e]||h(o,e)||(a[e]=!1,P(n))}))}(t),function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];!1===n.modified&&(Array.isArray(n.base)?T(n)&&P(n):z(n)&&P(n))}}(r))},createDraft:w}),k=[],_=function(){return k[k.length-1]};function A(e,t){var n={scope:t?t.scope:_(),modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null},r=Array.isArray(e)?Proxy.revocable([n],L):Proxy.revocable(n,I),o=r.revoke,i=r.proxy;return n.draft=i,n.revoke=o,n.scope.push(n),i}var I={get:function(e,t){if(t===u)return e;var n=e.drafts;if(!e.modified&&h(n,t))return n[t];var r=C(e)[t];if(e.finalized||!f(r))return r;if(e.modified){if(r!==e.base[t])return r;n=e.copy}return n[t]=A(r,e)},has:function(e,t){return t in C(e)},ownKeys:function(e){return Reflect.ownKeys(C(e))},set:function(e,t,n){if(!e.modified){if(n?y(e.base[t],n)||n===e.drafts[t]:y(e.base[t],n)&&t in e.base)return!0;D(e)}return e.assigned[t]=!0,e.copy[t]=n,!0},deleteProperty:function(e,t){(void 0!==e.base[t]||t in e.base)&&(e.assigned[t]=!1,D(e));e.copy&&delete e.copy[t];return!0},getOwnPropertyDescriptor:function(e,t){var n=e.modified?e.copy:h(e.drafts,t)?e.drafts:e.base,r=Reflect.getOwnPropertyDescriptor(n,t);!r||Array.isArray(n)&&"length"===t||(r.configurable=!0);return r},defineProperty:function(){throw new Error("Immer does not support defining properties on draft objects.")},setPrototypeOf:function(){throw new Error("Immer does not support `setPrototypeOf()`.")}},L={};function C(e){return e.copy||e.base}function D(e){e.modified||(e.modified=!0,e.copy=l(p(e.base),e.drafts),e.drafts=null,e.parent&&D(e.parent))}d(I,(function(e,t){L[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),L.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer does not support deleting properties from arrays: "+t);return I.deleteProperty.call(this,e[0],t)},L.set=function(e,t,n){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer does not support setting non-numeric properties on arrays: "+t);return I.set.call(this,e[0],t,n)};var R=Object.freeze({scopes:k,currentScope:_,willFinalize:function(){},createDraft:A});var N={useProxies:"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect,autoFreeze:void 0===e&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},F=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,N,t),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this)}return a(e,[{key:"produce",value:function(e,t,n){var r=this;if("function"==typeof e&&"function"!=typeof t){var o=t;return t=e,function(){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return r.produce(a,(function(e){var r;return(r=t).call.apply(r,[e,e].concat(n))}))}}if("function"!=typeof t)throw new Error("if first argument is not a function, the second argument to produce should be a function");if(void 0!==n&&"function"!=typeof n)throw new Error("the third argument of a producer should not be set or a function");var i=void 0;if(f(e))if(s(e)){if(void 0===(i=t.call(e,e)))return e}else{this.scopes.push([]);var a=this.createDraft(e);try{i=t.call(a,a),this.willFinalize(i,a,!!n);var l=n&&[],p=n&&[];if(void 0===i||i===a)i=this.finalize(a,[],l,p);else{if(a[u].modified)throw new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");f(i)&&(i=this.finalize(i)),n&&(l.push({op:"replace",path:[],value:i}),p.push({op:"replace",path:[],value:e}))}}finally{this.currentScope().forEach((function(e){return e.revoke()})),this.scopes.pop()}n&&n(l,p)}else if(void 0===(i=t(e)))return e;return i===c?void 0:i}},{key:"setAutoFreeze",value:function(e){this.autoFreeze=e}},{key:"setUseProxies",value:function(e){this.useProxies=e,l(this,e?R:x)}},{key:"finalize",value:function(e,t,n,r){var o=e[u];if(!o)return Object.isFrozen(e)?e:this.finalizeTree(e);if(o.scope!==this.currentScope())return e;if(!o.modified)return o.base;if(!o.finalized){if(o.finalized=!0,this.finalizeTree(o.draft,t,n,r),this.onDelete){var i=o.assigned;for(var a in i)i[a]||this.onDelete(o,a)}this.onCopy&&this.onCopy(o),this.autoFreeze&&1===this.scopes.length&&Object.freeze(o.copy),n&&m(o,t,n,r)}return o.copy}},{key:"finalizeTree",value:function(e,t,n,r){var o=this,i=e[u];i&&(e=this.useProxies?i.copy:i.copy=p(i.draft));var a=this.onAssign;return d(e,(function c(u,l,p){var h=!!i&&p===e;if(s(l)){if(p[u]=l=n&&h&&!i.assigned[u]?o.finalize(l,t.concat(u),n,r):o.finalize(l),h&&l===i.base[u])return}else{if(h&&y(l,i.base[u]))return;f(l)&&!Object.isFrozen(l)&&d(l,c)}h&&a&&a(i,u,l)})),e}}]),e}()),U=F.produce;U((function(e,t){for(var n=0;n<t.length;n++){var r=t[n],o=r.path;if(0===o.length&&"replace"===r.op)e=r.value;else{for(var a=e,c=0;c<o.length-1;c++)if(!(a=a[o[c]])||"object"!==(void 0===a?"undefined":i(a)))throw new Error("Cannot apply patch, path doesn't resolve: "+o.join("/"));var u=o[o.length-1];switch(r.op){case"replace":case"add":a[u]=r.value;break;case"remove":if(Array.isArray(a)){if(u!==a.length-1)throw new Error("Only the last index of an array can be removed, index: "+u+", length: "+a.length);a.length-=1}else delete a[u];break;default:throw new Error("Unsupported patch operation: "+r.op)}}}return e}));t.a=U}).call(this,n("8oxB"))},XXAI:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"set",(function(){return R})),n.d(r,"get",(function(){return N})),n.d(r,"remove",(function(){return J})),n.d(r,"list",(function(){return B})),n.d(r,"destroy",(function(){return V})),n.d(r,"withLocalList",(function(){return M}));var o=n("8RZD"),i=n("q1tI"),a=n.n(i),c=n("i8i4"),u=n.n(c),s=n("V/h/");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){h(o,n);var r=m(o);function o(){var e;l(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return w(b(e=r.call.apply(r,[this].concat(n))),"state",{component:null}),e}return d(o,[{key:"componentDidMount",value:function(){var t=this;e().then((function(e){t.setState({component:e.default})}))}},{key:"render",value:function(){var e=this.state.component;return e?a.a.createElement(e,this.props):t}}]),o}(i.Component)},j=function(e){var t=e.posts,n=e.activePostIdx,r=e.onTitleClick;return a.a.createElement("ul",null,t.map((function(e,t){var o=e.title,i=(e.id,e.postType,e.attachment_url,n===t);return a.a.createElement("li",{onClick:function(){r(t)},className:"".concat(i?"active":"")},a.a.createElement("span",{className:"title"},o))})))},P=function(e){var t=e.api,n=e.postListUpdater,r=e.Persistor,o=e.editingPost,i=e.refresh;return function(e,a){var c=e.error,u=e.success;e.warn;t.update(a.getOption("contentId"),a.doc.getValue(),o.title).then((function(e){r.remove(e.id),i(),e.postType="published",n((function(t){t.find((function(t){return t.id===e.id})).content=e.content})),u("博文已更新")})).catch((function(){c("博文更新失败")}))}},S=function(e,t){var n=e.Persistor,r=e.postListUpdater,o=e.api,i=e.active;return function(e,a){var c=e.error,u=e.success,s=(e.warn,a.getOption("contentId"));n.remove(s),r((function(e){return e.filter((function(e){return e.id!==s}))})),"draft"!==t?o.delete(s).then((function(){i(0),u("博文永久删除")})).catch((function(e){c("博文删除失败")})):u("博文已经删除")}},E=function(e){var t=e.Persistor,n=e.api,r=e.postListUpdater;return function(e,o){var i=e.error,a=e.success,c=(e.warn,o.getOption("newPostTitle")),u=o.getOption("contentId"),s=t.get(u).title,f=o.doc.getValue();c||s?f?n.create(c||s,f).then((function(e){t.remove(u),r((function(t){t[0]=e,t[0].postType="published"})),a("博文创建成功")})).catch((function(e){i("博文创建失败")})):i("内容不能为空!"):i("标题不能为空!")}},z=n("1EKS"),T=n.n(z),x=function(e){var t=e.Persistor,n=e.postListUpdater,r=e.active;return function(e,o,i){var a=e.error,c=(e.success,e.warn,i.argString&&i.argString.trim());if(c){o.setOption("newPostTitle",c);var u=T()(Date.now()).slice(16),s={title:c,id:u,postType:"draft",content:""};t.set(u,s),n((function(e){e.unshift(s)}),(function(){r(0)}))}else a("标题不能为空: new &lt;title&gt;")}},k=function(e,t){e.api,e.postListUpdater,e.active;var n=e.exit,r=(e.Persistor,function(e,n){return{draft:["publish"],published:["update"]}[t].includes(n)?e:function(e){(0,e.error)("非法命令")}});return[{name:"update",fn:r(P(e),"update")},{name:"deleteThisPostForever",fn:S(e,t)},{name:"publish",fn:r(E(e),"publish")},{name:"exit",fn:function(){n()}},{name:"new",fn:x(e)}]};function _(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=new RegExp("^pm-persistor-"),R=function(e,t){localStorage.setItem("pm-persistor-"+e,JSON.stringify(t)),localStorage.setItem("pm-time-stamp",Date.now())},N=function(e){if(e)return JSON.parse(localStorage.getItem("pm-persistor-"+e))},F=function(e){if(e)return JSON.parse(localStorage.getItem(e))},U=function(){return Object.keys(localStorage).filter((function(e){return D.test(e)}))},J=function(e){localStorage.removeItem("pm-persistor-"+e)},B=function(){return U().map(F)},M=function(e){var t=B(),n={};if(e.forEach((function(e){var t=e.id;n[t]=!0})),!e.length)return t.map((function(e){return L({postType:"draft"},e)}));var r=t.filter((function(e){var t=e.id;return!n[t]}));return[].concat(_(r.map((function(e){return L({postType:"draft"},e)}))),_(e.map((function(e){return L({postType:"published"},e)}))))},V=function(){U().forEach((function(e){localStorage.removeItem(e)}))};n("isNF");function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$(e);if(t){var o=$(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return W(this,n)}}function W(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?H(e):t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(c,e);var t,n,r,i=G(c);function c(){var e;X(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Q(H(e=i.call.apply(i,[this].concat(n))),"state",{file:null,uploading:!1}),Q(H(e),"uploadFile",(function(t){var n="".concat(e.props.fileId,"-").concat(t.name);e.setState({uploading:!0}),Object(o.k)("https://api.zjh.im/upload",t,"file",{id:n}).then((function(){e.setState({uploading:!1}),(e.props.onSuccess||function(){})("https://images-repo.sgp1.digitaloceanspaces.com/".concat(n))})).catch((function(){e.setState({uploading:!1})}))})),Q(H(e),"handleOnChooseFile",(function(){e.fileInput&&e.fileInput.click()})),Q(H(e),"handleFileSelect",(function(t){var n=t.target.files[0];n&&e.uploadFile(n)})),e}return t=c,(n=[{key:"render",value:function(){var e=this;return[a.a.createElement("input",{ref:function(t){return e.fileInput=t},type:"file",accept:this.props.accept,className:"file-input",onChange:this.handleFileSelect,onClick:function(e){e.target.value=null}}),this.props.children({select:this.handleOnChooseFile,uploading:this.state.uploading})]}}])&&Z(t.prototype,n),r&&Z(t,r),c}(a.a.PureComponent),ee=(n("o5JI"),function(e){var t=e.size,n=void 0===t?3:t;return a.a.createElement("div",{className:"bg-blink-dot",style:{width:n,height:n}})}),te=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M3 6.5V3.584c0-.51.022-1.062.363-1.44.157-.174.355-.288.59-.26C4.889 1.996 5 3.316 5 4.26v2.806c0 .788-.143 1.602-.673 2.184-.694.763-1.682 1.205-2.68.022C1.137 8.669 1 7.85 1 7.064V.5"}))};te.defaultProps={width:"6",height:"11",viewBox:"0 0 6 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var ne=function(e){var t=e.onSuccess,n=e.fileId,r=e.hasAttachAlready;return a.a.createElement(Y,{fileId:n,onSuccess:t},(function(e){var t=e.select,n=e.uploading;return a.a.createElement("span",{className:"actions ".concat(r?"hasAttach":""),onClick:t},n?a.a.createElement(ee,null):a.a.createElement(te,null))}))};function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se(e);if(t){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ce(this,n)}}function ce(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le="v".concat(n("N0Pr").version),pe=O((function(){return n.e(3).then(n.bind(null,"0BQj"))}),a.a.createElement("div",{style:{width:"calc(50% - 15px)",height:"100%",border:"dotted 1px #000",background:"#f0f0f0"}})),de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(c,e);var t,n,o,i=ae(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),fe(ue(t=i.call(this,e)),"active",(function(e){t.setState({activePostIdx:e})})),fe(ue(t),"updatePostList",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};Array.isArray(e)?t.setState({postList:e}):t.setState((function(t){return{postList:Object(s.a)(t.postList,e)}}),n)})),fe(ue(t),"buildEdtCls",(function(){var e=t.state.postList[t.state.activePostIdx]||t.state.postList[0],n=!!N(e.id),r="normal-file";return"draft"===e.postType&&n&&(r="new-file"),"published"===e.postType&&n&&(r="changed-file"),"editor-wrapper "+r})),fe(ue(t),"titleFormatter",(function(e){return"".concat(e.title)})),fe(ue(t),"refresh",(function(){t.setState({updateStamp:Date.now()})})),fe(ue(t),"getEditingPostTitle",(function(){return(t.state.postList[t.state.activePostIdx]||t.state.postList[0]).title})),fe(ue(t),"handleEditorContentChange",(function(e,n){var r=t.state.postList[t.state.activePostIdx]||t.state.postList[0];R(e,{title:t.getEditingPostTitle(),postType:r.type,id:e,content:n})})),fe(ue(t),"handleUploadFile",(function(e){return function(n){t.props.api.update(e,"","",n).then((function(){t.updatePostList((function(t){t.find((function(t){var n=t.id;return e===n})).attachment_url=n})),t.refresh()}))}})),fe(ue(t),"renderTitleList",(function(){return a.a.createElement("div",{className:"side-list-col"},a.a.createElement(j,{titles:t.state.postList.map(t.titleFormatter),update:t.props.api.update,postListUpdater:t.updatePostList,refresh:t.refresh,posts:t.state.postList,onTitleClick:t.active,activePostIdx:t.state.activePostIdx}))})),fe(ue(t),"renderAttachmentBtn",(function(){var e=t.state.postList[t.state.activePostIdx]||t.state.postList[0],n=e.id,r=e.postType,o=e.attachment_url;return"published"===r?a.a.createElement(ne,{fileId:n,hasAttachAlready:!!o,onSuccess:t.handleUploadFile(n)}):null})),fe(ue(t),"renderEditor",(function(){var e=t.state.postList[t.state.activePostIdx]||t.state.postList[0],n=N(e.id),o=n&&void 0!==n.content?n.content:e.content||"";return a.a.createElement("div",{className:t.buildEdtCls(),"data-v":le},a.a.createElement(pe,{value:o,contentId:e.id,backgroundColor:"#f2f2f2",onSave:t.handleEditorContentChange,exArr:k({api:t.props.api,postListUpdater:t.updatePostList,editingPost:e,refresh:t.refresh,active:t.active,exit:t.props.exit,Persistor:r},e.postType)}),t.renderAttachmentBtn(),e.attachment_url&&a.a.createElement("img",{src:e.attachment_url}))})),t.state={activePostIdx:0,updateStamp:Date.now(),postList:t.props.posts},t}return t=c,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return a.a.createElement("div",{className:"pane"},this.renderTitleList(),this.renderEditor())}}])&&oe(t.prototype,n),o&&oe(t,o),c}(a.a.PureComponent),he=(n("Zse/"),function(e){u.a.unmountComponentAtNode(e||Object(o.a)("#gui"))}),ye=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.dom||Object(o.a)("#gui");i.classList.add("fullscreen"),u.a.render(a.a.createElement(de,{posts:e,api:t,exit:n}),i)};function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge="https://api.zjh.im/z",we={create:"".concat(ge,"/post/create"),update:"".concat(ge,"/post/update"),delete:"".concat(ge,"/post/delete"),list:"".concat(ge,"/posts")},Oe=function(e){var t=e?{create:function(t,n){return Object(o.h)(we.create,"POST",ve({title:t,content:n},e))},update:function(t,n,r,i){return Object(o.h)(we.update,"POST",ve({id:t,title:r,content:n,attachment_url:i},e))},delete:function(t){return Object(o.h)(we.delete,"POST",ve({id:t},e))}}:{create:function(){return Promise.reject()},update:function(){return Promise.reject()},delete:function(){return Promise.reject()}};return ve({list:function(){return Object(o.i)(we.list)}},t)};function je(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var Pe,Se,Ee=Object(o.c)("pm","pm [access token]","posts manager for my blog."),ze=function(e){localStorage.setItem("p-c-key",JSON.stringify(e))};t.default={doc:Ee,shortopts:"e",handler:(Pe=regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.e){e.next=3;break}return he(),e.abrupt("return","Goodbye");case 3:return n=t.user&&t.password?{user:t.user,password:t.password}:JSON.parse(localStorage.getItem("p-c-key"))||null,ze(n),r=Oe(n),e.next=9,r.list();case 9:return i=e.sent,a=t.dom||Object(o.a)("#gui"),e.abrupt("return",new Promise((function(e,t){try{ye(M(i),r,(function(){e(),a.classList.remove("fullscreen"),setTimeout((function(){Terminal&&Terminal.exec("pm -e")}))}),{dom:a})}catch(e){return"Fail to fetch posts"}})));case 12:case"end":return e.stop()}}),e)})),Se=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=Pe.apply(e,t);function i(e){je(o,n,r,i,a,"next",e)}function a(e){je(o,n,r,i,a,"throw",e)}i(void 0)}))},function(e){return Se.apply(this,arguments)})}},"Zse/":function(e,t,n){},isNF:function(e,t,n){},o5JI:function(e,t,n){}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pbW1lci9kaXN0L2ltbWVyLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL2FzeW5jLWltcG9ydC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL3Bvc3QtbGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL2N1c3RvbS1lZGl0b3ItY29tbWFuZHMvY29tbWFuZHMvdXBkYXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AemhvdWppYWhhby9wbS9saWIvbWFuYWdlLXBhbmUvY3VzdG9tLWVkaXRvci1jb21tYW5kcy9jb21tYW5kcy9kZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B6aG91amlhaGFvL3BtL2xpYi9tYW5hZ2UtcGFuZS9jdXN0b20tZWRpdG9yLWNvbW1hbmRzL2NvbW1hbmRzL2NyZWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL2N1c3RvbS1lZGl0b3ItY29tbWFuZHMvY29tbWFuZHMvbmV3LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AemhvdWppYWhhby9wbS9saWIvbWFuYWdlLXBhbmUvY3VzdG9tLWVkaXRvci1jb21tYW5kcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL3BlcnNpc3Rvci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL3VwbG9hZGVyL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AemhvdWppYWhhby9wbS9saWIvdXRpbHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B6aG91amlhaGFvL3BtL2xpYi9tYW5hZ2UtcGFuZS9hdHRhY2htZW50LWJ0bi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL21hbmFnZS1wYW5lL3BhbmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B6aG91amlhaGFvL3BtL2xpYi9tYW5hZ2UtcGFuZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHpob3VqaWFoYW8vcG0vbGliL2Jsb2ctYXBpL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AemhvdWppYWhhby9wbS9saWIvaW5kZXguanMiXSwibmFtZXMiOlsiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsInByb2Nlc3MiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdFNldFRpbW91dCIsIkVycm9yIiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJzZXRUaW1lb3V0IiwiZSIsImNhbGwiLCJ0aGlzIiwiY2xlYXJUaW1lb3V0IiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJkcmFpbmluZyIsInF1ZXVlSW5kZXgiLCJjbGVhblVwTmV4dFRpY2siLCJsZW5ndGgiLCJjb25jYXQiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsImxlbiIsInJ1biIsIm1hcmtlciIsInJ1bkNsZWFyVGltZW91dCIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJuZXh0VGljayIsImFyZ3MiLCJBcnJheSIsImFyZ3VtZW50cyIsImkiLCJwdXNoIiwicHJvdG90eXBlIiwiYXBwbHkiLCJ0aXRsZSIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwibmFtZSIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwib2JqIiwia2V5IiwidmFsdWUiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsImNyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiQ29uc3RydWN0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJOT1RISU5HIiwiRFJBRlRfU1RBVEUiLCJpc0RyYWZ0IiwiaXNEcmFmdGFibGUiLCJpc0FycmF5IiwicHJvdG8iLCJnZXRQcm90b3R5cGVPZiIsImFzc2lnbiIsImhhcyIsInNoYWxsb3dDb3B5Iiwic2xpY2UiLCJ1bmRlZmluZWQiLCJfX3Byb3RvX18iLCJjcmVhdGUiLCJlYWNoIiwiY2IiLCJ0aGluZyIsInByb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImlzIiwieCIsInkiLCJnZW5lcmF0ZVBhdGNoZXMiLCJzdGF0ZSIsImJhc2VQYXRoIiwicGF0Y2hlcyIsImludmVyc2VQYXRjaGVzIiwiYmFzZSIsImNvcHkiLCJhc3NpZ25lZCIsIm1pbkxlbmd0aCIsIk1hdGgiLCJtaW4iLCJwYXRoIiwib3AiLCJfaSIsIl9pMiIsImdlbmVyYXRlQXJyYXlQYXRjaGVzIiwiYXNzaWduZWRWYWx1ZSIsIm9yaWdWYWx1ZSIsImdlbmVyYXRlT2JqZWN0UGF0Y2hlcyIsImRlc2NyaXB0b3JzIiwic2NvcGVzIiwiY3VycmVudFNjb3BlIiwiY3JlYXRlRHJhZnQiLCJwYXJlbnQiLCJkcmFmdCIsIl9zdGF0ZSIsImZpbmFsaXppbmciLCJnZXQiLCJhc3NlcnRVbnJldm9rZWQiLCJzb3VyY2UiLCJwcmVwYXJlQ29weSIsIl9nZXQiLCJzZXQiLCJtb2RpZmllZCIsIm1hcmtDaGFuZ2VkIiwiX3NldCIsImNyZWF0ZVByb3BlcnR5UHJveHkiLCJzY29wZSIsImZpbmFsaXplZCIsInJldm9rZSIsInJldm9rZWQiLCJjcmVhdGVIaWRkZW5Qcm9wZXJ0eSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoYXNPYmplY3RDaGFuZ2VzIiwia2V5cyIsImhhc0FycmF5Q2hhbmdlcyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImxlZ2FjeVByb3h5IiwiZnJlZXplIiwid2lsbEZpbmFsaXplIiwicmVzdWx0IiwiYmFzZURyYWZ0IiwibmVlZFBhdGNoZXMiLCJmb3JFYWNoIiwibWFya0NoYW5nZXNSZWN1cnNpdmVseSIsIm9iamVjdCIsIm1hcmtDaGFuZ2VzU3dlZXAiLCJzY29wZXMkMSIsImN1cnJlbnRTY29wZSQxIiwiY3JlYXRlRHJhZnQkMSIsImRyYWZ0cyIsIl9yZWYiLCJQcm94eSIsInJldm9jYWJsZSIsImFycmF5VHJhcHMiLCJvYmplY3RUcmFwcyIsInByb3h5Iiwic291cmNlJDEiLCJvd25LZXlzIiwiUmVmbGVjdCIsIm1hcmtDaGFuZ2VkJDEiLCJkZWxldGVQcm9wZXJ0eSIsIm93bmVyIiwic2V0UHJvdG90eXBlT2YiLCJmbiIsImlzTmFOIiwicGFyc2VJbnQiLCJtb2Rlcm5Qcm94eSIsImNvbmZpZ0RlZmF1bHRzIiwidXNlUHJveGllcyIsImF1dG9GcmVlemUiLCJvbkFzc2lnbiIsIm9uRGVsZXRlIiwib25Db3B5IiwiaW1tZXIiLCJJbW1lciIsImNvbmZpZyIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiY2xhc3NDYWxsQ2hlY2siLCJzZXRVc2VQcm94aWVzIiwicHJvZHVjZSIsImJpbmQiLCJyZWNpcGUiLCJwYXRjaExpc3RlbmVyIiwiX3RoaXMiLCJkZWZhdWx0QmFzZSIsIl9sZW4iLCJfa2V5IiwiX3JlY2lwZSIsImZpbmFsaXplIiwicG9wIiwiaXNGcm96ZW4iLCJmaW5hbGl6ZVRyZWUiLCJyb290IiwiX3RoaXMyIiwiZmluYWxpemVQcm9wZXJ0eSIsImluRHJhZnQiLCJwYXRjaCIsIl9pMyIsImpvaW4iLCJhc3luY0NvbXBvbmVudCIsImltcG9ydENvbXBvbmVudCIsImxvYWRlciIsImNvbXBvbmVudCIsInRoZW4iLCJjbXAiLCJzZXRTdGF0ZSIsIkMiLCJDb21wb25lbnQiLCJwb3N0cyIsImFjdGl2ZVBvc3RJZHgiLCJvblRpdGxlQ2xpY2siLCJtYXAiLCJpZHgiLCJpc0FjdGl2ZSIsImlkIiwicG9zdFR5cGUiLCJhdHRhY2htZW50X3VybCIsIm9uQ2xpY2siLCJjbGFzc05hbWUiLCJhcGkiLCJwb3N0TGlzdFVwZGF0ZXIiLCJQZXJzaXN0b3IiLCJlZGl0aW5nUG9zdCIsInJlZnJlc2giLCJjbSIsImVycm9yIiwic3VjY2VzcyIsIndhcm4iLCJ1cGRhdGUiLCJnZXRPcHRpb24iLCJkb2MiLCJnZXRWYWx1ZSIsIm5ld1Bvc3QiLCJyZW1vdmUiLCJvbGRQb3N0TGlzdCIsImZpbmQiLCJjb250ZW50IiwidHlwZSIsImFjdGl2ZSIsInBpZCIsImZpbHRlciIsInAiLCJ0bXBJZCIsInRtcFRpdGxlIiwicGFyYW1zIiwiYXJnU3RyaW5nIiwidHJpbSIsInNldE9wdGlvbiIsImhhc2giLCJEYXRlIiwibm93IiwidW5zaGlmdCIsImJ1aWxkRWRpdG9yQ29tbWFuZHMiLCJ0b29scyIsImV4aXQiLCJleEhhbmRsZXJWYWxpZGF0b3IiLCJleE5hbWUiLCJwdWJsaXNoZWQiLCJpbmNsdWRlcyIsImJ1aWxkVXBkYXRlQ21kIiwiYnVpbGREZWxldGVDbWQiLCJidWlsZENyZWF0ZUNtZCIsImJ1aWxkTmV3Q21kIiwiS0VZX1JFR19FWFAiLCJSZWdFeHAiLCJ2YWwiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwicGFyc2UiLCJnZXRJdGVtIiwiX2dldFBlcnNpc3RvcktleXMiLCJrIiwidGVzdCIsInJlbW92ZUl0ZW0iLCJsaXN0Iiwid2l0aExvY2FsTGlzdCIsImFyciIsImxvY2FsTGlzdCIsImlkTWFwIiwibmV3UG9zdHMiLCJkZXN0cm95IiwiVXBsb2FkZXIiLCJmaWxlIiwidXBsb2FkaW5nIiwiZmlsZUlkIiwidXBsb2FkRmlsZSIsIm9uU3VjY2VzcyIsImZpbGVJbnB1dCIsImNsaWNrIiwiZmlsZXMiLCJyZWYiLCJhY2NlcHQiLCJvbkNoYW5nZSIsImhhbmRsZUZpbGVTZWxlY3QiLCJjaGlsZHJlbiIsInNlbGVjdCIsImhhbmRsZU9uQ2hvb3NlRmlsZSIsIlJlYWN0IiwiUHVyZUNvbXBvbmVudCIsIkJsaW5rRG90Iiwic2l6ZSIsInN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJBdHRhY2htZW50SWNvbiIsIkF0dGFjaG1lbnRCdG4iLCJoYXNBdHRhY2hBbHJlYWR5IiwicmVxdWlyZSIsIkVkaXRvciIsIkFzeW5jSW1wb3J0IiwiYm9yZGVyIiwiYmFja2dyb3VuZCIsIlBhbmUiLCJ1cGRhdGVyRm4iLCJjYkZuIiwicG9zdExpc3QiLCJwcmV2U3RhdGUiLCJsb2NhbENoYW5nZXMiLCJ1cGRhdGVTdGFtcCIsImdldEVkaXRpbmdQb3N0VGl0bGUiLCJ1cmwiLCJ1cGRhdGVQb3N0TGlzdCIsInRhcmdldElkIiwidGl0bGVzIiwidGl0bGVGb3JtYXR0ZXIiLCJoYW5kbGVVcGxvYWRGaWxlIiwiaW5pdENvbnRlbnQiLCJidWlsZEVkdENscyIsImRhdGEtdiIsImNvbnRlbnRJZCIsImJhY2tncm91bmRDb2xvciIsIm9uU2F2ZSIsImhhbmRsZUVkaXRvckNvbnRlbnRDaGFuZ2UiLCJleEFyciIsImJ1aWxkRWRpdG9yRXhBcnIiLCJyZW5kZXJBdHRhY2htZW50QnRuIiwic3JjIiwicmVuZGVyVGl0bGVMaXN0IiwicmVuZGVyRWRpdG9yIiwidW5pbnN0YWxsIiwiZG9tIiwiUmVhY3RET00iLCJ1bm1vdW50Q29tcG9uZW50QXROb2RlIiwiJCIsIm9wdGlvbnMiLCIkZ3VpIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVuZGVyIiwiQkFTRV9VUkwiLCJBUEkiLCJkZWxldGUiLCJjcmVkZW50aWFsIiwiYWN0aW9uc05lZWRDcmVkZW50aWFsIiwicmVxIiwiYXR0YWNobWVudFVSTCIsIlByb21pc2UiLCJyZWplY3QiLCJyZXFBbmRDYWNoZSIsImRvY1RwbCIsInNhdmVDcmVkZW50aWFsIiwic2hvcnRvcHRzIiwiaGFuZGxlciIsInBhcmFtc09iaiIsInVzZXIiLCJwYXNzd29yZCIsInBvc3RTREsiLCJyZXNvbHZlIiwicnVuTWFuYWdlUGFuZWwiLCJUZXJtaW5hbCIsImV4ZWMiXSwibWFwcGluZ3MiOiIwRUFDQSxJQU9JQSxFQUNBQyxFQVJBQyxFQUFVQyxFQUFPQyxRQUFVLEdBVS9CLFNBQVNDLElBQ0wsTUFBTSxJQUFJQyxNQUFNLG1DQUVwQixTQUFTQyxJQUNMLE1BQU0sSUFBSUQsTUFBTSxxQ0FzQnBCLFNBQVNFLEVBQVdDLEdBQ2hCLEdBQUlULElBQXFCVSxXQUVyQixPQUFPQSxXQUFXRCxFQUFLLEdBRzNCLElBQUtULElBQXFCSyxJQUFxQkwsSUFBcUJVLFdBRWhFLE9BREFWLEVBQW1CVSxXQUNaQSxXQUFXRCxFQUFLLEdBRTNCLElBRUksT0FBT1QsRUFBaUJTLEVBQUssR0FDL0IsTUFBTUUsR0FDSixJQUVJLE9BQU9YLEVBQWlCWSxLQUFLLEtBQU1ILEVBQUssR0FDMUMsTUFBTUUsR0FFSixPQUFPWCxFQUFpQlksS0FBS0MsS0FBTUosRUFBSyxNQXZDbkQsV0FDRyxJQUVRVCxFQURzQixtQkFBZlUsV0FDWUEsV0FFQUwsRUFFekIsTUFBT00sR0FDTFgsRUFBbUJLLEVBRXZCLElBRVFKLEVBRHdCLG1CQUFqQmEsYUFDY0EsYUFFQVAsRUFFM0IsTUFBT0ksR0FDTFYsRUFBcUJNLEdBakI3QixHQXdFQSxJQUVJUSxFQUZBQyxFQUFRLEdBQ1JDLEdBQVcsRUFFWEMsR0FBYyxFQUVsQixTQUFTQyxJQUNBRixHQUFhRixJQUdsQkUsR0FBVyxFQUNQRixFQUFhSyxPQUNiSixFQUFRRCxFQUFhTSxPQUFPTCxHQUU1QkUsR0FBYyxFQUVkRixFQUFNSSxRQUNO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QUFPelYsR0FDUCxNQUFPLDJCQTdCSiwyQ0FBRixHLGlMQUFBLGdEIiwiZmlsZSI6IjQuYTI5YTY2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsInZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqO1xufSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG59O1xuXG5cblxuXG5cblxuXG5cblxuXG5cbnZhciBjbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59O1xuXG52YXIgY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gIH07XG59KCk7XG5cblxuXG5cblxudmFyIGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gKG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59O1xuXG52YXIgTk9USElORyA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgPyBTeW1ib2woXCJpbW1lci1ub3RoaW5nXCIpIDogZGVmaW5lUHJvcGVydHkoe30sIFwiaW1tZXItbm90aGluZ1wiLCB0cnVlKTtcblxudmFyIERSQUZUX1NUQVRFID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbChcImltbWVyLXN0YXRlXCIpIDogXCJfXyRpbW1lcl9zdGF0ZVwiO1xuXG5mdW5jdGlvbiBpc0RyYWZ0KHZhbHVlKSB7XG4gICAgcmV0dXJuICEhdmFsdWUgJiYgISF2YWx1ZVtEUkFGVF9TVEFURV07XG59XG5cbmZ1bmN0aW9uIGlzRHJhZnRhYmxlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICgodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YodmFsdWUpKSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHRydWU7XG4gICAgdmFyIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTtcbiAgICByZXR1cm4gcHJvdG8gPT09IG51bGwgfHwgcHJvdG8gPT09IE9iamVjdC5wcm90b3R5cGU7XG59XG5cbmZ1bmN0aW9uIG9yaWdpbmFsKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICYmIHZhbHVlW0RSQUZUX1NUQVRFXSkge1xuICAgICAgICByZXR1cm4gdmFsdWVbRFJBRlRfU1RBVEVdLmJhc2U7XG4gICAgfVxuICAgIC8vIG90aGVyd2lzZSByZXR1cm4gdW5kZWZpbmVkXG59XG5cbnZhciBhc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHZhbHVlKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgICAgIGlmIChoYXModmFsdWUsIGtleSkpIHtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gdmFsdWVba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufTtcblxuZnVuY3Rpb24gc2hhbGxvd0NvcHkodmFsdWUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHJldHVybiB2YWx1ZS5zbGljZSgpO1xuICAgIHZhciB0YXJnZXQgPSB2YWx1ZS5fX3Byb3RvX18gPT09IHVuZGVmaW5lZCA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiB7fTtcbiAgICByZXR1cm4gYXNzaWduKHRhcmdldCwgdmFsdWUpO1xufVxuXG5mdW5jdGlvbiBlYWNoKHZhbHVlLCBjYikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjYihpLCB2YWx1ZVtpXSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgICAgICAgICBjYihrZXksIHZhbHVlW2tleV0sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFzKHRoaW5nLCBwcm9wKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGluZywgcHJvcCk7XG59XG5cbmZ1bmN0aW9uIGlzKHgsIHkpIHtcbiAgICAvLyBGcm9tOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmJqcy9ibG9iL2M2OTkwNGE1MTFiOTAwMjY2OTM1MTY4MjIzMDYzZGQ4NzcyZGZjNDAvcGFja2FnZXMvZmJqcy9zcmMvY29yZS9zaGFsbG93RXF1YWwuanNcbiAgICBpZiAoeCA9PT0geSkge1xuICAgICAgICByZXR1cm4geCAhPT0gMCB8fCAxIC8geCA9PT0gMSAvIHk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHggIT09IHggJiYgeSAhPT0geTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlUGF0Y2hlcyhzdGF0ZSwgYmFzZVBhdGgsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKSB7XG4gICAgQXJyYXkuaXNBcnJheShzdGF0ZS5iYXNlKSA/IGdlbmVyYXRlQXJyYXlQYXRjaGVzKHN0YXRlLCBiYXNlUGF0aCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpIDogZ2VuZXJhdGVPYmplY3RQYXRjaGVzKHN0YXRlLCBiYXNlUGF0aCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUFycmF5UGF0Y2hlcyhzdGF0ZSwgYmFzZVBhdGgsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKSB7XG4gICAgdmFyIGJhc2UgPSBzdGF0ZS5iYXNlLFxuICAgICAgICBjb3B5ID0gc3RhdGUuY29weSxcbiAgICAgICAgYXNzaWduZWQgPSBzdGF0ZS5hc3NpZ25lZDtcblxuICAgIHZhciBtaW5MZW5ndGggPSBNYXRoLm1pbihiYXNlLmxlbmd0aCwgY29weS5sZW5ndGgpO1xuXG4gICAgLy8gTG9vayBmb3IgcmVwbGFjZWQgaW5kaWNlcy5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbkxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhc3NpZ25lZFtpXSAmJiBiYXNlW2ldICE9PSBjb3B5W2ldKSB7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IGJhc2VQYXRoLmNvbmNhdChpKTtcbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7IG9wOiBcInJlcGxhY2VcIiwgcGF0aDogcGF0aCwgdmFsdWU6IGNvcHlbaV0gfSk7XG4gICAgICAgICAgICBpbnZlcnNlUGF0Y2hlcy5wdXNoKHsgb3A6IFwicmVwbGFjZVwiLCBwYXRoOiBwYXRoLCB2YWx1ZTogYmFzZVtpXSB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIERpZCB0aGUgYXJyYXkgZXhwYW5kP1xuICAgIGlmIChtaW5MZW5ndGggPCBjb3B5Lmxlbmd0aCkge1xuICAgICAgICBmb3IgKHZhciBfaSA9IG1pbkxlbmd0aDsgX2kgPCBjb3B5Lmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBiYXNlUGF0aC5jb25jYXQoX2kpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBjb3B5W19pXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaW52ZXJzZVBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICBwYXRoOiBiYXNlUGF0aC5jb25jYXQoXCJsZW5ndGhcIiksXG4gICAgICAgICAgICB2YWx1ZTogYmFzZS5sZW5ndGhcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gLi4ub3IgZGlkIGl0IHNocmluaz9cbiAgICBlbHNlIGlmIChtaW5MZW5ndGggPCBiYXNlLmxlbmd0aCkge1xuICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogYmFzZVBhdGguY29uY2F0KFwibGVuZ3RoXCIpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBjb3B5Lmxlbmd0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaTIgPSBtaW5MZW5ndGg7IF9pMiA8IGJhc2UubGVuZ3RoOyBfaTIrKykge1xuICAgICAgICAgICAgICAgIGludmVyc2VQYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYmFzZVBhdGguY29uY2F0KF9pMiksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBiYXNlW19pMl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZU9iamVjdFBhdGNoZXMoc3RhdGUsIGJhc2VQYXRoLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcykge1xuICAgIHZhciBiYXNlID0gc3RhdGUuYmFzZSxcbiAgICAgICAgY29weSA9IHN0YXRlLmNvcHk7XG5cbiAgICBlYWNoKHN0YXRlLmFzc2lnbmVkLCBmdW5jdGlvbiAoa2V5LCBhc3NpZ25lZFZhbHVlKSB7XG4gICAgICAgIHZhciBvcmlnVmFsdWUgPSBiYXNlW2tleV07XG4gICAgICAgIHZhciB2YWx1ZSA9IGNvcHlba2V5XTtcbiAgICAgICAgdmFyIG9wID0gIWFzc2lnbmVkVmFsdWUgPyBcInJlbW92ZVwiIDoga2V5IGluIGJhc2UgPyBcInJlcGxhY2VcIiA6IFwiYWRkXCI7XG4gICAgICAgIGlmIChvcmlnVmFsdWUgPT09IGJhc2UgJiYgb3AgPT09IFwicmVwbGFjZVwiKSByZXR1cm47XG4gICAgICAgIHZhciBwYXRoID0gYmFzZVBhdGguY29uY2F0KGtleSk7XG4gICAgICAgIHBhdGNoZXMucHVzaChvcCA9PT0gXCJyZW1vdmVcIiA/IHsgb3A6IG9wLCBwYXRoOiBwYXRoIH0gOiB7IG9wOiBvcCwgcGF0aDogcGF0aCwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICBpbnZlcnNlUGF0Y2hlcy5wdXNoKG9wID09PSBcImFkZFwiID8geyBvcDogXCJyZW1vdmVcIiwgcGF0aDogcGF0aCB9IDogb3AgPT09IFwicmVtb3ZlXCIgPyB7IG9wOiBcImFkZFwiLCBwYXRoOiBwYXRoLCB2YWx1ZTogb3JpZ1ZhbHVlIH0gOiB7IG9wOiBcInJlcGxhY2VcIiwgcGF0aDogcGF0aCwgdmFsdWU6IG9yaWdWYWx1ZSB9KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYXBwbHlQYXRjaGVzKGRyYWZ0LCBwYXRjaGVzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwYXRjaCA9IHBhdGNoZXNbaV07XG4gICAgICAgIHZhciBwYXRoID0gcGF0Y2gucGF0aDtcblxuICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDAgJiYgcGF0Y2gub3AgPT09IFwicmVwbGFjZVwiKSB7XG4gICAgICAgICAgICBkcmFmdCA9IHBhdGNoLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGJhc2UgPSBkcmFmdDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IHBhdGgubGVuZ3RoIC0gMTsgX2kzKyspIHtcbiAgICAgICAgICAgICAgICBiYXNlID0gYmFzZVtwYXRoW19pM11dO1xuICAgICAgICAgICAgICAgIGlmICghYmFzZSB8fCAodHlwZW9mIGJhc2UgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihiYXNlKSkgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBhcHBseSBwYXRjaCwgcGF0aCBkb2Vzbid0IHJlc29sdmU6IFwiICsgcGF0aC5qb2luKFwiL1wiKSk7IC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGtleSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHN3aXRjaCAocGF0Y2gub3ApIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwicmVwbGFjZVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhZGRcIjpcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogYWRkIHN1cHBvcnQgaXMgbm90IGV4dGVuc2l2ZSwgaXQgZG9lcyBub3Qgc3VwcG9ydCBpbnNlcnRpb24gb3IgYC1gIGF0bSFcbiAgICAgICAgICAgICAgICAgICAgYmFzZVtrZXldID0gcGF0Y2gudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyZW1vdmVcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYmFzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgIT09IGJhc2UubGVuZ3RoIC0gMSkgdGhyb3cgbmV3IEVycm9yKFwiT25seSB0aGUgbGFzdCBpbmRleCBvZiBhbiBhcnJheSBjYW4gYmUgcmVtb3ZlZCwgaW5kZXg6IFwiICsga2V5ICsgXCIsIGxlbmd0aDogXCIgKyBiYXNlLmxlbmd0aCk7IC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZS5sZW5ndGggLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBiYXNlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgcGF0Y2ggb3BlcmF0aW9uOiBcIiArIHBhdGNoLm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZHJhZnQ7XG59XG5cbi8vIEB0cy1jaGVja1xuXG52YXIgZGVzY3JpcHRvcnMgPSB7fTtcblxuLy8gRm9yIG5lc3RlZCBwcm9kdWNlIGNhbGxzOlxudmFyIHNjb3BlcyA9IFtdO1xudmFyIGN1cnJlbnRTY29wZSA9IGZ1bmN0aW9uIGN1cnJlbnRTY29wZSgpIHtcbiAgICByZXR1cm4gc2NvcGVzW3Njb3Blcy5sZW5ndGggLSAxXTtcbn07XG5cbmZ1bmN0aW9uIHdpbGxGaW5hbGl6ZShyZXN1bHQsIGJhc2VEcmFmdCwgbmVlZFBhdGNoZXMpIHtcbiAgICB2YXIgc2NvcGUgPSBjdXJyZW50U2NvcGUoKTtcbiAgICBzY29wZS5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICByZXR1cm4gc3RhdGUuZmluYWxpemluZyA9IHRydWU7XG4gICAgfSk7XG4gICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkIHx8IHJlc3VsdCA9PT0gYmFzZURyYWZ0KSB7XG4gICAgICAgIGlmIChuZWVkUGF0Y2hlcykgbWFya0NoYW5nZXNSZWN1cnNpdmVseShiYXNlRHJhZnQpO1xuICAgICAgICAvLyBUaGlzIGlzIGZhc3RlciB3aGVuIHdlIGRvbid0IGNhcmUgYWJvdXQgd2hpY2ggYXR0cmlidXRlcyBjaGFuZ2VkLlxuICAgICAgICBtYXJrQ2hhbmdlc1N3ZWVwKHNjb3BlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURyYWZ0KGJhc2UsIHBhcmVudCkge1xuICAgIHZhciBkcmFmdCA9IHZvaWQgMDtcbiAgICBpZiAoaXNEcmFmdChiYXNlKSkge1xuICAgICAgICB2YXIgX3N0YXRlID0gYmFzZVtEUkFGVF9TVEFURV07XG4gICAgICAgIC8vIEF2b2lkIGNyZWF0aW5nIG5ldyBkcmFmdHMgd2hlbiBjb3B5aW5nLlxuICAgICAgICBfc3RhdGUuZmluYWxpemluZyA9IHRydWU7XG4gICAgICAgIGRyYWZ0ID0gc2hhbGxvd0NvcHkoX3N0YXRlLmRyYWZ0KTtcbiAgICAgICAgX3N0YXRlLmZpbmFsaXppbmcgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkcmFmdCA9IHNoYWxsb3dDb3B5KGJhc2UpO1xuICAgIH1cbiAgICBlYWNoKGJhc2UsIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkcmFmdCwgXCJcIiArIHByb3AsIGNyZWF0ZVByb3BlcnR5UHJveHkoXCJcIiArIHByb3ApKTtcbiAgICB9KTtcblxuICAgIC8vIFNlZSBcInByb3h5LmpzXCIgZm9yIHByb3BlcnR5IGRvY3VtZW50YXRpb24uXG4gICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBzY29wZTogcGFyZW50ID8gcGFyZW50LnNjb3BlIDogY3VycmVudFNjb3BlKCksXG4gICAgICAgIG1vZGlmaWVkOiBmYWxzZSxcbiAgICAgICAgZmluYWxpemluZzogZmFsc2UsIC8vIGVzNSBvbmx5XG4gICAgICAgIGZpbmFsaXplZDogZmFsc2UsXG4gICAgICAgIGFzc2lnbmVkOiB7fSxcbiAgICAgICAgcGFyZW50OiBwYXJlbnQsXG4gICAgICAgIGJhc2U6IGJhc2UsXG4gICAgICAgIGRyYWZ0OiBkcmFmdCxcbiAgICAgICAgY29weTogbnVsbCxcbiAgICAgICAgcmV2b2tlOiByZXZva2UsXG4gICAgICAgIHJldm9rZWQ6IGZhbHNlIC8vIGVzNSBvbmx5XG4gICAgfTtcblxuICAgIGNyZWF0ZUhpZGRlblByb3BlcnR5KGRyYWZ0LCBEUkFGVF9TVEFURSwgc3RhdGUpO1xuICAgIHN0YXRlLnNjb3BlLnB1c2goc3RhdGUpO1xuICAgIHJldHVybiBkcmFmdDtcbn1cblxuZnVuY3Rpb24gcmV2b2tlKCkge1xuICAgIHRoaXMucmV2b2tlZCA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIHNvdXJjZShzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5jb3B5IHx8IHN0YXRlLmJhc2U7XG59XG5cbmZ1bmN0aW9uIF9nZXQoc3RhdGUsIHByb3ApIHtcbiAgICBhc3NlcnRVbnJldm9rZWQoc3RhdGUpO1xuICAgIHZhciB2YWx1ZSA9IHNvdXJjZShzdGF0ZSlbcHJvcF07XG4gICAgLy8gRHJhZnRzIGFyZSBvbmx5IGNyZWF0ZWQgZm9yIHByb3h5YWJsZSB2YWx1ZXMgdGhhdCBleGlzdCBpbiB0aGUgYmFzZSBzdGF0ZS5cbiAgICBpZiAoIXN0YXRlLmZpbmFsaXppbmcgJiYgdmFsdWUgPT09IHN0YXRlLmJhc2VbcHJvcF0gJiYgaXNEcmFmdGFibGUodmFsdWUpKSB7XG4gICAgICAgIHByZXBhcmVDb3B5KHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlLmNvcHlbcHJvcF0gPSBjcmVhdGVEcmFmdCh2YWx1ZSwgc3RhdGUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIF9zZXQoc3RhdGUsIHByb3AsIHZhbHVlKSB7XG4gICAgYXNzZXJ0VW5yZXZva2VkKHN0YXRlKTtcbiAgICBzdGF0ZS5hc3NpZ25lZFtwcm9wXSA9IHRydWU7XG4gICAgaWYgKCFzdGF0ZS5tb2RpZmllZCkge1xuICAgICAgICBpZiAoaXMoc291cmNlKHN0YXRlKVtwcm9wXSwgdmFsdWUpKSByZXR1cm47XG4gICAgICAgIG1hcmtDaGFuZ2VkKHN0YXRlKTtcbiAgICAgICAgcHJlcGFyZUNvcHkoc3RhdGUpO1xuICAgIH1cbiAgICBzdGF0ZS5jb3B5W3Byb3BdID0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIG1hcmtDaGFuZ2VkKHN0YXRlKSB7XG4gICAgaWYgKCFzdGF0ZS5tb2RpZmllZCkge1xuICAgICAgICBzdGF0ZS5tb2RpZmllZCA9IHRydWU7XG4gICAgICAgIGlmIChzdGF0ZS5wYXJlbnQpIG1hcmtDaGFuZ2VkKHN0YXRlLnBhcmVudCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwcmVwYXJlQ29weShzdGF0ZSkge1xuICAgIGlmICghc3RhdGUuY29weSkgc3RhdGUuY29weSA9IHNoYWxsb3dDb3B5KHN0YXRlLmJhc2UpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9wZXJ0eVByb3h5KHByb3ApIHtcbiAgICByZXR1cm4gZGVzY3JpcHRvcnNbcHJvcF0gfHwgKGRlc2NyaXB0b3JzW3Byb3BdID0ge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9nZXQodGhpc1tEUkFGVF9TVEFURV0sIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMSh2YWx1ZSkge1xuICAgICAgICAgICAgX3NldCh0aGlzW0RSQUZUX1NUQVRFXSwgcHJvcCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGFzc2VydFVucmV2b2tlZChzdGF0ZSkge1xuICAgIGlmIChzdGF0ZS5yZXZva2VkID09PSB0cnVlKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgdXNlIGEgcHJveHkgdGhhdCBoYXMgYmVlbiByZXZva2VkLiBEaWQgeW91IHBhc3MgYW4gb2JqZWN0IGZyb20gaW5zaWRlIGFuIGltbWVyIGZ1bmN0aW9uIHRvIGFuIGFzeW5jIHByb2Nlc3M/IFwiICsgSlNPTi5zdHJpbmdpZnkoc3RhdGUuY29weSB8fCBzdGF0ZS5iYXNlKSk7XG59XG5cbi8vIFRoaXMgbG9va3MgZXhwZW5zaXZlLCBidXQgb25seSBwcm94aWVzIGFyZSB2aXNpdGVkLCBhbmQgb25seSBvYmplY3RzIHdpdGhvdXQga25vd24gY2hhbmdlcyBhcmUgc2Nhbm5lZC5cbmZ1bmN0aW9uIG1hcmtDaGFuZ2VzU3dlZXAoc2NvcGUpIHtcbiAgICAvLyBUaGUgbmF0dXJhbCBvcmRlciBvZiBkcmFmdHMgaW4gdGhlIGBzY29wZWAgYXJyYXkgaXMgYmFzZWQgb24gd2hlbiB0aGV5XG4gICAgLy8gd2VyZSBhY2Nlc3NlZC4gQnkgcHJvY2Vzc2luZyBkcmFmdHMgaW4gcmV2ZXJzZSBuYXR1cmFsIG9yZGVyLCB3ZSBoYXZlIGFcbiAgICAvLyBiZXR0ZXIgY2hhbmNlIG9mIHByb2Nlc3NpbmcgbGVhZiBub2RlcyBmaXJzdC4gV2hlbiBhIGxlYWYgbm9kZSBpcyBrbm93biB0b1xuICAgIC8vIGhhdmUgY2hhbmdlZCwgd2UgY2FuIGF2b2lkIGFueSB0cmF2ZXJzYWwgb2YgaXRzIGFuY2VzdG9yIG5vZGVzLlxuICAgIGZvciAodmFyIGkgPSBzY29wZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB2YXIgc3RhdGUgPSBzY29wZVtpXTtcbiAgICAgICAgaWYgKHN0YXRlLm1vZGlmaWVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3RhdGUuYmFzZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzQXJyYXlDaGFuZ2VzKHN0YXRlKSkgbWFya0NoYW5nZWQoc3RhdGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNPYmplY3RDaGFuZ2VzKHN0YXRlKSkgbWFya0NoYW5nZWQoc3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtYXJrQ2hhbmdlc1JlY3Vyc2l2ZWx5KG9iamVjdCkge1xuICAgIGlmICghb2JqZWN0IHx8ICh0eXBlb2Ygb2JqZWN0ID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yob2JqZWN0KSkgIT09IFwib2JqZWN0XCIpIHJldHVybjtcbiAgICB2YXIgc3RhdGUgPSBvYmplY3RbRFJBRlRfU1RBVEVdO1xuICAgIGlmICghc3RhdGUpIHJldHVybjtcbiAgICB2YXIgYmFzZSA9IHN0YXRlLmJhc2UsXG4gICAgICAgIGRyYWZ0ID0gc3RhdGUuZHJhZnQsXG4gICAgICAgIGFzc2lnbmVkID0gc3RhdGUuYXNzaWduZWQ7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkob2JqZWN0KSkge1xuICAgICAgICAvLyBMb29rIGZvciBhZGRlZCBrZXlzLlxuICAgICAgICBPYmplY3Qua2V5cyhkcmFmdCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAvLyBUaGUgYHVuZGVmaW5lZGAgY2hlY2sgaXMgYSBmYXN0IHBhdGggZm9yIHByZS1leGlzdGluZyBrZXlzLlxuICAgICAgICAgICAgaWYgKGJhc2Vba2V5XSA9PT0gdW5kZWZpbmVkICYmICFoYXMoYmFzZSwga2V5KSkge1xuICAgICAgICAgICAgICAgIGFzc2lnbmVkW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIG1hcmtDaGFuZ2VkKHN0YXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFzc2lnbmVkW2tleV0pIHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHVudG91Y2hlZCBwcm9wZXJ0aWVzIHRyaWdnZXIgcmVjdXJzaW9uLlxuICAgICAgICAgICAgICAgIG1hcmtDaGFuZ2VzUmVjdXJzaXZlbHkoZHJhZnRba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBMb29rIGZvciByZW1vdmVkIGtleXMuXG4gICAgICAgIE9iamVjdC5rZXlzKGJhc2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgLy8gVGhlIGB1bmRlZmluZWRgIGNoZWNrIGlzIGEgZmFzdCBwYXRoIGZvciBwcmUtZXhpc3Rpbmcga2V5cy5cbiAgICAgICAgICAgIGlmIChkcmFmdFtrZXldID09PSB1bmRlZmluZWQgJiYgIWhhcyhkcmFmdCwga2V5KSkge1xuICAgICAgICAgICAgICAgIGFzc2lnbmVkW2tleV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBtYXJrQ2hhbmdlZChzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaGFzQXJyYXlDaGFuZ2VzKHN0YXRlKSkge1xuICAgICAgICBtYXJrQ2hhbmdlZChzdGF0ZSk7XG4gICAgICAgIGFzc2lnbmVkLmxlbmd0aCA9IHRydWU7XG4gICAgICAgIGlmIChkcmFmdC5sZW5ndGggPCBiYXNlLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGRyYWZ0Lmxlbmd0aDsgaSA8IGJhc2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhc3NpZ25lZFtpXSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSBiYXNlLmxlbmd0aDsgX2kgPCBkcmFmdC5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhc3NpZ25lZFtfaV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IGRyYWZ0Lmxlbmd0aDsgX2kyKyspIHtcbiAgICAgICAgICAgIC8vIE9ubHkgdW50b3VjaGVkIGluZGljZXMgdHJpZ2dlciByZWN1cnNpb24uXG4gICAgICAgICAgICBpZiAoYXNzaWduZWRbX2kyXSA9PT0gdW5kZWZpbmVkKSBtYXJrQ2hhbmdlc1JlY3Vyc2l2ZWx5KGRyYWZ0W19pMl0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYXNPYmplY3RDaGFuZ2VzKHN0YXRlKSB7XG4gICAgdmFyIGJhc2UgPSBzdGF0ZS5iYXNlLFxuICAgICAgICBkcmFmdCA9IHN0YXRlLmRyYWZ0O1xuXG4gICAgLy8gU2VhcmNoIGZvciBhZGRlZCBrZXlzLiBTdGFydCBhdCB0aGUgYmFjaywgYmVjYXVzZSBub24tbnVtZXJpYyBrZXlzXG4gICAgLy8gYXJlIG9yZGVyZWQgYnkgdGltZSBvZiBkZWZpbml0aW9uIG9uIHRoZSBvYmplY3QuXG5cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRyYWZ0KTtcbiAgICBmb3IgKHZhciBpID0ga2V5cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAvLyBUaGUgYHVuZGVmaW5lZGAgY2hlY2sgaXMgYSBmYXN0IHBhdGggZm9yIHByZS1leGlzdGluZyBrZXlzLlxuICAgICAgICBpZiAoYmFzZVtrZXlzW2ldXSA9PT0gdW5kZWZpbmVkICYmICFoYXMoYmFzZSwga2V5c1tpXSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2luY2Ugbm8ga2V5cyBoYXZlIGJlZW4gYWRkZWQsIHdlIGNhbiBjb21wYXJlIGxlbmd0aHMgdG8ga25vdyBpZiBhblxuICAgIC8vIG9iamVjdCBoYXMgYmVlbiBkZWxldGVkLlxuICAgIHJldHVybiBrZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYmFzZSkubGVuZ3RoO1xufVxuXG5mdW5jdGlvbiBoYXNBcnJheUNoYW5nZXMoc3RhdGUpIHtcbiAgICB2YXIgZHJhZnQgPSBzdGF0ZS5kcmFmdDtcblxuICAgIGlmIChkcmFmdC5sZW5ndGggIT09IHN0YXRlLmJhc2UubGVuZ3RoKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBTZWUgIzExNlxuICAgIC8vIElmIHdlIGZpcnN0IHNob3J0ZW4gdGhlIGxlbmd0aCwgb3VyIGFycmF5IGludGVyY2VwdG9ycyB3aWxsIGJlIHJlbW92ZWQuXG4gICAgLy8gSWYgYWZ0ZXIgdGhhdCBuZXcgaXRlbXMgYXJlIGFkZGVkLCByZXN1bHQgaW4gdGhlIHNhbWUgb3JpZ2luYWwgbGVuZ3RoLFxuICAgIC8vIHRob3NlIGxhc3QgaXRlbXMgd2lsbCBoYXZlIG5vIGludGVyY2VwdGluZyBwcm9wZXJ0eS5cbiAgICAvLyBTbyBpZiB0aGVyZSBpcyBubyBvd24gZGVzY3JpcHRvciBvbiB0aGUgbGFzdCBwb3NpdGlvbiwgd2Uga25vdyB0aGF0IGl0ZW1zIHdlcmUgcmVtb3ZlZCBhbmQgYWRkZWRcbiAgICAvLyBOLkIuOiBzcGxpY2UsIHVuc2hpZnQsIGV0YyBvbmx5IHNoaWZ0IHZhbHVlcyBhcm91bmQsIGJ1dCBub3QgcHJvcCBkZXNjcmlwdG9ycywgc28gd2Ugb25seSBoYXZlIHRvIGNoZWNrXG4gICAgLy8gdGhlIGxhc3Qgb25lXG4gICAgdmFyIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGRyYWZ0LCBkcmFmdC5sZW5ndGggLSAxKTtcbiAgICAvLyBkZXNjcmlwdG9yIGNhbiBiZSBudWxsLCBidXQgb25seSBmb3IgbmV3bHkgY3JlYXRlZCBzcGFyc2UgYXJyYXlzLCBlZy4gbmV3IEFycmF5KDEwKVxuICAgIGlmIChkZXNjcmlwdG9yICYmICFkZXNjcmlwdG9yLmdldCkgcmV0dXJuIHRydWU7XG4gICAgLy8gRm9yIGFsbCBvdGhlciBjYXNlcywgd2UgZG9uJ3QgaGF2ZSB0byBjb21wYXJlLCBhcyB0aGV5IHdvdWxkIGhhdmUgYmVlbiBwaWNrZWQgdXAgYnkgdGhlIGluZGV4IHNldHRlcnNcbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUhpZGRlblByb3BlcnR5KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wLCB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG59XG5cblxuXG52YXIgbGVnYWN5UHJveHkgPSBPYmplY3QuZnJlZXplKHtcblx0c2NvcGVzOiBzY29wZXMsXG5cdGN1cnJlbnRTY29wZTogY3VycmVudFNjb3BlLFxuXHR3aWxsRmluYWxpemU6IHdpbGxGaW5hbGl6ZSxcblx0Y3JlYXRlRHJhZnQ6IGNyZWF0ZURyYWZ0XG59KTtcblxuLy8gQHRzLWNoZWNrXG5cbi8vIEZvciBuZXN0ZWQgcHJvZHVjZSBjYWxsczpcbnZhciBzY29wZXMkMSA9IFtdO1xudmFyIGN1cnJlbnRTY29wZSQxID0gZnVuY3Rpb24gY3VycmVudFNjb3BlKCkge1xuICAgIHJldHVybiBzY29wZXMkMVtzY29wZXMkMS5sZW5ndGggLSAxXTtcbn07XG5cbi8vIERvIG5vdGhpbmcgYmVmb3JlIGJlaW5nIGZpbmFsaXplZC5cbmZ1bmN0aW9uIHdpbGxGaW5hbGl6ZSQxKCkge31cblxuZnVuY3Rpb24gY3JlYXRlRHJhZnQkMShiYXNlLCBwYXJlbnQpIHtcbiAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIC8vIFRyYWNrIHdoaWNoIHByb2R1Y2UgY2FsbCB0aGlzIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAgICAgICAgc2NvcGU6IHBhcmVudCA/IHBhcmVudC5zY29wZSA6IGN1cnJlbnRTY29wZSQxKCksXG4gICAgICAgIC8vIFRydWUgZm9yIGJvdGggc2hhbGxvdyBhbmQgZGVlcCBjaGFuZ2VzLlxuICAgICAgICBtb2RpZmllZDogZmFsc2UsXG4gICAgICAgIC8vIFVzZWQgZHVyaW5nIGZpbmFsaXphdGlvbi5cbiAgICAgICAgZmluYWxpemVkOiBmYWxzZSxcbiAgICAgICAgLy8gVHJhY2sgd2hpY2ggcHJvcGVydGllcyBoYXZlIGJlZW4gYXNzaWduZWQgKHRydWUpIG9yIGRlbGV0ZWQgKGZhbHNlKS5cbiAgICAgICAgYXNzaWduZWQ6IHt9LFxuICAgICAgICAvLyBUaGUgcGFyZW50IGRyYWZ0IHN0YXRlLlxuICAgICAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICAgICAgLy8gVGhlIGJhc2Ugc3RhdGUuXG4gICAgICAgIGJhc2U6IGJhc2UsXG4gICAgICAgIC8vIFRoZSBiYXNlIHByb3h5LlxuICAgICAgICBkcmFmdDogbnVsbCxcbiAgICAgICAgLy8gQW55IHByb3BlcnR5IHByb3hpZXMuXG4gICAgICAgIGRyYWZ0czoge30sXG4gICAgICAgIC8vIFRoZSBiYXNlIGNvcHkgd2l0aCBhbnkgdXBkYXRlZCB2YWx1ZXMuXG4gICAgICAgIGNvcHk6IG51bGwsXG4gICAgICAgIC8vIENhbGxlZCBieSB0aGUgYHByb2R1Y2VgIGZ1bmN0aW9uLlxuICAgICAgICByZXZva2U6IG51bGxcbiAgICB9O1xuXG4gICAgdmFyIF9yZWYgPSBBcnJheS5pc0FycmF5KGJhc2UpID8gUHJveHkucmV2b2NhYmxlKFtzdGF0ZV0sIGFycmF5VHJhcHMpIDogUHJveHkucmV2b2NhYmxlKHN0YXRlLCBvYmplY3RUcmFwcyksXG4gICAgICAgIHJldm9rZSA9IF9yZWYucmV2b2tlLFxuICAgICAgICBwcm94eSA9IF9yZWYucHJveHk7XG5cbiAgICBzdGF0ZS5kcmFmdCA9IHByb3h5O1xuICAgIHN0YXRlLnJldm9rZSA9IHJldm9rZTtcblxuICAgIHN0YXRlLnNjb3BlLnB1c2goc3RhdGUpO1xuICAgIHJldHVybiBwcm94eTtcbn1cblxudmFyIG9iamVjdFRyYXBzID0ge1xuICAgIGdldDogZ2V0JDEsXG4gICAgaGFzOiBmdW5jdGlvbiBoYXMkJDEodGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgIHJldHVybiBwcm9wIGluIHNvdXJjZSQxKHRhcmdldCk7XG4gICAgfSxcbiAgICBvd25LZXlzOiBmdW5jdGlvbiBvd25LZXlzKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHNvdXJjZSQxKHRhcmdldCkpO1xuICAgIH0sXG5cbiAgICBzZXQ6IHNldCQxLFxuICAgIGRlbGV0ZVByb3BlcnR5OiBkZWxldGVQcm9wZXJ0eSxcbiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6IGdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgICBkZWZpbmVQcm9wZXJ0eTogZGVmaW5lUHJvcGVydHkkMSxcbiAgICBzZXRQcm90b3R5cGVPZjogZnVuY3Rpb24gc2V0UHJvdG90eXBlT2YoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkltbWVyIGRvZXMgbm90IHN1cHBvcnQgYHNldFByb3RvdHlwZU9mKClgLlwiKTtcbiAgICB9XG59O1xuXG52YXIgYXJyYXlUcmFwcyA9IHt9O1xuZWFjaChvYmplY3RUcmFwcywgZnVuY3Rpb24gKGtleSwgZm4pIHtcbiAgICBhcnJheVRyYXBzW2tleV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFyZ3VtZW50c1swXSA9IGFyZ3VtZW50c1swXVswXTtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn0pO1xuYXJyYXlUcmFwcy5kZWxldGVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChzdGF0ZSwgcHJvcCkge1xuICAgIGlmIChpc05hTihwYXJzZUludChwcm9wKSkpIHRocm93IG5ldyBFcnJvcihcIkltbWVyIGRvZXMgbm90IHN1cHBvcnQgZGVsZXRpbmcgcHJvcGVydGllcyBmcm9tIGFycmF5czogXCIgKyBwcm9wKTtcbiAgICByZXR1cm4gb2JqZWN0VHJhcHMuZGVsZXRlUHJvcGVydHkuY2FsbCh0aGlzLCBzdGF0ZVswXSwgcHJvcCk7XG59O1xuYXJyYXlUcmFwcy5zZXQgPSBmdW5jdGlvbiAoc3RhdGUsIHByb3AsIHZhbHVlKSB7XG4gICAgaWYgKHByb3AgIT09IFwibGVuZ3RoXCIgJiYgaXNOYU4ocGFyc2VJbnQocHJvcCkpKSB0aHJvdyBuZXcgRXJyb3IoXCJJbW1lciBkb2VzIG5vdCBzdXBwb3J0IHNldHRpbmcgbm9uLW51bWVyaWMgcHJvcGVydGllcyBvbiBhcnJheXM6IFwiICsgcHJvcCk7XG4gICAgcmV0dXJuIG9iamVjdFRyYXBzLnNldC5jYWxsKHRoaXMsIHN0YXRlWzBdLCBwcm9wLCB2YWx1ZSk7XG59O1xuXG5mdW5jdGlvbiBzb3VyY2UkMShzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5jb3B5IHx8IHN0YXRlLmJhc2U7XG59XG5cbmZ1bmN0aW9uIGdldCQxKHN0YXRlLCBwcm9wKSB7XG4gICAgaWYgKHByb3AgPT09IERSQUZUX1NUQVRFKSByZXR1cm4gc3RhdGU7XG4gICAgdmFyIGRyYWZ0cyA9IHN0YXRlLmRyYWZ0cztcblxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBkcmFmdCBpbiB1bm1vZGlmaWVkIHN0YXRlLlxuXG4gICAgaWYgKCFzdGF0ZS5tb2RpZmllZCAmJiBoYXMoZHJhZnRzLCBwcm9wKSkge1xuICAgICAgICByZXR1cm4gZHJhZnRzW3Byb3BdO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHNvdXJjZSQxKHN0YXRlKVtwcm9wXTtcbiAgICBpZiAoc3RhdGUuZmluYWxpemVkIHx8ICFpc0RyYWZ0YWJsZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcblxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBkcmFmdCBpbiBtb2RpZmllZCBzdGF0ZS5cbiAgICBpZiAoc3RhdGUubW9kaWZpZWQpIHtcbiAgICAgICAgLy8gQXNzaWduZWQgdmFsdWVzIGFyZSBuZXZlciBkcmFmdGVkLiBUaGlzIGNhdGNoZXMgYW55IGRyYWZ0cyB3ZSBjcmVhdGVkLCB0b28uXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gc3RhdGUuYmFzZVtwcm9wXSkgcmV0dXJuIHZhbHVlO1xuICAgICAgICAvLyBTdG9yZSBkcmFmdHMgb24gdGhlIGNvcHkgKHdoZW4gb25lIGV4aXN0cykuXG4gICAgICAgIGRyYWZ0cyA9IHN0YXRlLmNvcHk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRyYWZ0c1twcm9wXSA9IGNyZWF0ZURyYWZ0JDEodmFsdWUsIHN0YXRlKTtcbn1cblxuZnVuY3Rpb24gc2V0JDEoc3RhdGUsIHByb3AsIHZhbHVlKSB7XG4gICAgaWYgKCFzdGF0ZS5tb2RpZmllZCkge1xuICAgICAgICAvLyBPcHRpbWl6ZSBiYXNlZCBvbiB2YWx1ZSdzIHRydXRoaW5lc3MuIFRydXRoeSB2YWx1ZXMgYXJlIGd1YXJhbnRlZWQgdG9cbiAgICAgICAgLy8gbmV2ZXIgYmUgdW5kZWZpbmVkLCBzbyB3ZSBjYW4gYXZvaWQgdGhlIGBpbmAgb3BlcmF0b3IuIExhc3RseSwgdHJ1dGh5XG4gICAgICAgIC8vIHZhbHVlcyBtYXkgYmUgZHJhZnRzLCBidXQgZmFsc3kgdmFsdWVzIGFyZSBuZXZlciBkcmFmdHMuXG4gICAgICAgIHZhciBpc1VuY2hhbmdlZCA9IHZhbHVlID8gaXMoc3RhdGUuYmFzZVtwcm9wXSwgdmFsdWUpIHx8IHZhbHVlID09PSBzdGF0ZS5kcmFmdHNbcHJvcF0gOiBpcyhzdGF0ZS5iYXNlW3Byb3BdLCB2YWx1ZSkgJiYgcHJvcCBpbiBzdGF0ZS5iYXNlO1xuICAgICAgICBpZiAoaXNVbmNoYW5nZWQpIHJldHVybiB0cnVlO1xuICAgICAgICBtYXJrQ2hhbmdlZCQxKHN0YXRlKTtcbiAgICB9XG4gICAgc3RhdGUuYXNzaWduZWRbcHJvcF0gPSB0cnVlO1xuICAgIHN0YXRlLmNvcHlbcHJvcF0gPSB2YWx1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZGVsZXRlUHJvcGVydHkoc3RhdGUsIHByb3ApIHtcbiAgICAvLyBUaGUgYHVuZGVmaW5lZGAgY2hlY2sgaXMgYSBmYXN0IHBhdGggZm9yIHByZS1leGlzdGluZyBrZXlzLlxuICAgIGlmIChzdGF0ZS5iYXNlW3Byb3BdICE9PSB1bmRlZmluZWQgfHwgcHJvcCBpbiBzdGF0ZS5iYXNlKSB7XG4gICAgICAgIHN0YXRlLmFzc2lnbmVkW3Byb3BdID0gZmFsc2U7XG4gICAgICAgIG1hcmtDaGFuZ2VkJDEoc3RhdGUpO1xuICAgIH1cbiAgICBpZiAoc3RhdGUuY29weSkgZGVsZXRlIHN0YXRlLmNvcHlbcHJvcF07XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihzdGF0ZSwgcHJvcCkge1xuICAgIHZhciBvd25lciA9IHN0YXRlLm1vZGlmaWVkID8gc3RhdGUuY29weSA6IGhhcyhzdGF0ZS5kcmFmdHMsIHByb3ApID8gc3RhdGUuZHJhZnRzIDogc3RhdGUuYmFzZTtcbiAgICB2YXIgZGVzY3JpcHRvciA9IFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG93bmVyLCBwcm9wKTtcbiAgICBpZiAoZGVzY3JpcHRvciAmJiAhKEFycmF5LmlzQXJyYXkob3duZXIpICYmIHByb3AgPT09IFwibGVuZ3RoXCIpKSBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgcmV0dXJuIGRlc2NyaXB0b3I7XG59XG5cbmZ1bmN0aW9uIGRlZmluZVByb3BlcnR5JDEoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW1tZXIgZG9lcyBub3Qgc3VwcG9ydCBkZWZpbmluZyBwcm9wZXJ0aWVzIG9uIGRyYWZ0IG9iamVjdHMuXCIpO1xufVxuXG5mdW5jdGlvbiBtYXJrQ2hhbmdlZCQxKHN0YXRlKSB7XG4gICAgaWYgKCFzdGF0ZS5tb2RpZmllZCkge1xuICAgICAgICBzdGF0ZS5tb2RpZmllZCA9IHRydWU7XG4gICAgICAgIHN0YXRlLmNvcHkgPSBhc3NpZ24oc2hhbGxvd0NvcHkoc3RhdGUuYmFzZSksIHN0YXRlLmRyYWZ0cyk7XG4gICAgICAgIHN0YXRlLmRyYWZ0cyA9IG51bGw7XG4gICAgICAgIGlmIChzdGF0ZS5wYXJlbnQpIG1hcmtDaGFuZ2VkJDEoc3RhdGUucGFyZW50KTtcbiAgICB9XG59XG5cbnZhciBtb2Rlcm5Qcm94eSA9IE9iamVjdC5mcmVlemUoe1xuXHRzY29wZXM6IHNjb3BlcyQxLFxuXHRjdXJyZW50U2NvcGU6IGN1cnJlbnRTY29wZSQxLFxuXHR3aWxsRmluYWxpemU6IHdpbGxGaW5hbGl6ZSQxLFxuXHRjcmVhdGVEcmFmdDogY3JlYXRlRHJhZnQkMVxufSk7XG5cbmZ1bmN0aW9uIHZlcmlmeU1pbmlmaWVkKCkge31cblxudmFyIGNvbmZpZ0RlZmF1bHRzID0ge1xuICAgIHVzZVByb3hpZXM6IHR5cGVvZiBQcm94eSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIixcbiAgICBhdXRvRnJlZXplOiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA6IHZlcmlmeU1pbmlmaWVkLm5hbWUgPT09IFwidmVyaWZ5TWluaWZpZWRcIixcbiAgICBvbkFzc2lnbjogbnVsbCxcbiAgICBvbkRlbGV0ZTogbnVsbCxcbiAgICBvbkNvcHk6IG51bGxcbn07XG5cbnZhciBJbW1lciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbW1lcihjb25maWcpIHtcbiAgICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgSW1tZXIpO1xuXG4gICAgICAgIGFzc2lnbih0aGlzLCBjb25maWdEZWZhdWx0cywgY29uZmlnKTtcbiAgICAgICAgdGhpcy5zZXRVc2VQcm94aWVzKHRoaXMudXNlUHJveGllcyk7XG4gICAgICAgIHRoaXMucHJvZHVjZSA9IHRoaXMucHJvZHVjZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGNyZWF0ZUNsYXNzKEltbWVyLCBbe1xuICAgICAgICBrZXk6IFwicHJvZHVjZVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJvZHVjZShiYXNlLCByZWNpcGUsIHBhdGNoTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIGN1cnJpZWQgaW52b2NhdGlvblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBiYXNlID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIHJlY2lwZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRCYXNlID0gcmVjaXBlO1xuICAgICAgICAgICAgICAgIHJlY2lwZSA9IGJhc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGRlZmF1bHRCYXNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJvZHVjZShiYXNlLCBmdW5jdGlvbiAoZHJhZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVjaXBlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9yZWNpcGUgPSByZWNpcGUpLmNhbGwuYXBwbHkoX3JlY2lwZSwgW2RyYWZ0LCBkcmFmdF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNpcGUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yKFwiaWYgZmlyc3QgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24sIHRoZSBzZWNvbmQgYXJndW1lbnQgdG8gcHJvZHVjZSBzaG91bGQgYmUgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hMaXN0ZW5lciAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBwYXRjaExpc3RlbmVyICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcihcInRoZSB0aGlyZCBhcmd1bWVudCBvZiBhIHByb2R1Y2VyIHNob3VsZCBub3QgYmUgc2V0IG9yIGEgZnVuY3Rpb25cIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB2b2lkIDA7XG4gICAgICAgICAgICAvLyBPbmx5IGNyZWF0ZSBwcm94aWVzIGZvciBwbGFpbiBvYmplY3RzL2FycmF5cy5cbiAgICAgICAgICAgIGlmICghaXNEcmFmdGFibGUoYmFzZSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZWNpcGUoYmFzZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gYmFzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNlZSAjMTAwLCBkb24ndCBuZXN0IHByb2R1Y2Vyc1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNEcmFmdChiYXNlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZWNpcGUuY2FsbChiYXNlLCBiYXNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gYmFzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVGhlIGdpdmVuIHZhbHVlIG11c3QgYmUgcHJveGllZC5cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NvcGVzLnB1c2goW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2VEcmFmdCA9IHRoaXMuY3JlYXRlRHJhZnQoYmFzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlY2lwZS5jYWxsKGJhc2VEcmFmdCwgYmFzZURyYWZ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpbGxGaW5hbGl6ZShyZXN1bHQsIGJhc2VEcmFmdCwgISFwYXRjaExpc3RlbmVyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5ldmVyIGdlbmVyYXRlIHBhdGNoZXMgd2hlbiBubyBsaXN0ZW5lciBleGlzdHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGNoZXMgPSBwYXRjaExpc3RlbmVyICYmIFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlUGF0Y2hlcyA9IHBhdGNoTGlzdGVuZXIgJiYgW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5hbGl6ZSB0aGUgbW9kaWZpZWQgZHJhZnQuLi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQgfHwgcmVzdWx0ID09PSBiYXNlRHJhZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5maW5hbGl6ZShiYXNlRHJhZnQsIFtdLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC4uLm9yIHVzZSBhIHJlcGxhY2VtZW50IHZhbHVlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlcnMgbXVzdCBuZXZlciBtb2RpZnkgdGhlIGRyYWZ0IF9hbmRfIHJldHVybiBzb21ldGhpbmcgZWxzZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiYXNlRHJhZnRbRFJBRlRfU1RBVEVdLm1vZGlmaWVkKSB0aHJvdyBuZXcgRXJyb3IoXCJBbiBpbW1lciBwcm9kdWNlciByZXR1cm5lZCBhIG5ldyB2YWx1ZSAqYW5kKiBtb2RpZmllZCBpdHMgZHJhZnQuIEVpdGhlciByZXR1cm4gYSBuZXcgdmFsdWUgKm9yKiBtb2RpZnkgdGhlIGRyYWZ0LlwiKTsgLy8gcHJldHRpZXItaWdub3JlXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmFsaXplIHRoZSByZXBsYWNlbWVudCBpbiBjYXNlIGl0IGNvbnRhaW5zIChvciBpcykgYSBzdWJzZXQgb2YgdGhlIGRyYWZ0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRHJhZnRhYmxlKHJlc3VsdCkpIHJlc3VsdCA9IHRoaXMuZmluYWxpemUocmVzdWx0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGNoTGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXJzZVBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBiYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2NvcGUoKS5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUucmV2b2tlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY29wZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRjaExpc3RlbmVyICYmIHBhdGNoTGlzdGVuZXIocGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBOb3JtYWxpemUgdGhlIHJlc3VsdC5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgPT09IE5PVEhJTkcgPyB1bmRlZmluZWQgOiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJzZXRBdXRvRnJlZXplXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBdXRvRnJlZXplKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmF1dG9GcmVlemUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInNldFVzZVByb3hpZXNcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFVzZVByb3hpZXModmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudXNlUHJveGllcyA9IHZhbHVlO1xuICAgICAgICAgICAgYXNzaWduKHRoaXMsIHZhbHVlID8gbW9kZXJuUHJveHkgOiBsZWdhY3lQcm94eSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKiBGaW5hbGl6ZSBhIGRyYWZ0LCByZXR1cm5pbmcgZWl0aGVyIHRoZSB1bm1vZGlmaWVkIGJhc2Ugc3RhdGUgb3IgYSBtb2RpZmllZFxuICAgICAgICAgKiBjb3B5IG9mIHRoZSBiYXNlIHN0YXRlLlxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImZpbmFsaXplXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5hbGl6ZShkcmFmdCwgcGF0aCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IGRyYWZ0W0RSQUZUX1NUQVRFXTtcbiAgICAgICAgICAgIGlmICghc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzRnJvemVuKGRyYWZ0KSkgcmV0dXJuIGRyYWZ0O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmFsaXplVHJlZShkcmFmdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBOZXZlciBmaW5hbGl6ZSBkcmFmdHMgb3duZWQgYnkgYW4gb3V0ZXIgc2NvcGUuXG4gICAgICAgICAgICBpZiAoc3RhdGUuc2NvcGUgIT09IHRoaXMuY3VycmVudFNjb3BlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJhZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXN0YXRlLm1vZGlmaWVkKSByZXR1cm4gc3RhdGUuYmFzZTtcbiAgICAgICAgICAgIGlmICghc3RhdGUuZmluYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuZmluYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmFsaXplVHJlZShzdGF0ZS5kcmFmdCwgcGF0aCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9uRGVsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25lZCA9IHN0YXRlLmFzc2lnbmVkO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gYXNzaWduZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbmVkW3Byb3BdIHx8IHRoaXMub25EZWxldGUoc3RhdGUsIHByb3ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9uQ29weSkgdGhpcy5vbkNvcHkoc3RhdGUpO1xuXG4gICAgICAgICAgICAgICAgLy8gTmVzdGVkIHByb2R1Y2VycyBtdXN0IG5ldmVyIGF1dG8tZnJlZXplIHRoZWlyIHJlc3VsdCxcbiAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIGl0IG1heSBjb250YWluIGRyYWZ0cyBmcm9tIHBhcmVudCBwcm9kdWNlcnMuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b0ZyZWV6ZSAmJiB0aGlzLnNjb3Blcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZShzdGF0ZS5jb3B5KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hlcykgZ2VuZXJhdGVQYXRjaGVzKHN0YXRlLCBwYXRoLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuY29weTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqIEZpbmFsaXplIGFsbCBkcmFmdHMgaW4gdGhlIGdpdmVuIHN0YXRlIHRyZWUuXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZmluYWxpemVUcmVlXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5hbGl6ZVRyZWUocm9vdCwgcGF0aCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSByb290W0RSQUZUX1NUQVRFXTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgIHJvb3QgPSB0aGlzLnVzZVByb3hpZXMgPyBzdGF0ZS5jb3B5IDogc3RhdGUuY29weSA9IHNoYWxsb3dDb3B5KHN0YXRlLmRyYWZ0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG9uQXNzaWduID0gdGhpcy5vbkFzc2lnbjtcblxuICAgICAgICAgICAgdmFyIGZpbmFsaXplUHJvcGVydHkgPSBmdW5jdGlvbiBmaW5hbGl6ZVByb3BlcnR5KHByb3AsIHZhbHVlLCBwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGByb290YCBjYW4gYmUgYSBkcmFmdCBpbiBoZXJlLlxuICAgICAgICAgICAgICAgIHZhciBpbkRyYWZ0ID0gISFzdGF0ZSAmJiBwYXJlbnQgPT09IHJvb3Q7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNEcmFmdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFtwcm9wXSA9IHZhbHVlID1cbiAgICAgICAgICAgICAgICAgICAgLy8gUGF0Y2hlcyBhcmUgbmV2ZXIgZ2VuZXJhdGVkIGZvciBhc3NpZ25lZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICAgICAgICBwYXRjaGVzICYmIGluRHJhZnQgJiYgIXN0YXRlLmFzc2lnbmVkW3Byb3BdID8gX3RoaXMyLmZpbmFsaXplKHZhbHVlLCBwYXRoLmNvbmNhdChwcm9wKSwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpIDogX3RoaXMyLmZpbmFsaXplKHZhbHVlKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBVbmNoYW5nZWQgZHJhZnRzIGFyZSBpZ25vcmVkLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5EcmFmdCAmJiB2YWx1ZSA9PT0gc3RhdGUuYmFzZVtwcm9wXSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBVbmNoYW5nZWQgZHJhZnQgcHJvcGVydGllcyBhcmUgaWdub3JlZC5cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpbkRyYWZ0ICYmIGlzKHZhbHVlLCBzdGF0ZS5iYXNlW3Byb3BdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFNlYXJjaCBuZXcgb2JqZWN0cyBmb3IgdW5maW5hbGl6ZWQgZHJhZnRzLiBGcm96ZW4gb2JqZWN0cyBzaG91bGQgbmV2ZXIgY29udGFpbiBkcmFmdHMuXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzRHJhZnRhYmxlKHZhbHVlKSAmJiAhT2JqZWN0LmlzRnJvemVuKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhY2godmFsdWUsIGZpbmFsaXplUHJvcGVydHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGluRHJhZnQgJiYgb25Bc3NpZ24pIHtcbiAgICAgICAgICAgICAgICAgICAgb25Bc3NpZ24oc3RhdGUsIHByb3AsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBlYWNoKHJvb3QsIGZpbmFsaXplUHJvcGVydHkpO1xuICAgICAgICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgICAgIH1cbiAgICB9XSk7XG4gICAgcmV0dXJuIEltbWVyO1xufSgpO1xuXG52YXIgaW1tZXIgPSBuZXcgSW1tZXIoKTtcblxuLyoqXG4gKiBUaGUgYHByb2R1Y2VgIGZ1bmN0aW9uIHRha2VzIGEgdmFsdWUgYW5kIGEgXCJyZWNpcGUgZnVuY3Rpb25cIiAod2hvc2VcbiAqIHJldHVybiB2YWx1ZSBvZnRlbiBkZXBlbmRzIG9uIHRoZSBiYXNlIHN0YXRlKS4gVGhlIHJlY2lwZSBmdW5jdGlvbiBpc1xuICogZnJlZSB0byBtdXRhdGUgaXRzIGZpcnN0IGFyZ3VtZW50IGhvd2V2ZXIgaXQgd2FudHMuIEFsbCBtdXRhdGlvbnMgYXJlXG4gKiBvbmx5IGV2ZXIgYXBwbGllZCB0byBhIF9fY29weV9fIG9mIHRoZSBiYXNlIHN0YXRlLlxuICpcbiAqIFBhc3Mgb25seSBhIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIFwiY3VycmllZCBwcm9kdWNlclwiIHdoaWNoIHJlbGlldmVzIHlvdVxuICogZnJvbSBwYXNzaW5nIHRoZSByZWNpcGUgZnVuY3Rpb24gZXZlcnkgdGltZS5cbiAqXG4gKiBPbmx5IHBsYWluIG9iamVjdHMgYW5kIGFycmF5cyBhcmUgbWFkZSBtdXRhYmxlLiBBbGwgb3RoZXIgb2JqZWN0cyBhcmVcbiAqIGNvbnNpZGVyZWQgdW5jb3B5YWJsZS5cbiAqXG4gKiBOb3RlOiBUaGlzIGZ1bmN0aW9uIGlzIF9fYm91bmRfXyB0byBpdHMgYEltbWVyYCBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge2FueX0gYmFzZSAtIHRoZSBpbml0aWFsIHN0YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9kdWNlciAtIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSBwcm94eSBvZiB0aGUgYmFzZSBzdGF0ZSBhcyBmaXJzdCBhcmd1bWVudCBhbmQgd2hpY2ggY2FuIGJlIGZyZWVseSBtb2RpZmllZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGF0Y2hMaXN0ZW5lciAtIG9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2l0aCBhbGwgdGhlIHBhdGNoZXMgcHJvZHVjZWQgaGVyZVxuICogQHJldHVybnMge2FueX0gYSBuZXcgc3RhdGUsIG9yIHRoZSBpbml0aWFsIHN0YXRlIGlmIG5vdGhpbmcgd2FzIG1vZGlmaWVkXG4gKi9cbnZhciBwcm9kdWNlID0gaW1tZXIucHJvZHVjZTtcbi8qKlxuICogUGFzcyB0cnVlIHRvIGF1dG9tYXRpY2FsbHkgZnJlZXplIGFsbCBjb3BpZXMgY3JlYXRlZCBieSBJbW1lci5cbiAqXG4gKiBCeSBkZWZhdWx0LCBhdXRvLWZyZWV6aW5nIGlzIGRpc2FibGVkIGluIHByb2R1Y3Rpb24uXG4gKi9cbnZhciBzZXRBdXRvRnJlZXplID0gZnVuY3Rpb24gc2V0QXV0b0ZyZWV6ZSh2YWx1ZSkge1xuICByZXR1cm4gaW1tZXIuc2V0QXV0b0ZyZWV6ZSh2YWx1ZSk7XG59O1xuXG4vKipcbiAqIFBhc3MgdHJ1ZSB0byB1c2UgdGhlIEVTMjAxNSBgUHJveHlgIGNsYXNzIHdoZW4gY3JlYXRpbmcgZHJhZnRzLCB3aGljaCBpc1xuICogYWx3YXlzIGZhc3RlciB0aGFuIHVzaW5nIEVTNSBwcm94aWVzLlxuICpcbiAqIEJ5IGRlZmF1bHQsIGZlYXR1cmUgZGV0ZWN0aW9uIGlzIHVzZWQsIHNvIGNhbGxpbmcgdGhpcyBpcyByYXJlbHkgbmVjZXNzYXJ5LlxuICovXG52YXIgc2V0VXNlUHJveGllcyA9IGZ1bmN0aW9uIHNldFVzZVByb3hpZXModmFsdWUpIHtcbiAgcmV0dXJuIGltbWVyLnNldFVzZVByb3hpZXModmFsdWUpO1xufTtcblxuLyoqXG4gKiBBcHBseSBhbiBhcnJheSBvZiBJbW1lciBwYXRjaGVzIHRvIHRoZSBmaXJzdCBhcmd1bWVudC5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGEgcHJvZHVjZXIsIHdoaWNoIG1lYW5zIGNvcHktb24td3JpdGUgaXMgaW4gZWZmZWN0LlxuICovXG52YXIgYXBwbHlQYXRjaGVzJDEgPSBwcm9kdWNlKGFwcGx5UGF0Y2hlcyk7XG5cbmV4cG9ydCB7IHByb2R1Y2UsIHNldEF1dG9GcmVlemUsIHNldFVzZVByb3hpZXMsIGFwcGx5UGF0Y2hlcyQxIGFzIGFwcGx5UGF0Y2hlcywgSW1tZXIsIG9yaWdpbmFsLCBpc0RyYWZ0LCBOT1RISU5HIGFzIG5vdGhpbmcgfTtcbmV4cG9ydCBkZWZhdWx0IHByb2R1Y2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbW1lci5tb2R1bGUuanMubWFwXG4iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcblxuY29uc3QgYXN5bmNDb21wb25lbnQgPSAoaW1wb3J0Q29tcG9uZW50LCBsb2FkZXIgPSBudWxsKSA9PiB7XG4gIHJldHVybiBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGUgPSB7XG4gICAgICBjb21wb25lbnQ6IG51bGxcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIGltcG9ydENvbXBvbmVudCgpXG4gICAgICAgIC50aGVuKGNtcCA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y29tcG9uZW50OiBjbXAuZGVmYXVsdH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICBjb25zdCBDID0gdGhpcy5zdGF0ZS5jb21wb25lbnQ7XG4gICAgICByZXR1cm4gQyA/IDxDIHsuLi50aGlzLnByb3BzfS8+IDogbG9hZGVyO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmNDb21wb25lbnQ7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmV4cG9ydCBkZWZhdWx0IChwcm9wcykgPT4ge1xuICBjb25zdCB7XG4gICAgcG9zdHMsXG4gICAgYWN0aXZlUG9zdElkeCxcbiAgICBvblRpdGxlQ2xpY2ssXG4gIH0gPSBwcm9wcztcblxuICByZXR1cm4gKFxuICAgIDx1bD5cbiAgICAgICAge1xuICAgICAgICAgIHBvc3RzLm1hcCgoeyB0aXRsZSwgaWQsIHBvc3RUeXBlOiB0eXBlLCBhdHRhY2htZW50X3VybH0sIGlkeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBhY3RpdmVQb3N0SWR4ID09PSBpZHg7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7b25UaXRsZUNsaWNrKGlkeCl9fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7aXNBY3RpdmUgPyAnYWN0aXZlJyA6ICcnfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0aXRsZVwiPlxuICAgICAgICAgICAgICAgICAge3RpdGxlfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgPC91bD5cbiAgKVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgKHsgYXBpLCBwb3N0TGlzdFVwZGF0ZXIsIFBlcnNpc3RvciwgZWRpdGluZ1Bvc3QsIHJlZnJlc2h9KSA9PiAoe2Vycm9yLCBzdWNjZXNzLCB3YXJufSwgY20pID0+IHtcbiAgYXBpLnVwZGF0ZShjbS5nZXRPcHRpb24oJ2NvbnRlbnRJZCcpLCBjbS5kb2MuZ2V0VmFsdWUoKSwgZWRpdGluZ1Bvc3QudGl0bGUpXG4gICAgLnRoZW4oKG5ld1Bvc3QpID0+IHtcbiAgICAgIFBlcnNpc3Rvci5yZW1vdmUobmV3UG9zdC5pZCk7XG4gICAgICByZWZyZXNoKCk7XG4gICAgICBuZXdQb3N0LnBvc3RUeXBlID0gJ3B1Ymxpc2hlZCc7XG4gICAgICBwb3N0TGlzdFVwZGF0ZXIoKG9sZFBvc3RMaXN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHBvc3QgPSBvbGRQb3N0TGlzdFxuICAgICAgICAgIC5maW5kKCh7IGlkIH0pID0+IGlkID09PSBuZXdQb3N0LmlkKTtcblxuICAgICAgICBwb3N0LmNvbnRlbnQgPSBuZXdQb3N0LmNvbnRlbnRcbiAgICAgIH0pO1xuICAgICAgc3VjY2Vzcygn5Y2a5paH5bey5pu05pawJylcbiAgICB9KVxuICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICBlcnJvcign5Y2a5paH5pu05paw5aSx6LSlJylcbiAgICB9KTtcbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgKHsgUGVyc2lzdG9yLCBwb3N0TGlzdFVwZGF0ZXIsIGFwaSwgYWN0aXZlfSwgdHlwZSkgPT5cbiAgKHtlcnJvciwgc3VjY2Vzcywgd2Fybn0sIGNtKSA9PiB7XG4gICAgY29uc3QgcGlkID0gY20uZ2V0T3B0aW9uKCdjb250ZW50SWQnKTtcbiAgICBQZXJzaXN0b3IucmVtb3ZlKHBpZCk7XG4gICAgcG9zdExpc3RVcGRhdGVyKChvbGRQb3N0TGlzdCkgPT4ge1xuICAgICAgcmV0dXJuIG9sZFBvc3RMaXN0LmZpbHRlcihwID0+IHAuaWQgIT09IHBpZCk7XG4gICAgfSk7XG5cbiAgICBpZih0eXBlID09PSAnZHJhZnQnKSB7XG4gICAgICBzdWNjZXNzKCfljZrmloflt7Lnu4/liKDpmaQnKVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGFwaS5kZWxldGUocGlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBhY3RpdmUoMCk7XG4gICAgICAgIHN1Y2Nlc3MoJ+WNmuaWh+awuOS5heWIoOmZpCcpXG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGVycm9yKCfljZrmlofliKDpmaTlpLHotKUnKTtcbiAgICAgIH0pO1xuICB9XG5cbiIsImV4cG9ydCBkZWZhdWx0ICh7IFBlcnNpc3RvciwgYXBpLCBwb3N0TGlzdFVwZGF0ZXIgfSkgPT4gXG4gICh7ZXJyb3IsIHN1Y2Nlc3MsIHdhcm59LCBjbSkgPT4ge1xuICAgIGNvbnN0IHRpdGxlID0gY20uZ2V0T3B0aW9uKCduZXdQb3N0VGl0bGUnKTtcbiAgICBjb25zdCB0bXBJZCA9IGNtLmdldE9wdGlvbignY29udGVudElkJyk7XG4gICAgY29uc3QgdG1wVGl0bGUgPSBQZXJzaXN0b3IuZ2V0KHRtcElkKS50aXRsZTtcblxuICAgIGNvbnN0IGNvbnRlbnQgPSBjbS5kb2MuZ2V0VmFsdWUoKTtcbiAgICBpZiAoISh0aXRsZSB8fCB0bXBUaXRsZSkpIHtcbiAgICAgIGVycm9yKCfmoIfpopjkuI3og73kuLrnqbohJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghY29udGVudCkge1xuICAgICAgZXJyb3IoJ+WGheWuueS4jeiDveS4uuepuiEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhcGkuY3JlYXRlKHRpdGxlIHx8IHRtcFRpdGxlLCBjb250ZW50KVxuICAgICAgLnRoZW4oKG5ld1Bvc3QpID0+IHtcbiAgICAgICAgUGVyc2lzdG9yLnJlbW92ZSh0bXBJZCk7XG4gICAgICAgIHBvc3RMaXN0VXBkYXRlcigob2xkUG9zdExpc3QpID0+IHtcbiAgICAgICAgICBvbGRQb3N0TGlzdFswXSA9IG5ld1Bvc3Q7XG4gICAgICAgICAgb2xkUG9zdExpc3RbMF0ucG9zdFR5cGUgPSAncHVibGlzaGVkJ1xuICAgICAgICB9KVxuICAgICAgICBzdWNjZXNzKCfljZrmlofliJvlu7rmiJDlip8nKVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICBlcnJvcign5Y2a5paH5Yib5bu65aSx6LSlJylcbiAgICAgIH0pO1xuICB9XG5cbiIsImltcG9ydCBoYXNoIGZyb20gJ29iamVjdC1oYXNoJztcbmV4cG9ydCBkZWZhdWx0ICh7IFBlcnNpc3RvciwgcG9zdExpc3RVcGRhdGVyLCBhY3RpdmUgfSkgPT4gXG4gICh7ZXJyb3IsIHN1Y2Nlc3MsIHdhcm59LCBjbSwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QgdGl0bGUgPSBwYXJhbXMuYXJnU3RyaW5nICYmIHBhcmFtcy5hcmdTdHJpbmcudHJpbSgpO1xuICAgIGlmKCF0aXRsZSkge1xuICAgICAgZXJyb3IoJ+agh+mimOS4jeiDveS4uuepujogbmV3ICZsdDt0aXRsZSZndDsnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY20uc2V0T3B0aW9uKCduZXdQb3N0VGl0bGUnLCB0aXRsZSk7XG4gICAgY29uc3QgdG1wSWQgPSBoYXNoKERhdGUubm93KCkpLnNsaWNlKDE2KTtcbiAgICBjb25zdCBuZXdQb3N0ID0ge1xuICAgICAgdGl0bGUsXG4gICAgICBpZDogdG1wSWQsXG4gICAgICBwb3N0VHlwZTogJ2RyYWZ0JyxcbiAgICAgIGNvbnRlbnQ6ICcnXG4gICAgfVxuICAgIFBlcnNpc3Rvci5zZXQodG1wSWQsIG5ld1Bvc3QpO1xuICAgIHBvc3RMaXN0VXBkYXRlcigob2xkUG9zdExpc3QpID0+IHtcbiAgICAgIG9sZFBvc3RMaXN0LnVuc2hpZnQobmV3UG9zdCk7XG4gICAgfSwgKCkgPT4ge1xuICAgICAgYWN0aXZlKDApO1xuICAgIH0pXG4gIH1cblxuIiwiaW1wb3J0IHtcbiAgYnVpbGRVcGRhdGVDbWQsXG4gIGJ1aWxkRGVsZXRlQ21kLFxuICBidWlsZENyZWF0ZUNtZCxcbiAgYnVpbGROZXdDbWQsXG59IGZyb20gJy4vY29tbWFuZHMnO1xuXG4vKipcbiAqIEBwb3N0VHlwZSB7U3RyaW5nfSBbJ2RyYWZ0JywgJ3B1Ymxpc2hlZCddXG4gKi9cblxuY29uc3QgcGlja0NtZCA9IChjbWROYW1lQXJyLCBjb21tYW5kcykgPT4ge1xuICByZXR1cm4gY29tbWFuZHMuZmlsdGVyKCh7IG5hbWUgfSkgPT4gY21kTmFtZUFyci5pbmNsdWRlcyhuYW1lKSlcbn1cblxuY29uc3QgYnVpbGRFZGl0b3JDb21tYW5kcyA9ICh0b29scywgcG9zdFR5cGUpID0+IHtcbiAgY29uc3Qge1xuICAgIGFwaSwgcG9zdExpc3RVcGRhdGVyLCBhY3RpdmUsIGV4aXQsIFBlcnNpc3RvclxuICB9ID0gdG9vbHM7XG5cbiAgY29uc3QgZ2VuZXJhbENtZFNldCA9IFtcbiAgICAnbmV3JyxcbiAgICAnZGVsZXRlVGhpc1Bvc3RGb3JldmVyJyxcbiAgICAnZXhpdCcsXG4gIF07XG5cbiAgY29uc3QgZXhIYW5kbGVyVmFsaWRhdG9yID0gKGZuLCBleE5hbWUpID0+IHtcbiAgICBjb25zdCBkZWRpY2F0ZWRQb3N0Q21kTWFwID0ge1xuICAgICAgZHJhZnQ6IFsncHVibGlzaCddLFxuICAgICAgcHVibGlzaGVkOiBbJ3VwZGF0ZSddXG4gICAgfTtcblxuICAgIGNvbnN0IGRlZmF1bHRIYW5kbGVyID0gKHsgZXJyb3IgfSkgPT4ge1xuICAgICAgZXJyb3IoJ+mdnuazleWRveS7pCcpO1xuICAgIH07XG5cbiAgICBjb25zdCBpc1ZhbGlkID0gZGVkaWNhdGVkUG9zdENtZE1hcFtwb3N0VHlwZV0uaW5jbHVkZXMoZXhOYW1lKTtcbiAgICByZXR1cm4gaXNWYWxpZCA/IGZuIDogZGVmYXVsdEhhbmRsZXI7XG4gIH07XG5cbiAgY29uc3QgY29tbWFuZHMgPSBbe1xuICAgIG5hbWU6ICd1cGRhdGUnLFxuICAgIGZuOiBleEhhbmRsZXJWYWxpZGF0b3IoYnVpbGRVcGRhdGVDbWQodG9vbHMpLCAndXBkYXRlJylcbiAgfSwge1xuICAgIG5hbWU6ICdkZWxldGVUaGlzUG9zdEZvcmV2ZXInLFxuICAgIGZuOiBidWlsZERlbGV0ZUNtZCh0b29scywgcG9zdFR5cGUpXG4gIH0sIHtcbiAgICBuYW1lOiAncHVibGlzaCcsXG4gICAgZm46IGV4SGFuZGxlclZhbGlkYXRvcihidWlsZENyZWF0ZUNtZCh0b29scyksICdwdWJsaXNoJylcbiAgfSwge1xuICAgIG5hbWU6ICdleGl0JyxcbiAgICBmbjogKCkgPT4geyBleGl0KCk7fVxuICB9LCB7XG4gICAgbmFtZTogJ25ldycsXG4gICAgZm46IGJ1aWxkTmV3Q21kKHRvb2xzKVxuICB9XVxuXG4gIHJldHVybiBjb21tYW5kcztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGJ1aWxkRWRpdG9yQ29tbWFuZHM7XG4iLCJjb25zdCBLRVlfUFJFRklYID0gJ3BtLXBlcnNpc3Rvci0nO1xuY29uc3QgS0VZX1BSRUZJWF9GT1JfVElNRVNUQU1QID0gJ3BtLXRpbWUtc3RhbXAnO1xuY29uc3QgS0VZX1JFR19FWFAgPSBuZXcgUmVnRXhwKCdeJyArIEtFWV9QUkVGSVgpO1xuXG5jb25zdCB1cGRhdGVUaW1lU3RhbXAgPSAoKSA9PiB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgIEtFWV9QUkVGSVhfRk9SX1RJTUVTVEFNUCxcbiAgICBEYXRlLm5vdygpXG4gICk7XG59XG5cbmNvbnN0IGdldFRpbWVTdGFtcCA9ICgpID0+IHtcbiAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXG4gICAgS0VZX1BSRUZJWF9GT1JfVElNRVNUQU1QLFxuICApIHx8IDA7XG59XG5cbmNvbnN0IHNldCA9IChrZXksIHZhbCkgPT4ge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICBLRVlfUFJFRklYICsga2V5LFxuICAgIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgKTtcbiAgdXBkYXRlVGltZVN0YW1wKCk7XG59XG5cbmNvbnN0IGdldCA9IChrZXkpID0+IHtcbiAgaWYgKCFrZXkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXG4gICAgS0VZX1BSRUZJWCArIGtleVxuICApKTtcbn1cblxuY29uc3QgX2dldCA9IChrZXkpID0+IHtcbiAgaWYgKCFrZXkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXG4gICAga2V5XG4gICkpO1xufVxuXG5jb25zdCBfZ2V0UGVyc2lzdG9yS2V5cyA9ICgpID0+IHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGxvY2FsU3RvcmFnZSlcbiAgICAuZmlsdGVyKGsgPT4gS0VZX1JFR19FWFAudGVzdChrKSlcbn1cblxuY29uc3QgcmVtb3ZlID0gKGtleSkgPT4ge1xuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcbiAgICBLRVlfUFJFRklYICsga2V5XG4gICk7XG59XG5cbmNvbnN0IGxpc3QgPSAoKSA9PiB7XG4gIHJldHVybiBfZ2V0UGVyc2lzdG9yS2V5cygpLm1hcChfZ2V0KVxufTtcblxuY29uc3Qgd2l0aExvY2FsTGlzdCA9IChhcnIpID0+IHtcbiAgY29uc3QgbG9jYWxMaXN0ID0gbGlzdCgpO1xuICBjb25zdCBpZE1hcCA9IHt9O1xuICBhcnIuZm9yRWFjaCgoe2lkfSkgPT4ge1xuICAgIGlkTWFwW2lkXSA9IHRydWU7XG4gIH0pO1xuXG4gIGlmICghYXJyLmxlbmd0aCkge1xuICAgIHJldHVybiBsb2NhbExpc3QubWFwKHAgPT4gKHtcbiAgICAgIHBvc3RUeXBlOiAnZHJhZnQnLFxuICAgICAgLi4ucFxuICAgIH0pKTtcbiAgfVxuXG4gIGNvbnN0IG5ld1Bvc3RzID0gbG9jYWxMaXN0XG4gICAgLmZpbHRlcigoeyBpZCB9KSA9PiB7XG4gICAgICByZXR1cm4gIWlkTWFwW2lkXTtcbiAgICB9KTtcblxuICByZXR1cm4gW1xuICAgIC4uLm5ld1Bvc3RzLm1hcChwID0+ICh7cG9zdFR5cGU6ICdkcmFmdCcsIC4uLnB9KSksXG4gICAgLi4uYXJyLm1hcChwID0+ICh7cG9zdFR5cGU6ICdwdWJsaXNoZWQnLCAuLi5wfSkpXG4gIF1cbn07XG5cbmNvbnN0IGRlc3Ryb3kgPSAoKSA9PiB7XG4gIF9nZXRQZXJzaXN0b3JLZXlzKCkuZm9yRWFjaChrID0+IHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrKVxuICB9KTtcbn1cblxuZXhwb3J0IHtcbiAgc2V0LFxuICBnZXQsXG4gIHJlbW92ZSxcbiAgbGlzdCxcbiAgZGVzdHJveSxcbiAgd2l0aExvY2FsTGlzdCxcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IHVwbG9hZEZpbGUgfSBmcm9tICdAemhvdWppYWhhby91dGlscyc7XG5cbmltcG9ydCAnLi9zdHlsZS5zY3NzJztcblxuY2xhc3MgVXBsb2FkZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcblxuICBzdGF0ZSA9IHtcbiAgICBmaWxlOiBudWxsLFxuICAgIHVwbG9hZGluZzogZmFsc2UsXG4gIH07XG5cbiAgdXBsb2FkRmlsZSA9IChmaWxlKSA9PiB7XG4gICAgY29uc3QgdXBsb2FkQXBpRW5kUG9pbnQgPSAnaHR0cHM6Ly9hcGkuempoLmltL3VwbG9hZCc7XG4gICAgY29uc3QgaWQgPSBgJHt0aGlzLnByb3BzLmZpbGVJZH0tJHtmaWxlLm5hbWV9YDtcbiAgICB0aGlzLnNldFN0YXRlKHsgdXBsb2FkaW5nOiB0cnVlIH0pO1xuICAgIHVwbG9hZEZpbGUodXBsb2FkQXBpRW5kUG9pbnQsIGZpbGUsICdmaWxlJywgeyBpZCB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdXBsb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgY29uc3QgY2JGbiA9IHRoaXMucHJvcHMub25TdWNjZXNzIHx8IGZ1bmN0aW9uICgpIHt9O1xuICAgICAgICBjb25zdCBmaWxlVVJMID0gYGh0dHBzOi8vaW1hZ2VzLXJlcG8uc2dwMS5kaWdpdGFsb2NlYW5zcGFjZXMuY29tLyR7aWR9YDtcbiAgICAgICAgY2JGbihmaWxlVVJMKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdXBsb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgIH0pXG4gIH07XG5cbiAgaGFuZGxlT25DaG9vc2VGaWxlID0gKCkgPT4ge1xuICAgIHRoaXMuZmlsZUlucHV0ICYmIHRoaXMuZmlsZUlucHV0LmNsaWNrKCk7XG4gIH07XG5cbiAgaGFuZGxlRmlsZVNlbGVjdCA9IChlKSA9PiB7XG4gICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdO1xuICAgIGlmICghZmlsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnVwbG9hZEZpbGUoZmlsZSlcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIDxpbnB1dFxuICAgICAgICByZWY9e2ZpbGVJbnB1dCA9PiAodGhpcy5maWxlSW5wdXQgPSBmaWxlSW5wdXQpfVxuICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgIGFjY2VwdD17dGhpcy5wcm9wcy5hY2NlcHR9XG4gICAgICAgIGNsYXNzTmFtZT1cImZpbGUtaW5wdXRcIlxuICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVGaWxlU2VsZWN0fVxuICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID0gbnVsbDtcbiAgICAgICAgfX1cbiAgICAgIC8+LFxuICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlbih7XG4gICAgICAgIHNlbGVjdDogdGhpcy5oYW5kbGVPbkNob29zZUZpbGUsXG4gICAgICAgIHVwbG9hZGluZzogdGhpcy5zdGF0ZS51cGxvYWRpbmdcbiAgICAgIH0pXG4gICAgXVxuICB9XG59XG5cbmV4cG9ydCB7XG4gIFVwbG9hZGVyXG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuXG5jb25zdCBCbGlua0RvdCA9ICh7IHNpemUgPSAzIH0pID0+IChcbiAgPGRpdlxuICAgIGNsYXNzTmFtZT1cImJnLWJsaW5rLWRvdFwiXG4gICAgc3R5bGU9e3tcbiAgICAgIHdpZHRoOiBzaXplLFxuICAgICAgaGVpZ2h0OiBzaXplXG4gICAgfX1cbiAgLz5cbik7XG5cbmNvbnN0IGNvcHlUb0NsaXBib2FyZCA9ICh0ZXh0KSA9PiB7XG4gIGlmICh3aW5kb3cuY2xpcGJvYXJkRGF0YSAmJiB3aW5kb3cuY2xpcGJvYXJkRGF0YS5zZXREYXRhKSB7XG4gICAgd2luZG93LmNsaXBib2FyZERhdGEuc2V0RGF0YSgnVGV4dCcsIHRleHQpO1xuICB9IGVsc2UgaWYgKGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCAmJiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoJ2NvcHknKSkge1xuICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICB0ZXh0YXJlYS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgdGV4dGFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgIHRleHRhcmVhLnN0eWxlLmJvdHRvbSA9ICctMjAwcHgnO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xuICAgIHRleHRhcmVhLnNlbGVjdCgpO1xuICAgIHRyeSB7XG4gICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRhcmVhKTtcbiAgICAgIH0pXG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuZXhwb3J0IHtcbiAgQmxpbmtEb3QsXG4gIGNvcHlUb0NsaXBib2FyZFxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7VXBsb2FkZXJ9IGZyb20gJy4vdXBsb2FkZXInO1xuaW1wb3J0IHtCbGlua0RvdH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IEF0dGFjaG1lbnRJY29uIGZyb20gJy4uL2ljb25zL2F0dGFjaG1lbnQuc3ZnJztcblxuY29uc3QgQXR0YWNobWVudEJ0biA9ICh7XG4gIG9uU3VjY2VzcyxcbiAgZmlsZUlkLFxuICBoYXNBdHRhY2hBbHJlYWR5XG59KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPFVwbG9hZGVyXG4gICAgICBmaWxlSWQ9e2ZpbGVJZH1cbiAgICAgIG9uU3VjY2Vzcz17b25TdWNjZXNzfVxuICAgID5cbiAgICAgIHtcbiAgICAgICAgKHsgc2VsZWN0LCB1cGxvYWRpbmcgfSkgPT4ge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BhY3Rpb25zICR7aGFzQXR0YWNoQWxyZWFkeSA/ICdoYXNBdHRhY2gnIDogJyd9YH1cbiAgICAgICAgICAgICAgb25DbGljaz17c2VsZWN0fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dXBsb2FkaW5nXG4gICAgICAgICAgICAgICAgPyA8QmxpbmtEb3QgLz5cbiAgICAgICAgICAgICAgICA6IDxBdHRhY2htZW50SWNvbi8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICA8L1VwbG9hZGVyPlxuICApXG59O1xuXG5leHBvcnQge1xuICBBdHRhY2htZW50QnRuXG59IiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHByb2R1Y2UgZnJvbSAnaW1tZXInO1xuXG5pbXBvcnQgQXN5bmNJbXBvcnQgZnJvbSAnLi9hc3luYy1pbXBvcnQnO1xuaW1wb3J0IFBvc3RMaXN0IGZyb20gJy4vcG9zdC1saXN0LydcbmltcG9ydCBidWlsZEVkaXRvckV4QXJyIGZyb20gJy4vY3VzdG9tLWVkaXRvci1jb21tYW5kcy8nXG5pbXBvcnQgKiBhcyBQZXJzaXN0b3IgZnJvbSAnLi4vcGVyc2lzdG9yLydcbmltcG9ydCB7QXR0YWNobWVudEJ0bn0gZnJvbSAnLi9hdHRhY2htZW50LWJ0bic7XG5cbmNvbnN0IHZlcnNpb24gPSBgdiR7cmVxdWlyZSgnLi4vLi4vcGFja2FnZS5qc29uJykudmVyc2lvbn1gO1xuY29uc3QgRWRpdG9yID0gQXN5bmNJbXBvcnQoXG4gICgpID0+IHtcbiAgICByZXR1cm4gaW1wb3J0KCdAemhvdWppYWhhby9lZGl0b3IvbGliL3JlYWN0LWNvZGUtbWlycm9yJyk7XG4gIH0sXG4gIChcbiAgICA8ZGl2XG4gICAgICBzdHlsZT17e1xuICAgICAgICB3aWR0aDogJ2NhbGMoNTAlIC0gMTVweCknLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYm9yZGVyOiAnZG90dGVkIDFweCAjMDAwJyxcbiAgICAgICAgYmFja2dyb3VuZDogJyNmMGYwZjAnLFxuICAgICAgfX1cbiAgICAvPlxuICApXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhbmUgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGFjdGl2ZVBvc3RJZHg6IDAsXG4gICAgICB1cGRhdGVTdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIHBvc3RMaXN0OiB0aGlzLnByb3BzLnBvc3RzXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy8gUGVyc2lzdG9yLmRlc3Ryb3koKTtcbiAgfVxuXG4gIGFjdGl2ZSA9IChhY3RpdmVQb3N0SWR4KSA9PiB7dGhpcy5zZXRTdGF0ZSh7IGFjdGl2ZVBvc3RJZHggfSl9XG5cbiAgdXBkYXRlUG9zdExpc3QgPSAodXBkYXRlckZuLCBjYkZuID0gKCkgPT4gbnVsbCkgPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHVwZGF0ZXJGbikpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBwb3N0TGlzdDogdXBkYXRlckZuXG4gICAgICB9KVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICBwb3N0TGlzdDogcHJvZHVjZShwcmV2U3RhdGUucG9zdExpc3QsIHVwZGF0ZXJGbilcbiAgICB9KSwgY2JGbilcbiAgfVxuXG4gIGJ1aWxkRWR0Q2xzID0gKCkgPT4ge1xuICAgIGNvbnN0IGVkaXRpbmdQb3N0ID0gdGhpcy5zdGF0ZS5wb3N0TGlzdFtcbiAgICAgIHRoaXMuc3RhdGUuYWN0aXZlUG9zdElkeFxuICAgIF0gfHwgdGhpcy5zdGF0ZS5wb3N0TGlzdFswXTtcbiAgICBjb25zdCBsb2NhbENoYW5nZXMgPSAhIVBlcnNpc3Rvci5nZXQoZWRpdGluZ1Bvc3QuaWQpO1xuICAgIGxldCB0eXBlID0gJ25vcm1hbC1maWxlJztcblxuICAgIGlmIChlZGl0aW5nUG9zdC5wb3N0VHlwZSA9PT0gJ2RyYWZ0JyAmJiBsb2NhbENoYW5nZXMpIHtcbiAgICAgIHR5cGUgPSAnbmV3LWZpbGUnO1xuICAgIH1cblxuICAgIGlmIChlZGl0aW5nUG9zdC5wb3N0VHlwZSA9PT0gJ3B1Ymxpc2hlZCcgJiYgbG9jYWxDaGFuZ2VzKSB7XG4gICAgICB0eXBlID0gJ2NoYW5nZWQtZmlsZSdcbiAgICB9XG5cbiAgICByZXR1cm4gXCJlZGl0b3Itd3JhcHBlciBcIiArIHR5cGU7XG4gIH07XG5cbiAgdGl0bGVGb3JtYXR0ZXIgPSBwID0+IHtcbiAgICByZXR1cm4gYCR7cC50aXRsZX1gO1xuICB9XG5cbiAgcmVmcmVzaCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHVwZGF0ZVN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfTtcblxuICBnZXRFZGl0aW5nUG9zdFRpdGxlID0gKCkgPT4ge1xuICAgIGNvbnN0IGVkaXRpbmdQb3N0ID0gdGhpcy5zdGF0ZS5wb3N0TGlzdFtcbiAgICAgIHRoaXMuc3RhdGUuYWN0aXZlUG9zdElkeFxuICAgIF0gfHwgdGhpcy5zdGF0ZS5wb3N0TGlzdFswXTtcbiAgICByZXR1cm4gZWRpdGluZ1Bvc3QudGl0bGU7XG4gIH1cblxuICBoYW5kbGVFZGl0b3JDb250ZW50Q2hhbmdlID0gKGlkLCBjb250ZW50KSA9PiB7XG4gICAgY29uc3QgZWRpdGluZ1Bvc3QgPSB0aGlzLnN0YXRlLnBvc3RMaXN0W1xuICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVQb3N0SWR4XG4gICAgXSB8fCB0aGlzLnN0YXRlLnBvc3RMaXN0WzBdO1xuICAgIFBlcnNpc3Rvci5zZXQoaWQsIHtcbiAgICAgIHRpdGxlOiB0aGlzLmdldEVkaXRpbmdQb3N0VGl0bGUoKSxcbiAgICAgIHBvc3RUeXBlOiBlZGl0aW5nUG9zdC50eXBlLFxuICAgICAgaWQsXG4gICAgICBjb250ZW50XG4gICAgfSlcbiAgfTtcblxuICBoYW5kbGVVcGxvYWRGaWxlID0gaWQgPT4gKHVybCkgPT4ge1xuICAgIHRoaXMucHJvcHMuYXBpLnVwZGF0ZShpZCwgJycsICcnLCB1cmwpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlUG9zdExpc3QoKG9sZFBvc3RMaXN0KSA9PiB7XG4gICAgICAgICAgb2xkUG9zdExpc3QuZmluZCgoeyBpZDogdGFyZ2V0SWQgfSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGlkID09PSB0YXJnZXRJZFxuICAgICAgICAgIH0pLmF0dGFjaG1lbnRfdXJsID0gdXJsO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9KVxuICB9O1xuXG4gIHJlbmRlclRpdGxlTGlzdCA9ICgpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaWRlLWxpc3QtY29sXCI+XG4gICAgICAgIDxQb3N0TGlzdFxuICAgICAgICAgIHRpdGxlcz17dGhpcy5zdGF0ZS5wb3N0TGlzdC5tYXAodGhpcy50aXRsZUZvcm1hdHRlcil9XG4gICAgICAgICAgdXBkYXRlPXt0aGlzLnByb3BzLmFwaS51cGRhdGV9XG4gICAgICAgICAgcG9zdExpc3RVcGRhdGVyPXt0aGlzLnVwZGF0ZVBvc3RMaXN0fVxuICAgICAgICAgIHJlZnJlc2g9e3RoaXMucmVmcmVzaH1cbiAgICAgICAgICBwb3N0cz17dGhpcy5zdGF0ZS5wb3N0TGlzdH1cbiAgICAgICAgICBvblRpdGxlQ2xpY2s9e3RoaXMuYWN0aXZlfVxuICAgICAgICAgIGFjdGl2ZVBvc3RJZHg9e3RoaXMuc3RhdGUuYWN0aXZlUG9zdElkeH1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfTtcblxuICByZW5kZXJBdHRhY2htZW50QnRuID0gKCkgPT4ge1xuICAgIGNvbnN0IGVkaXRpbmdQb3N0ID0gdGhpcy5zdGF0ZS5wb3N0TGlzdFtcbiAgICAgIHRoaXMuc3RhdGUuYWN0aXZlUG9zdElkeFxuICAgICAgXSB8fCB0aGlzLnN0YXRlLnBvc3RMaXN0WzBdO1xuICAgIGNvbnN0IHtcbiAgICAgIGlkLFxuICAgICAgcG9zdFR5cGU6IHR5cGUsXG4gICAgICBhdHRhY2htZW50X3VybDogdXJsXG4gICAgfSA9IGVkaXRpbmdQb3N0O1xuXG4gICAgY29uc3QgaXNQdWJsaXNoZWQgPSB0eXBlID09PSAncHVibGlzaGVkJztcblxuICAgIGlmICghaXNQdWJsaXNoZWQpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxBdHRhY2htZW50QnRuXG4gICAgICAgIGZpbGVJZD17aWR9XG4gICAgICAgIGhhc0F0dGFjaEFscmVhZHk9eyEhdXJsfVxuICAgICAgICBvblN1Y2Nlc3M9e3RoaXMuaGFuZGxlVXBsb2FkRmlsZShpZCl9XG4gICAgICAvPlxuICAgIClcbiAgfTtcblxuICByZW5kZXJFZGl0b3IgPSAoKSA9PiB7XG4gICAgY29uc3QgZWRpdGluZ1Bvc3QgPSB0aGlzLnN0YXRlLnBvc3RMaXN0W1xuICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVQb3N0SWR4XG4gICAgXSB8fCB0aGlzLnN0YXRlLnBvc3RMaXN0WzBdO1xuICAgIGNvbnN0IGxvY2FsQ2hhbmdlcyA9IFBlcnNpc3Rvci5nZXQoZWRpdGluZ1Bvc3QuaWQpO1xuICAgIGNvbnN0IGluaXRDb250ZW50ID0gKGxvY2FsQ2hhbmdlcyAmJiBsb2NhbENoYW5nZXMuY29udGVudCAhPT0gdW5kZWZpbmVkKVxuICAgICAgPyBsb2NhbENoYW5nZXMuY29udGVudFxuICAgICAgOiAoZWRpdGluZ1Bvc3QuY29udGVudCB8fCAnJyk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMuYnVpbGRFZHRDbHMoKX0gZGF0YS12PXt2ZXJzaW9ufT5cbiAgICAgICAgPEVkaXRvclxuICAgICAgICAgIHZhbHVlPXtpbml0Q29udGVudH1cbiAgICAgICAgICBjb250ZW50SWQ9e2VkaXRpbmdQb3N0LmlkfVxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcj1cIiNmMmYyZjJcIlxuICAgICAgICAgIG9uU2F2ZT17dGhpcy5oYW5kbGVFZGl0b3JDb250ZW50Q2hhbmdlfVxuICAgICAgICAgIGV4QXJyPXtidWlsZEVkaXRvckV4QXJyKHtcbiAgICAgICAgICAgIGFwaTogdGhpcy5wcm9wcy5hcGksXG4gICAgICAgICAgICBwb3N0TGlzdFVwZGF0ZXI6IHRoaXMudXBkYXRlUG9zdExpc3QsXG4gICAgICAgICAgICBlZGl0aW5nUG9zdCxcbiAgICAgICAgICAgIHJlZnJlc2g6IHRoaXMucmVmcmVzaCxcbiAgICAgICAgICAgIGFjdGl2ZTogdGhpcy5hY3RpdmUsXG4gICAgICAgICAgICBleGl0OiB0aGlzLnByb3BzLmV4aXQsXG4gICAgICAgICAgICBQZXJzaXN0b3JcbiAgICAgICAgICB9LCBlZGl0aW5nUG9zdC5wb3N0VHlwZSl9XG4gICAgICAgIC8+XG4gICAgICAgIHtcbiAgICAgICAgICB0aGlzLnJlbmRlckF0dGFjaG1lbnRCdG4oKVxuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICBlZGl0aW5nUG9zdC5hdHRhY2htZW50X3VybFxuICAgICAgICAgICYmIDxpbWcgc3JjPXtlZGl0aW5nUG9zdC5hdHRhY2htZW50X3VybH0gLz5cbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVcIj5cbiAgICAgICAgICB7dGhpcy5yZW5kZXJUaXRsZUxpc3QoKX1cbiAgICAgICAgICB7dGhpcy5yZW5kZXJFZGl0b3IoKX1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuXG5pbXBvcnQgeyAkIH0gZnJvbSAnQHpob3VqaWFoYW8vdXRpbHMnO1xuXG5pbXBvcnQgUGFuZSBmcm9tICcuL3BhbmUnO1xuaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuXG5leHBvcnQgY29uc3QgdW5pbnN0YWxsID0gKGRvbSkgPT4ge1xuICBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKGRvbSB8fCAkKCcjZ3VpJykpO1xufVxuXG5leHBvcnQgZGVmYXVsdCAocG9zdHMsIGFwaSwgZXhpdCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0ICRndWkgPSBvcHRpb25zLmRvbSB8fCAkKCcjZ3VpJyk7XG4gICRndWkuY2xhc3NMaXN0LmFkZCgnZnVsbHNjcmVlbicpO1xuICBSZWFjdERPTS5yZW5kZXIoXG4gICAgPFBhbmUgcG9zdHM9e3Bvc3RzfSBhcGk9e2FwaX0gZXhpdD17ZXhpdH0vPixcbiAgICAkZ3VpXG4gIClcbn1cbiIsImltcG9ydCB7IHJlcSwgcmVxQW5kQ2FjaGUgfSBmcm9tICdAemhvdWppYWhhby91dGlscyc7XG5cbmNvbnN0IEJBU0VfVVJMID0gJ2h0dHBzOi8vYXBpLnpqaC5pbS96JztcbmNvbnN0IEFQSSA9IHtcbiAgY3JlYXRlOiBgJHtCQVNFX1VSTH0vcG9zdC9jcmVhdGVgLFxuICB1cGRhdGU6IGAke0JBU0VfVVJMfS9wb3N0L3VwZGF0ZWAsXG4gIGRlbGV0ZTogYCR7QkFTRV9VUkx9L3Bvc3QvZGVsZXRlYCxcbiAgbGlzdDogYCR7QkFTRV9VUkx9L3Bvc3RzYCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IChjcmVkZW50aWFsKSA9PiB7XG4gIGNvbnN0IGFjdGlvbnNOZWVkQ3JlZGVudGlhbCA9IGNyZWRlbnRpYWxcbiAgICA/IHtcbiAgICAgIGNyZWF0ZTogKHRpdGxlLCBjb250ZW50KSA9PiB7XG4gICAgICAgIHJldHVybiByZXEoXG4gICAgICAgICAgQVBJLmNyZWF0ZSxcbiAgICAgICAgICAnUE9TVCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgLi4uY3JlZGVudGlhbFxuICAgICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgdXBkYXRlOiAoaWQsIGNvbnRlbnQsIHRpdGxlLCBhdHRhY2htZW50VVJMKSA9PiB7XG4gICAgICAgIHJldHVybiByZXEoXG4gICAgICAgICAgQVBJLnVwZGF0ZSxcbiAgICAgICAgICAnUE9TVCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICBhdHRhY2htZW50X3VybDogYXR0YWNobWVudFVSTCxcbiAgICAgICAgICAgIC4uLmNyZWRlbnRpYWxcbiAgICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGRlbGV0ZTogKGlkKSA9PiB7XG4gICAgICAgIHJldHVybiByZXEoXG4gICAgICAgICAgQVBJLmRlbGV0ZSxcbiAgICAgICAgICAnUE9TVCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAuLi5jcmVkZW50aWFsXG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIDoge1xuICAgICAgY3JlYXRlOiAoKSA9PiBQcm9taXNlLnJlamVjdCgpLFxuICAgICAgdXBkYXRlOiAoKSA9PiBQcm9taXNlLnJlamVjdCgpLFxuICAgICAgZGVsZXRlOiAoKSA9PiBQcm9taXNlLnJlamVjdCgpLFxuICAgIH07XG5cbiAgcmV0dXJuIHtcbiAgICBsaXN0OiAoKSA9PiB7XG4gICAgICByZXR1cm4gcmVxQW5kQ2FjaGUoQVBJLmxpc3QpO1xuICAgIH0sXG4gICAgLi4uYWN0aW9uc05lZWRDcmVkZW50aWFsXG4gIH1cbn1cbiIsImltcG9ydCB7IGRvY1RwbCwgJCB9IGZyb20gJ0B6aG91amlhaGFvL3V0aWxzJztcblxuaW1wb3J0IHJ1bk1hbmFnZVBhbmVsIGZyb20gJy4vbWFuYWdlLXBhbmUnO1xuaW1wb3J0IHt1bmluc3RhbGx9IGZyb20gJy4vbWFuYWdlLXBhbmUnO1xuaW1wb3J0IHBvc3RTREsgZnJvbSAnLi9ibG9nLWFwaS8nO1xuaW1wb3J0IHsgd2l0aExvY2FsTGlzdCB9IGZyb20gJy4vcGVyc2lzdG9yLyc7XG5cbmNvbnN0IGRvYyA9IGRvY1RwbCgncG0nLCAncG0gW2FjY2VzcyB0b2tlbl0nLCAncG9zdHMgbWFuYWdlciBmb3IgbXkgYmxvZy4nKTtcblxuY29uc3Qgc2F2ZUNyZWRlbnRpYWwgPSAoY3JlZGVudGlhbCkgPT4ge1xuICBjb25zdCBjcmVkZW50aWFsS2V5ID0gJ3AtYy1rZXknO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjcmVkZW50aWFsS2V5LCBKU09OLnN0cmluZ2lmeShjcmVkZW50aWFsKSk7XG59O1xuXG5jb25zdCBsb2FkQ3JlZGVudGlhbCA9ICgpID0+IHtcbiAgY29uc3QgY3JlZGVudGlhbEtleSA9ICdwLWMta2V5JztcbiAgcmV0dXJuIEpTT04ucGFyc2UoXG4gICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oY3JlZGVudGlhbEtleSlcbiAgKSB8fCBudWxsO1xufTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBkb2MsXG4gIHNob3J0b3B0czogJ2UnLFxuICBoYW5kbGVyOiBhc3luYyAoXG4gICAgcGFyYW1zT2JqLFxuICApID0+IHtcbiAgICBpZiAocGFyYW1zT2JqLmUpIHtcbiAgICAgIHVuaW5zdGFsbCgpO1xuICAgICAgcmV0dXJuICdHb29kYnllJztcbiAgICB9O1xuXG4gICAgY29uc3QgY3JlZGVudGlhbCA9ICggcGFyYW1zT2JqLnVzZXIgJiYgcGFyYW1zT2JqLnBhc3N3b3JkIClcbiAgICAgID8ge1xuICAgICAgICB1c2VyOiBwYXJhbXNPYmoudXNlcixcbiAgICAgICAgcGFzc3dvcmQ6IHBhcmFtc09iai5wYXNzd29yZFxuICAgICAgfVxuICAgICAgOiBsb2FkQ3JlZGVudGlhbCgpO1xuXG4gICAgc2F2ZUNyZWRlbnRpYWwoY3JlZGVudGlhbCk7XG4gICAgY29uc3QgYXBpID0gcG9zdFNESyhjcmVkZW50aWFsKTtcbiAgICBjb25zdCBwb3N0cyA9IGF3YWl0IGFwaS5saXN0KCk7XG4gICAgY29uc3QgZG9tID0gcGFyYW1zT2JqLmRvbSB8fCAkKCcjZ3VpJyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJ1bk1hbmFnZVBhbmVsKHdpdGhMb2NhbExpc3QocG9zdHMpLCBhcGksICgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgZG9tLmNsYXNzTGlzdC5yZW1vdmUoJ2Z1bGxzY3JlZW4nKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIFRlcm1pbmFsICYmIFRlcm1pbmFsLmV4ZWMoJ3BtIC1lJyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgfSwgeyBkb20gfSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBcIkZhaWwgdG8gZmV0Y2ggcG9zdHNcIjtcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9